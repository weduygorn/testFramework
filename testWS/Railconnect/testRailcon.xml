<?xml version="1.0" encoding="UTF-8"?>
<con:soapui-project id="7cce4187-62bf-44d2-916d-7a81a151d6bb" activeEnvironment="Default" name="testRailcon" resourceRoot="" soapui-version="5.3.0" abortOnError="false" runType="SEQUENTIAL" xmlns:con="http://eviware.com/soapui/config"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.actions.iface.tools.soapui.TestRunnerAction@values-local"><![CDATA[<xml-fragment xmlns:con="http://eviware.com/soapui/config">
  <con:entry key="Environment" value="Default"/>
  <con:entry key="Global Properties" value=""/>
  <con:entry key="TestSuite" value="&lt;all>"/>
  <con:entry key="Password" value=""/>
  <con:entry key="TestRunner Path" value=""/>
  <con:entry key="Tool Args" value=""/>
  <con:entry key="Ignore Errors" value="false"/>
  <con:entry key="Host:Port" value=""/>
  <con:entry key="user-settings.xml Password" value=""/>
  <con:entry key="WSS Password Type" value=""/>
  <con:entry key="Save Project" value="false"/>
  <con:entry key="Enable UI" value="false"/>
  <con:entry key="System Properties" value=""/>
  <con:entry key="Domain" value=""/>
  <con:entry key="Coverage Report" value="false"/>
  <con:entry key="Export JUnit Results" value="false"/>
  <con:entry key="Export JUnit Results with test properties" value="false"/>
  <con:entry key="Open Report" value="false"/>
  <con:entry key="Project Properties" value=""/>
  <con:entry key="Export All" value="false"/>
  <con:entry key="Project Password" value=""/>
  <con:entry key="Report Format(s)" value=""/>
  <con:entry key="TestCase" value="&lt;all>"/>
  <con:entry key="Print Report" value="false"/>
  <con:entry key="Username" value=""/>
  <con:entry key="Root Folder" value=""/>
  <con:entry key="Select Report Type" value=""/>
  <con:entry key="Save After" value="false"/>
  <con:entry key="Add Settings" value="false"/>
  <con:entry key="Endpoint" value=""/>
</xml-fragment>]]></con:setting></con:settings><con:interface xsi:type="con:WsdlInterface" id="446fc931-140e-40b1-a9de-5284f4b18f2b" wsaVersion="NONE" name="RailConnectWSSearch" type="wsdl" bindingName="{railconnect_ws}RailConnectWSSearch" soapVersion="1_2" anonymous="optional" definition="https://demo-amr.contentrail.com/railconnect/search/wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="https://demo-amr.contentrail.com/railconnect/search/wsdl"><con:part><con:url>https://demo-amr.contentrail.com/railconnect/search/wsdl</con:url><con:content><![CDATA[<definitions name="RailConnectWS" targetNamespace="railconnect_ws" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="railconnect_ws" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:ScheduleRQ="ScheduleRQ" xmlns:ScheduleRS="ScheduleRS" xmlns:SellSegmentRQ="SellSegmentRQ" xmlns:SellSegmentRS="SellSegmentRS" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="ScheduleRQ" schemaLocation="xsd/RailConnect_ScheduleQuoteRQ.xsd"/>
      <import namespace="ScheduleRS" schemaLocation="xsd/RailConnect_ScheduleQuoteRS.xsd"/>
      <import namespace="search_ctr" schemaLocation="xsd/Type/RailConnect_ScheduleQuote_CTR_Types.xsd"/>
    </schema>
  </types>
  <message name="searchActionIn">
    <part name="request" element="ScheduleRQ:RailConnect_ScheduleQuoteRQ"/>
  </message>
  <message name="searchActionOut">
    <part name="return" element="ScheduleRS:RailConnect_ScheduleQuoteRS"/>
  </message>
  <portType name="RailConnectWSPortSearch">
    <operation name="searchAction">
      <documentation>searchAction</documentation>
      <input message="tns:searchActionIn"/>
      <output message="tns:searchActionOut"/>
    </operation>
  </portType>
  <binding name="RailConnectWSSearch" type="tns:RailConnectWSPortSearch">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="searchAction">
      <soap12:operation soapAction="https://demo-amr.contentrail.com/railconnect/search" soapActionRequired="false" style="document"/>
      <input>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </input>
      <output>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </output>
    </operation>
  </binding>
  <service name="RailConnectWSServiceSearch">
    <port name="PortSearch" binding="tns:RailConnectWSSearch">
      <soap12:address location="https://demo-amr.contentrail.com/railconnect/search"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>https://demo-amr.contentrail.com/railconnect/search/xsd/RailConnect_ScheduleQuoteRQ.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="ScheduleRQ" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:search_ctr="search_ctr" xmlns:ScheduleRQ="ScheduleRQ">
  <xs:import namespace="search_ctr" schemaLocation="Type/RailConnect_ScheduleQuote_CTR_Types.xsd"/>
  <xs:element name="RailConnect_ScheduleQuoteRQ">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Schedule" maxOccurs="2">
          <xs:annotation>
            <xs:documentation>Point to point information for a portion of the journey</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:complexContent>
              <xs:extension base="search_ctr:ScheduleQueryType">
                <xs:attribute name="ExtID" type="xs:NMTOKEN">
                  <xs:annotation>
                    <xs:documentation>Used to specify an external identification</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:extension>
            </xs:complexContent>
          </xs:complexType>
        </xs:element>
        <xs:element name="Passenger" maxOccurs="99">
          <xs:annotation>
            <xs:documentation>A traveller</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:complexContent>
              <xs:extension base="search_ctr:UnnamedPassengerType">
                <xs:attribute name="ExtID" type="xs:NMTOKEN">
                  <xs:annotation>
                    <xs:documentation>Used to specify an external identification</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:extension>
            </xs:complexContent>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attributeGroup ref="search_ctr:PayloadStdAttributes"/>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://demo-amr.contentrail.com/railconnect/search/xsd/Type/RailConnect_ScheduleQuote_CTR_Types.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="search_ctr" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:search_ctr="search_ctr">
  <xs:simpleType name="AlphaLength3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alphabetic Strings, length exactly 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaLength3orString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an IntegerLength1to13 or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="search_ctr:AlphaLength3 search_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 3.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to14">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used forAlpha-Numeric Strings, length 1 to 14.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,14}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodePatternType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes. It may contain merely codes or integer codes associated to a value in AMA_CodeTable.xls.
Pattern is composed on 3 parts: Standard (AMA or OTA or IATA), ListCode (3 upper case letters) and Code (1 to 3 digits). Code is mandatory. ListName is mandatory if Standard is precised, else it is optional. Standard is optional.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}((\.[0-9A-Z]{3,4})((\.(AMA|OTA|IATA|UIC)){0,1})){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes in the OpenTravel Code tables. Possible values of this pattern are 1, 101, 101.EQP, or 101.EQP.X.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}(\.[A-Z]{3}(\.X){0,1}){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DateOrDateTimeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">A construct to validate either a date or a dateTime value.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:date xs:dateTime"/>
  </xs:simpleType>
  <xs:simpleType name="integerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an integer or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:integer search_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="ISO3166">
    <xs:annotation>
      <xs:documentation xml:lang="en">Specifies a 2 character country code as defined in ISO3166.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{2}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="MMYYDate">
    <xs:annotation>
      <xs:documentation xml:lang="en">Month and year information.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="(0[1-9]|1[0-2])[0-9][0-9]"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="nonNegativeIntegerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either a nonNegativeInteger or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:nonNegativeInteger search_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="Numeric0to4">
    <xs:annotation>
      <xs:documentation>Used for numeric values, from 0 to 4 inclusive.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="4"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="NumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StateProvCodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">The standard code or abbreviation for the state, province, or region</xs:documentation>
    </xs:annotation>
    <xs:restriction base="search_ctr:StringLength1to8">
      <xs:minLength value="2"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="String0">
    <xs:annotation>
      <xs:documentation>Used for String length 0</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="0"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to128">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 128.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to255">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 255.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="255"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to16">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 16.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="16"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to64">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 64.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="64"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to128">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength3">
    <xs:annotation>
      <xs:documentation>Used for String length 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="3"/>
      <xs:maxLength value="3"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:attributeGroup name="AmountCurrencyAndDecimalPlaceGroup">
    <xs:attribute name="CurrencyCode" type="search_ctr:AlphaLength3orString0">
      <xs:annotation>
        <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DecimalPlaces" type="search_ctr:nonNegativeIntegerOrString0">
      <xs:annotation>
        <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Amount" type="search_ctr:integerOrString0">
      <xs:annotation>
        <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="BerthAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Berth Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Level" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>Superior, Median, etc. See RDP code type list BLT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Size" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>Simple, Double, etc. See RDP code type list BST</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Position" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>End, Center, etc. See RDP code type list BPT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Configuration" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>Berth1, Berth2, etc. See RDP code type list BCF</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Equipment" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Table, PowerPlug, etc. See RDP code type list ETP</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="BirthDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to provide a date of birth.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as indicated in the document, in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="EffectiveExpireOptionalDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to send the effective date and/or expiration date.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="EffectiveDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDateExclusiveIndicator" type="xs:boolean" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">When true, indicates that the ExpireDate is the first day after the applicable period (e.g. when expire date is Oct 15  the last date of the period is Oct 14).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="GenderGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to indicate the gender of a person, if known.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Gender" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifies the gender.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Male"/>
          <xs:enumeration value="Female"/>
          <xs:enumeration value="Unknown"/>
          <xs:enumeration value="Male_NoShare"/>
          <xs:enumeration value="Female_NoShare"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PayloadStdAttributes">
    <xs:annotation>
      <xs:documentation xml:lang="en">The PayloadAttributesShoRQ defines the attributes that appear on the root element for all Shopping Request messages.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="TimeStamp" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the creation date and time of the message in UTC using the following format specified by ISO 8601; YYYY-MM-DDThh:mm:ssZ with time values using the 24 hour clock (e.g. 20 November 2003, 1:59:38 pm UTC becomes 2003-11-20T13:59:38Z).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Version" type="xs:decimal" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">For all OpenTravel versioned messages, the version of the message is indicated by a decimal value.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="CorrelationID" type="search_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allow end-to-end correlation of log messages with the corresponding Web service message throughout the processing of the Web service message.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PlaceAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Place attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="CoachNumber" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="PlaceNumber" use="optional">
      <xs:annotation>
        <xs:documentation>Physical place number.(Left padding with 0 or [space] if needed)</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PrivacyGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Allows for control of the sharing of data between parties.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="ShareSynchInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for synchronization of information held by other travel service providers.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for synchronization of information held by other travel service providers.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ShareMarketInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for marketing purposes.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for marketing purposes.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="SeatAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Seat Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Direction" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>Face, Back, etc. See RDP code type list SDR</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Position" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>Window, Aisle, etc. See RDP code type list SPS</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Configuration" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>Duo, Quattro, etc. See RDP code type list SCT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PassengerProfile" type="search_ctr:CodePatternType" use="optional">
      <xs:annotation>
        <xs:documentation>BlindWithDog, WheelChair, etc. See RDP code type list PPF</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Equipment" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Table, PowerPlug, etc. See RDP code type list ETP</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:complexType name="RailCardDetails">
    <xs:annotation>
      <xs:documentation>Describes a Railcard reduction</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="search_ctr:StringLength0to128">
        <xs:attribute name="Code">
          <xs:annotation>
            <xs:documentation xml:lang="en">A code identifying the type of card. Refer to code list RCC.</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="6"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="Number">
          <xs:annotation>
            <xs:documentation xml:lang="en">Railcard number</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="45"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="RailcardId" type="xs:string">
          <xs:annotation>
            <xs:documentation>An ID authorizing the use of the card.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="RailCardNumberRequired" type="xs:boolean"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CampaignTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Campaign reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The campaign code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CorporateTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Corporate reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Type">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Contract">
      <xs:annotation>
        <xs:documentation xml:lang="en">The contract number associated to the corporate code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PassengerCategoryDetails">
    <xs:annotation>
      <xs:documentation>Describes a Passenger category reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Context">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CompanyNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Identifies a company by name.</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="search_ctr:StringLength0to128">
        <xs:annotation>
          <xs:documentation xml:lang="en">Provides detailed information on a company.</xs:documentation>
        </xs:annotation>
        <xs:attribute name="Division" type="search_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The division name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="Department" type="search_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The department name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CustomerLoyaltyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Program rewarding frequent use by accumulating credits for services provided by vendors. This type is based on OTA_CommonTypes-CustLoyaltyType</xs:documentation>
    </xs:annotation>
    <xs:attribute name="MembershipID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique identifier of the member in the program (membership number, account number, etc.).</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="search_ctr:StringLength1to32">
          <xs:minLength value="1"/>
          <xs:maxLength value="32"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ProgramID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="search_ctr:AlphaNumericStringLength1to3">
          <xs:minLength value="1"/>
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ExpirationDate" type="search_ctr:DateOrDateTimeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DateTimeLocationType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes DateTime and Location</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="search_ctr:StringLength1to16">
              <xs:attribute name="Context" type="search_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="LocationName" type="search_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Name of the location</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DateTime" type="search_ctr:DateOrDateTimeType">
      <xs:annotation>
        <xs:documentation>Date and optional time</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DetailQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="search_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="search_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="search_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="BookingToken" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DocumentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Provides information on a specific document.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice minOccurs="0">
        <xs:element name="DocHolderName" type="search_ctr:StringLength1to64" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of the document holder in unformatted text (Mr. Sam Jones).</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="DocHolderFormattedName" type="search_ctr:PersonNameType" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of document holder in formatted text.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="DocLimitations" type="search_ctr:StringLength1to64" minOccurs="0" maxOccurs="9">
        <xs:annotation>
          <xs:documentation xml:lang="en">Used to indicate any limitations on the document (e.g. as a person may only be allowed to spend a max of 30 days in country on a visitor's visa).</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="AdditionalPersonNames" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">A container for additional person names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="AdditionalPersonName" type="search_ctr:StringLength1to64" maxOccurs="99">
              <xs:annotation>
                <xs:documentation xml:lang="en">The name of an additional person listed on this document.</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="search_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of document data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueAuthority" type="search_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the group or association that granted the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueLocation" type="search_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the location where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocID" type="search_ctr:StringLength1to32" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocType" type="search_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="search_ctr:GenderGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The gender of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="search_ctr:BirthDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The birth date of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="search_ctr:EffectiveExpireOptionalDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The effective and expiry date of the document.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueStateProv" type="search_ctr:StateProvCodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">State or Province where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueCountry" type="search_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Country where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthCountry" type="search_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth country of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthPlace" type="search_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth place of the document holder (e.g., city, state, county, province), when designating a country of birth, use BirthCountry.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocHolderNationality" type="search_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The country code of the nationality of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ContactName" type="search_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides contact name associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="HolderType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides the type of document holder.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Infant">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is an infant.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="HeadOfHousehold">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is a head of household.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Remark" type="search_ctr:StringLength1to128" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">A remark associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PostalCode" type="search_ctr:StringLength1to16" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Defines the postal code (e.g., ZIP code) on the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ErrorType">
    <xs:annotation>
      <xs:documentation>Describes an Error</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="search_ctr:StringLength0to255">
        <xs:attribute name="Code" type="search_ctr:NumericStringLength1to8" use="required"/>
        <xs:attribute name="Type" default="System">
          <xs:simpleType>
            <xs:restriction base="xs:NMTOKEN">
              <xs:enumeration value="System"/>
              <xs:enumeration value="Functional"/>
              <xs:enumeration value="Provider"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="FareType">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="search_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="search_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeRQ">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule request</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="search_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="LocationType">
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="search_ctr:StringLength1to16">
              <xs:attribute name="Context" type="search_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PriceType">
    <xs:annotation>
      <xs:documentation>Describes a Price</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="search_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
  </xs:complexType>
  <xs:complexType name="ScheduleQueryType">
    <xs:annotation>
      <xs:documentation>Describes a Schedule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="search_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="search_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="DateTime">
        <xs:annotation>
          <xs:documentation>Date and optional time. It can be the departure time or the arrival time</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:choice>
            <xs:element name="Departure" type="search_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the departure time</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Arrival" type="search_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the arrival time</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:complexType>
      </xs:element>
      <xs:element name="SearchCriteria" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Used to restrict the schedule solutions based on specific criteria</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="search_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>It describes any search criteria according to the code list</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="search_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">It is the value of the search criteria specified in the code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleReplyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Segment" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>Portion of an schedule solution, including all legs which are listed under the same train number or identifier.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="search_ctr:SegmentType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="ScheduleSolution" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>An schedule solution</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="search_ctr:ScheduleSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="search_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleSolutionType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="search_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode and departure dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="search_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode and arrival dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration from the departure location to destination.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SearchCriteriaType">
    <xs:annotation>
      <xs:documentation>Describes Search Criteria</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TravelClass" maxOccurs="9">
        <xs:annotation>
          <xs:documentation>Describes any preferences in terms of travel class. Refer to code list TCC.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="search_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SegmentShortType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="search_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="search_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="search_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="search_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Vehicle" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Contains vehicle characteristics</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="search_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle Code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DisplayName" type="search_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle name.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration of the train from departure location to destination location.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentTypeRQ">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment information for booking query</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="search_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="search_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="search_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="search_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductType">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item. It refers to the code list PTY</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type. It refers to the code list TCC</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="search_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description" type="xs:string">
      <xs:annotation>
        <xs:documentation>It is the description of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductTypeRQ">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item (Transport, Transport with seat, Ancillary). It refers to the code list SET.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PersonNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">This provides name information for a person.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="NamePrefix" type="search_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Salutation of honorific (e.g. Mr., Mrs., Ms., Miss, Dr.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="GivenName" type="search_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Given name, first name or names.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MiddleName" type="search_ctr:StringLength1to64" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">The middle name of the person name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="SurnamePrefix" type="search_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The surname prefix, e.g "van der", "von", "de".</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Surname" type="search_ctr:StringLength1to64">
        <xs:annotation>
          <xs:documentation xml:lang="en">Family name, last name. May also be used for full name if the sending system does not have the ability to separate a full name into its parts, e.g. the surname element may be used to pass the full name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameSuffix" type="search_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Hold various name suffixes and letters (e.g. Jr., Sr., III, Ret., Esq.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameTitle" type="search_ctr:StringLength1to16" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Degree or honors (e.g., Ph.D., M.D.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Document" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Document  information for verification purposes and also used for additional filtering for common names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="DocID" type="search_ctr:StringLength1to32" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DocType" type="search_ctr:CodeType" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="search_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of person name data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="NameType" type="search_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of name of the individual, such as former, nickname, alternate or alias name. Refer to OpenTravel Code List Name Type (NAM).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingSolutionType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TotalQuote" type="search_ctr:TotalQuoteType" minOccurs="0"/>
      <xs:element name="DetailQuote" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Quote</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="search_ctr:DetailQuoteType">
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PaxIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="RedIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Reduction IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="FareIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Fare IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PrdIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Service IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="TicketingOption" type="search_ctr:TicketingOptionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Ticket type and delivery method</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ToBeSoldWith" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Booking Constraints Linkage (It's an OR, not an AND)</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="PslIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of PricingSolution IDs which the element refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="search_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
    <xs:attribute name="Avail" type="xs:int">
      <xs:annotation>
        <xs:documentation>It is the numerical availability.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AvailLevel" type="search_ctr:AlphaNumericStringLength1to3">
      <xs:annotation>
        <xs:documentation>This indicator inform the client on the level of availability.  It refers to the code list AVL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Fare" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Applied Fares</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="search_ctr:FareType">
              <xs:attribute name="ID" type="xs:ID" use="optional">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PricingSolution" minOccurs="0" maxOccurs="1999">
        <xs:annotation>
          <xs:documentation>Collection of prices and products</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="search_ctr:PricingSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SslIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of ScheduleSolution IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ReductionType">
    <xs:annotation>
      <xs:documentation>Describes a Reduction request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailcardCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a railcard reduction</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CorporateCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a corporate reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CampaignCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a campaign reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="PassengerCategoryCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a passenger category not related with age. It refers to the code list PGC.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="VendorCompanyCode" type="search_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ReductionTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Reduction</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailCardDetails" type="search_ctr:RailCardDetails"/>
        <xs:element name="CorporateTypeDetails" type="search_ctr:CorporateTypeDetails"/>
        <xs:element name="CampaignTypeDetails" type="search_ctr:CampaignTypeDetails"/>
        <xs:element name="PassengerCategoryDetails" type="search_ctr:PassengerCategoryDetails"/>
      </xs:choice>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Condition of the reduction</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Code">
                <xs:simpleType>
                  <xs:restriction base="xs:string"/>
                </xs:simpleType>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="VendorCompanyCode" type="search_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RequestedAccommodationType">
    <xs:annotation>
      <xs:documentation>Criteria for accommodation request</xs:documentation>
    </xs:annotation>
    <xs:choice>
      <xs:element name="SeatDetails" minOccurs="0">
        <xs:complexType>
          <xs:attributeGroup ref="search_ctr:SeatAttributesGroup"/>
        </xs:complexType>
      </xs:element>
      <xs:element name="BerthDetails" minOccurs="0">
        <xs:complexType>
          <xs:attributeGroup ref="search_ctr:BerthAttributesGroup"/>
        </xs:complexType>
      </xs:element>
      <xs:sequence>
        <xs:element name="Option" minOccurs="0" maxOccurs="9">
          <xs:complexType>
            <xs:attribute name="Code" type="search_ctr:StringLength1to16" use="required"/>
            <xs:attribute name="Value" type="search_ctr:StringLength1to16" use="required"/>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
    </xs:choice>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Seat, Berth, etc. See RDP code type list ACT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="search_ctr:PlaceAttributesGroup"/>
    <xs:attribute name="NearTo" type="xs:boolean" use="optional" default="false">
      <xs:annotation>
        <xs:documentation>If true the system may return a place near the given one if this place is not available. If false the system try to get only the specified place.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="search_ctr:SegmentShortType">
        <xs:sequence>
          <xs:element name="CO2Emissions" minOccurs="0">
            <xs:annotation>
              <xs:documentation xml:lang="en">Value and units of the CO2 emissions in the segment</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="xs:decimal">
                  <xs:attribute name="Unit" type="xs:NMTOKEN"/>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="ServiceOnBoard" minOccurs="0" maxOccurs="99">
            <xs:annotation>
              <xs:documentation xml:lang="en">Refer to code list SOB.</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="search_ctr:StringLength0to32">
                  <xs:attribute name="Code" type="search_ctr:StringLength1to16" use="optional">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="InformationMessage" type="xs:string" minOccurs="0">
            <xs:annotation>
              <xs:documentation>Information text to display</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="TaxType">
    <xs:annotation>
      <xs:documentation>Describes a Tax</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="search_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
    <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of Tax. It refers to FTT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TicketingOptionType">
    <xs:annotation>
      <xs:documentation>Describes a Ticketing Option</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="search_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Type of ticket. Refer to code list TTY.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DeliveryMode" type="search_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Code of the method of delivery. Refer to code list DMD</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TotalQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="search_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="search_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="search_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UnnamedPassengerType">
    <xs:annotation>
      <xs:documentation>Describes a Passenger</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Reduction" type="search_ctr:ReductionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Indicate a reduction (railcard, corporate code, etc.) applicable to the passenger</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="WarningType">
    <xs:annotation>
      <xs:documentation>Describes a Warning</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="search_ctr:StringLength0to255">
        <xs:attribute name="Code" type="search_ctr:NumericStringLength1to8" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://demo-amr.contentrail.com/railconnect/search/xsd/RailConnect_ScheduleQuoteRS.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="ScheduleRS" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:search_ctr="search_ctr" xmlns:ScheduleRS="ScheduleRS">
  <xs:import namespace="search_ctr" schemaLocation="Type/RailConnect_ScheduleQuote_CTR_Types.xsd"/>
  <xs:element name="RailConnect_ScheduleQuoteRS">
    <xs:complexType>
      <xs:choice>
        <xs:element name="Success">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="search_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Schedule" minOccurs="0" maxOccurs="2">
                <xs:annotation>
                  <xs:documentation>Point to point information for a portion of the journey</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:annotation>
                    <xs:documentation xml:lang="en">Provides the list of Itineraries that corresponds to a certain route</xs:documentation>
                    <xs:documentation xml:lang="en">Provides the list of Itineraries that corresponds to a certain route</xs:documentation>
                  </xs:annotation>
                  <xs:complexContent>
                    <xs:extension base="search_ctr:ScheduleReplyType">
                      <xs:attribute name="ID" type="xs:ID">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                      <xs:attribute name="ExtID" type="xs:NMTOKEN">
                        <xs:annotation>
                          <xs:documentation>Used to specify an external identification</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Passenger" minOccurs="0" maxOccurs="99">
                <xs:annotation>
                  <xs:documentation>A traveller</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:attribute name="ID" type="xs:ID">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                  <xs:attribute name="ExtID" type="xs:NMTOKEN">
                    <xs:annotation>
                      <xs:documentation>Used to specify an external identification</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:complexType>
              </xs:element>
              <xs:element name="Reduction" minOccurs="0" maxOccurs="99">
                <xs:annotation>
                  <xs:documentation>Reduction applied</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="search_ctr:ReductionType">
                      <xs:attribute name="ID" type="xs:ID">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                      <xs:attribute name="PaxIDs" type="xs:IDREFS">
                        <xs:annotation>
                          <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Product" minOccurs="0" maxOccurs="99">
                <xs:annotation>
                  <xs:documentation>It is one of the products in the catalog of the Railway</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="search_ctr:ProductType">
                      <xs:attribute name="ID" type="xs:ID">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Pricing" type="search_ctr:PricingType" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>All quoting and pricing related items and solutions</xs:documentation>
                </xs:annotation>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Failure">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="search_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Error" type="search_ctr:ErrorType" minOccurs="0" maxOccurs="99"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
      <xs:attributeGroup ref="search_ctr:PayloadStdAttributes"/>
      <xs:attribute name="Distributor" type="xs:string" use="optional">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://acr.localhost/railconnect/search</con:endpoint><con:endpoint>https://demo-amr.contentrail.com/railconnect/search</con:endpoint></con:endpoints><con:operation id="0b842bb0-ce53-4471-a2ac-b0e0fc41588f" isOneWay="false" action="https://demo-amr.contentrail.com/railconnect/search" name="searchAction" bindingOperationName="searchAction" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="09d04a7e-c68a-4bae-b2c2-80726eaeef54" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://acr.localhost/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">\r
   <soap:Header/>\r
   <soap:Body>\r
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">\r
         <!--1 to 2 repetitions:-->\r
         <Schedule ExtID="?">\r
            <Departure xsi:type="sear:LocationType" xmlns:sear="search_ctr">\r
               <!--Optional:-->\r
               <LocationCode Context="?">?</LocationCode>\r
            </Departure>\r
            <Arrival xsi:type="sear:LocationType" xmlns:sear="search_ctr">\r
               <!--Optional:-->\r
               <LocationCode Context="?">?</LocationCode>\r
            </Arrival>\r
            <DateTime>\r
               <!--You have a CHOICE of the next 2 items at this level-->\r
               <Departure xsi:type="sear:DateOrDateTimeType" xmlns:sear="search_ctr">?</Departure>\r
               <Arrival xsi:type="sear:DateOrDateTimeType" xmlns:sear="search_ctr">?</Arrival>\r
            </DateTime>\r
            <!--0 to 99 repetitions:-->\r
            <SearchCriteria Code="?" Value="?" PreferLevel="?"/>\r
         </Schedule>\r
         <!--1 to 99 repetitions:-->\r
         <Passenger BirthDate="?" ExtID="?">\r
            <!--0 to 99 repetitions:-->\r
            <Reduction xsi:type="sear:ReductionType" Description="?" xmlns:sear="search_ctr">\r
               <!--You have a CHOICE of the next 4 items at this level-->\r
               <RailcardCode xsi:type="xsd:string">?</RailcardCode>\r
               <CorporateCode xsi:type="xsd:string">?</CorporateCode>\r
               <CampaignCode xsi:type="xsd:string">?</CampaignCode>\r
               <PassengerCategoryCode xsi:type="xsd:string">?</PassengerCategoryCode>\r
               <!--Optional:-->\r
               <VendorCompanyCode xsi:type="sear:StringLength1to16">?</VendorCompanyCode>\r
            </Reduction>\r
         </Passenger>\r
      </sch:RailConnect_ScheduleQuoteRQ>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="railconnect_ws/RailConnectWSPortSearch/searchActionRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="0c3234fa-f06b-4729-b507-3c4c567a9676" wsaVersion="NONE" name="RailConnectWSBook" type="wsdl" bindingName="{railconnect_ws}RailConnectWSBook" soapVersion="1_2" anonymous="optional" definition="https://dev.amr.local/railconnect/book/wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="https://dev.amr.local/railconnect/book/wsdl"><con:part><con:url>https://dev.amr.local/railconnect/book/wsdl</con:url><con:content><![CDATA[<definitions name="RailConnectWS" targetNamespace="railconnect_ws" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="railconnect_ws" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:ScheduleRQ="ScheduleRQ" xmlns:ScheduleRS="ScheduleRS" xmlns:SellSegmentRQ="SellSegmentRQ" xmlns:SellSegmentRS="SellSegmentRS" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="SellSegmentRQ" schemaLocation="xsd/RailConnect_SellSegmentRQ.xsd"/>
      <import namespace="SellSegmentRS" schemaLocation="xsd/RailConnect_SellSegmentRS.xsd"/>
      <import namespace="sell_segment_ctr" schemaLocation="xsd/Type/RailConnect_SellSegment_CTR_Types.xsd"/>
    </schema>
  </types>
  <message name="bookActionIn">
    <part name="request" element="SellSegmentRQ:RailConnect_SellSegmentRQ"/>
  </message>
  <message name="bookActionOut">
    <part name="return" element="SellSegmentRS:RailConnect_SellSegmentRS"/>
  </message>
  <portType name="RailConnectWSPortBook">
    <operation name="bookAction">
      <input message="tns:bookActionIn"/>
      <output message="tns:bookActionOut"/>
    </operation>
  </portType>
  <binding name="RailConnectWSBook" type="tns:RailConnectWSPortBook">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="bookAction">
      <soap12:operation soapAction="https://dev.amr.local/railconnect/book" soapActionRequired="true" style="document"/>
      <input>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </input>
      <output>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </output>
    </operation>
  </binding>
  <service name="RailConnectWSServiceBook">
    <port name="PortBook" binding="tns:RailConnectWSBook">
      <soap12:address location="https://dev.amr.local/railconnect/book"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/book/xsd/RailConnect_SellSegmentRQ.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="SellSegmentRQ" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="AMA2015C" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:sell_segment_ctr="sell_segment_ctr" xmlns:SellSegmentRQ="SellSegmentRQ">
  <xs:import namespace="sell_segment_ctr" schemaLocation="Type/RailConnect_SellSegment_CTR_Types.xsd"/>
  <xs:element name="RailConnect_SellSegmentRQ">
    <xs:annotation>
      <xs:documentation>Sell Rail with or without shopping context.</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Passenger" maxOccurs="99">
          <xs:annotation>
            <xs:documentation>Passenger</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Actor" maxOccurs="9">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="Name">
                      <xs:complexType>
                        <xs:attribute name="FirstName" type="xs:string" use="required"/>
                        <xs:attribute name="LastName" type="xs:string" use="required"/>
                        <xs:attribute name="Title" type="xs:string"/>
                        <xs:attribute name="DateOfBirth" type="xs:date"/>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute name="ID" type="xs:ID" use="required"/>
                </xs:complexType>
              </xs:element>
              <xs:element name="Contact" minOccurs="0" maxOccurs="9">
                <xs:complexType>
                  <xs:choice>
                    <xs:element name="Email">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string"/>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Telephone">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string"/>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="CustomerLoyalty">
                      <xs:complexType>
                        <xs:complexContent>
                          <xs:extension base="sell_segment_ctr:CustomerLoyaltyType">
                            <xs:sequence>
                              <xs:element name="VendorCompany" type="sell_segment_ctr:CompanyNameType"/>
                            </xs:sequence>
                          </xs:extension>
                        </xs:complexContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:choice>
                  <xs:attribute name="ID" type="xs:ID">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID
                        attribute may be used to reference a primary-key value within a database or in a particular
                        implementation.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                  <xs:attribute name="PaxIDs" type="xs:IDREFS">
                    <xs:annotation>
                      <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Reservation">
          <xs:annotation>
            <xs:documentation>Reservation item</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Product" maxOccurs="99">
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="sell_segment_ctr:ProductTypeRQ">
                      <xs:attribute name="ID" type="xs:ID">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system.
                            The ID attribute may be used to reference a primary-key value within a database or in a
                            particular implementation.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Schedule" minOccurs="0" maxOccurs="99">
                <xs:annotation>
                  <xs:documentation>Schedule</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="Departure" type="sell_segment_ctr:DateTimeLocationType">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
                      </xs:annotation>
                    </xs:element>
                    <xs:element name="Arrival" type="sell_segment_ctr:DateTimeLocationType">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
                      </xs:annotation>
                    </xs:element>
                    <xs:sequence>
                      <xs:element name="Segment" maxOccurs="99">
                        <xs:complexType>
                          <xs:complexContent>
                            <xs:extension base="sell_segment_ctr:SegmentTypeRQ">
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating
                                    system. The ID attribute may be used to reference a primary-key value within a
                                    database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Inventory" type="sell_segment_ctr:StringLength1to8" use="required"/>
                            </xs:extension>
                          </xs:complexContent>
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:sequence>
                  <xs:attribute name="ID" type="xs:ID">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID
                        attribute may be used to reference a primary-key value within a database or in a particular
                        implementation.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:complexType>
              </xs:element>
              <xs:element name="AccommodationPreferences" minOccurs="0" maxOccurs="99">
                <xs:annotation>
                  <xs:documentation>Accommodation</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="sell_segment_ctr:RequestedAccommodationType">
                      <xs:attribute name="ID" type="xs:ID">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system.
                            The ID attribute may be used to reference a primary-key value within a database or in a
                            particular implementation.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                      <xs:attribute name="SegIDs" type="xs:IDREFS"/>
                      <xs:attribute name="PaxIDs" type="xs:IDREFS"/>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Reduction" minOccurs="0" maxOccurs="99">
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="sell_segment_ctr:ReductionType">
                      <xs:attribute name="ID" type="xs:ID">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system.
                            The ID attribute may be used to reference a primary-key value within a database or in a
                            particular implementation.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                      <xs:attribute name="PaxIDs" type="xs:IDREFS"/>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Pricing" maxOccurs="99">
                <xs:complexType>
                  <xs:choice>
                    <xs:element name="Fare" type="sell_segment_ctr:FareTypeRQ"/>
                    <xs:element name="BookingToken">
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:NMTOKEN"/>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:choice>
                  <xs:attribute name="ID" type="xs:ID">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID
                        attribute may be used to reference a primary-key value within a database or in a particular
                        implementation.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                  <xs:attribute name="PrdIDs" type="xs:IDREFS" use="required"/>
                  <xs:attribute name="PaxIDs" type="xs:IDREFS" use="required"/>
                  <xs:attribute name="SegIDs" type="xs:IDREFS" use="required"/>
                  <xs:attribute name="AccIDs" type="xs:IDREFS"/>
                  <xs:attribute name="RedIDs" type="xs:IDREFS"/>
                </xs:complexType>
              </xs:element>
              <xs:element name="MethodOfPayment" minOccurs="0">
                <xs:complexType>
                  <xs:choice>
                    <xs:element name="Card">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="AddressVerificationSystemValue" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Credit Card holder's address</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Line" type="sell_segment_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
                                  <xs:annotation>
                                    <xs:documentation>Street and number on first line. Building, Floor etc... on
                                      following lines</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="CityName" type="sell_segment_ctr:StringLength1to64"/>
                              <xs:attribute name="PostalCode" type="sell_segment_ctr:StringLength1to16">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Post Office Code number.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Country" type="sell_segment_ctr:StringLength1to32">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">ISO 3166 code for the country</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="MagneticTrack" minOccurs="0" maxOccurs="4">
                            <xs:annotation>
                              <xs:documentation>Contains Data of the Magnetic Stripe of the Credit Card</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="sell_segment_ctr:StringLength0to255">
                                  <xs:attribute name="Type"/>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Issuance" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Information about the issuing bank and country</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Bank">
                                  <xs:complexType>
                                    <xs:attribute name="Name" type="sell_segment_ctr:StringLength1to128">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Full name of the issuing bank</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="ID" type="sell_segment_ctr:StringLength1to64">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Code of bank issuing the card.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="Country" type="sell_segment_ctr:StringLength1to32">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Credit Card country of issuance</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="PrimaryAccountNumber" type="sell_segment_ctr:StringLength1to32" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Credit card number embossed on the front of the card.</xs:documentation>
                            </xs:annotation>
                          </xs:element>
                          <xs:element name="CVV" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Verification digits printed on the back of the card usually
                                (CardVerificationValue).</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="sell_segment_ctr:StringLength1to8">
                                  <xs:attribute name="KnoxID" type="sell_segment_ctr:StringLength1to32">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">KnoxID of the CVV</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="ApprovalCode" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>A series of characters assigned by the applicable credit card company's
                                authorization system to confirm the approval of a credit sale transaction.</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="sell_segment_ctr:StringLength1to16">
                                  <xs:attribute name="Source" type="sell_segment_ctr:StringLength3">
                                    <xs:annotation>
                                      <xs:documentation>Can be A if it comes from Amadeus Payment Server, or N if
                                        entered manually by an Agent</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Vendor" minOccurs="0">
                            <xs:complexType>
                              <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to8">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">The 2 character code of the credit card issuer.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="SubType" type="sell_segment_ctr:StringLength1to8">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">To identify a subtype of credit cards</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Validity" minOccurs="0">
                            <xs:complexType>
                              <xs:attribute name="StartDate" type="sell_segment_ctr:MMYYDate">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="EndDate" type="sell_segment_ctr:MMYYDate">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="HolderName" type="sell_segment_ctr:StringLength1to128">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Name of credit card holder.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="FraudStatus" type="sell_segment_ctr:StringLength1to8">
                          <xs:annotation>
                            <xs:documentation>Can be OK, KO or RW (pending).</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Invoice">
                      <xs:complexType>
                        <xs:attribute name="Reference" type="sell_segment_ctr:StringLength1to64"/>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Cash"/>
                  </xs:choice>
                  <xs:attribute name="ID" type="xs:ID">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID
                        attribute may be used to reference a primary-key value within a database or in a particular
                        implementation.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:complexType>
              </xs:element>
              <xs:element name="TicketingOption" minOccurs="0" maxOccurs="1">
                <xs:annotation>
                  <xs:documentation>TicketingOption</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="sell_segment_ctr:TicketingOptionType">
                      <xs:sequence>
                        <xs:element name="ContactList" minOccurs="0" maxOccurs="9">
                          <xs:complexType>
                            <xs:attribute name="CtnIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Contact IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                              <xs:annotation>
                                <xs:documentation>Personal, Common, FormOfIdentification etc.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                      </xs:sequence>
                      <xs:attribute name="ID" type="xs:ID">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system.
                            The ID attribute may be used to reference a primary-key value within a database or in a
                            particular implementation.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
            <xs:attribute name="ID" type="xs:ID">
              <xs:annotation>
                <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID
                  attribute may be used to reference a primary-key value within a database or in a particular
                  implementation.</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is
            identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="ReservationOptions" type="sell_segment_ctr:StringLength0to128">
        <xs:annotation>
          <xs:documentation>SplitPerPax, etc.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attributeGroup ref="sell_segment_ctr:PayloadStdAttributes"/>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/book/xsd/Type/RailConnect_SellSegment_CTR_Types.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2013 rel. 2 sp2 (x64) (http://www.altova.com) by ﻿AMADEUS s.a.s. (AMADEUS s.a.s.)-->
<xs:schema targetNamespace="sell_segment_ctr" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:sell_segment_ctr="sell_segment_ctr">
  <xs:simpleType name="AlphaLength3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alphabetic Strings, length exactly 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaLength3orString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an IntegerLength1to13 or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="sell_segment_ctr:AlphaLength3 sell_segment_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 3.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to14">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used forAlpha-Numeric Strings, length 1 to 14.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,14}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodePatternType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes. It may contain merely codes or integer codes associated to a value in AMA_CodeTable.xls.
Pattern is composed on 3 parts: Standard (AMA or OTA or IATA), ListCode (3 upper case letters) and Code (1 to 3 digits). Code is mandatory. ListName is mandatory if Standard is precised, else it is optional. Standard is optional.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}((\.[0-9A-Z]{3,4})((\.(AMA|OTA|IATA|UIC)){0,1})){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes in the OpenTravel Code tables. Possible values of this pattern are 1, 101, 101.EQP, or 101.EQP.X.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}(\.[A-Z]{3}(\.X){0,1}){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DateOrDateTimeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">A construct to validate either a date or a dateTime value.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:date xs:dateTime"/>
  </xs:simpleType>
  <xs:simpleType name="integerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an integer or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:integer sell_segment_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="ISO3166">
    <xs:annotation>
      <xs:documentation xml:lang="en">Specifies a 2 character country code as defined in ISO3166.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{2}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="MMYYDate">
    <xs:annotation>
      <xs:documentation xml:lang="en">Month and year information.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="(0[1-9]|1[0-2])[0-9][0-9]"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="nonNegativeIntegerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either a nonNegativeInteger or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:nonNegativeInteger sell_segment_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="Numeric0to4">
    <xs:annotation>
      <xs:documentation>Used for numeric values, from 0 to 4 inclusive.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="4"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="NumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StateProvCodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">The standard code or abbreviation for the state, province, or region</xs:documentation>
    </xs:annotation>
    <xs:restriction base="sell_segment_ctr:StringLength1to8">
      <xs:minLength value="2"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="String0">
    <xs:annotation>
      <xs:documentation>Used for String length 0</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="0"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to128">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 128.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to255">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 255.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="255"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to16">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 16.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="16"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to64">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 64.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="64"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to128">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength3">
    <xs:annotation>
      <xs:documentation>Used for String length 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="3"/>
      <xs:maxLength value="3"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:attributeGroup name="AmountCurrencyAndDecimalPlaceGroup">
    <xs:attribute name="CurrencyCode" type="sell_segment_ctr:AlphaLength3orString0">
      <xs:annotation>
        <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DecimalPlaces" type="sell_segment_ctr:nonNegativeIntegerOrString0">
      <xs:annotation>
        <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Amount" type="sell_segment_ctr:integerOrString0">
      <xs:annotation>
        <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="BerthAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Berth Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list BLT (Level), BST (Size), BPT (Position), BCF (Configuration), ETP (Equipement)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="sell_segment_ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:attributeGroup name="BirthDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to provide a date of birth.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as indicated in the document, in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="EffectiveExpireOptionalDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to send the effective date and/or expiration date.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="EffectiveDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDateExclusiveIndicator" type="xs:boolean" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">When true, indicates that the ExpireDate is the first day after the applicable period (e.g. when expire date is Oct 15  the last date of the period is Oct 14).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="GenderGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to indicate the gender of a person, if known.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Gender" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifies the gender.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Male"/>
          <xs:enumeration value="Female"/>
          <xs:enumeration value="Unknown"/>
          <xs:enumeration value="Male_NoShare"/>
          <xs:enumeration value="Female_NoShare"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PayloadStdAttributes">
    <xs:annotation>
      <xs:documentation xml:lang="en">The PayloadAttributesShoRQ defines the attributes that appear on the root element for all Shopping Request messages.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="TimeStamp" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the creation date and time of the message in UTC using the following format specified by ISO 8601; YYYY-MM-DDThh:mm:ssZ with time values using the 24 hour clock (e.g. 20 November 2003, 1:59:38 pm UTC becomes 2003-11-20T13:59:38Z).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Version" type="xs:decimal" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">For all OpenTravel versioned messages, the version of the message is indicated by a decimal value.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="CorrelationID" type="sell_segment_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allow end-to-end correlation of log messages with the corresponding Web service message throughout the processing of the Web service message.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PlaceAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Place attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="CoachNumber" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="PlaceNumber" use="optional">
      <xs:annotation>
        <xs:documentation>Physical place number.(Left padding with 0 or [space] if needed)</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PrivacyGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Allows for control of the sharing of data between parties.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="ShareSynchInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for synchronization of information held by other travel service providers.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for synchronization of information held by other travel service providers.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ShareMarketInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for marketing purposes.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for marketing purposes.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="SeatAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Seat Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list SDR (Direction), SPS (Position),SCT (Configuration), PPF (PassengerProfile), ETP (Equipment)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="sell_segment_ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:complexType name="RailCardDetails">
    <xs:annotation>
      <xs:documentation>Describes a Railcard reduction</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="sell_segment_ctr:StringLength0to128">
        <xs:attribute name="Code">
          <xs:annotation>
            <xs:documentation xml:lang="en">A code identifying the type of card. Refer to code list RCC.</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="6"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="Number">
          <xs:annotation>
            <xs:documentation xml:lang="en">Railcard number</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="45"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="RailcardId" type="xs:string">
          <xs:annotation>
            <xs:documentation>An ID authorizing the use of the card.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="RailCardNumberRequired" type="xs:boolean"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CampaignTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Campaign reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The campaign code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CorporateTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Corporate reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Type">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Contract">
      <xs:annotation>
        <xs:documentation xml:lang="en">The contract number associated to the corporate code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PassengerCategoryDetails">
    <xs:annotation>
      <xs:documentation>Describes a Passenger category reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Context">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CompanyNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Identifies a company by name.</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="sell_segment_ctr:StringLength0to128">
        <xs:annotation>
          <xs:documentation xml:lang="en">Provides detailed information on a company.</xs:documentation>
        </xs:annotation>
        <xs:attribute name="Division" type="sell_segment_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The division name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="Department" type="sell_segment_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The department name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CustomerLoyaltyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Program rewarding frequent use by accumulating credits for services provided by vendors. This type is based on OTA_CommonTypes-CustLoyaltyType</xs:documentation>
    </xs:annotation>
    <xs:attribute name="MembershipID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique identifier of the member in the program (membership number, account number, etc.).</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="sell_segment_ctr:StringLength1to32">
          <xs:minLength value="1"/>
          <xs:maxLength value="32"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ProgramID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="sell_segment_ctr:AlphaNumericStringLength1to3">
          <xs:minLength value="1"/>
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ExpirationDate" type="sell_segment_ctr:DateOrDateTimeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DateTimeLocationType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes DateTime and Location</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="sell_segment_ctr:StringLength1to16">
              <xs:attribute name="Context" type="sell_segment_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="LocationName" type="sell_segment_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Name of the location</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DateTime" type="sell_segment_ctr:DateOrDateTimeType">
      <xs:annotation>
        <xs:documentation>Date and optional time</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DetailQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="sell_segment_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="sell_segment_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="sell_segment_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="BookingToken" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DocumentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Provides information on a specific document.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice minOccurs="0">
        <xs:element name="DocHolderName" type="sell_segment_ctr:StringLength1to64" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of the document holder in unformatted text (Mr. Sam Jones).</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="DocHolderFormattedName" type="sell_segment_ctr:PersonNameType" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of document holder in formatted text.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="DocLimitations" type="sell_segment_ctr:StringLength1to64" minOccurs="0" maxOccurs="9">
        <xs:annotation>
          <xs:documentation xml:lang="en">Used to indicate any limitations on the document (e.g. as a person may only be allowed to spend a max of 30 days in country on a visitor's visa).</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="AdditionalPersonNames" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">A container for additional person names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="AdditionalPersonName" type="sell_segment_ctr:StringLength1to64" maxOccurs="99">
              <xs:annotation>
                <xs:documentation xml:lang="en">The name of an additional person listed on this document.</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="sell_segment_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of document data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueAuthority" type="sell_segment_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the group or association that granted the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueLocation" type="sell_segment_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the location where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocID" type="sell_segment_ctr:StringLength1to32" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocType" type="sell_segment_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="sell_segment_ctr:GenderGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The gender of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="sell_segment_ctr:BirthDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The birth date of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="sell_segment_ctr:EffectiveExpireOptionalDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The effective and expiry date of the document.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueStateProv" type="sell_segment_ctr:StateProvCodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">State or Province where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueCountry" type="sell_segment_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Country where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthCountry" type="sell_segment_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth country of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthPlace" type="sell_segment_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth place of the document holder (e.g., city, state, county, province), when designating a country of birth, use BirthCountry.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocHolderNationality" type="sell_segment_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The country code of the nationality of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ContactName" type="sell_segment_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides contact name associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="HolderType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides the type of document holder.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Infant">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is an infant.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="HeadOfHousehold">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is a head of household.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Remark" type="sell_segment_ctr:StringLength1to128" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">A remark associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PostalCode" type="sell_segment_ctr:StringLength1to16" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Defines the postal code (e.g., ZIP code) on the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ErrorType">
    <xs:annotation>
      <xs:documentation>Describes an Error</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="sell_segment_ctr:StringLength0to255">
        <xs:attribute name="Code" type="sell_segment_ctr:NumericStringLength1to8" use="required"/>
        <xs:attribute name="Type" default="System">
          <xs:simpleType>
            <xs:restriction base="xs:NMTOKEN">
              <xs:enumeration value="System"/>
              <xs:enumeration value="Functional"/>
              <xs:enumeration value="Provider"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="FareType">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="sell_segment_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule with all details</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PassengerLimits" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Defines the minimum and maximum number of passengers for which this quoting rule is eligible.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="MinPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The minimum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="MaxPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The maximum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="sell_segment_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeRQ">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule request</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="LocationType">
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="sell_segment_ctr:StringLength1to16">
              <xs:attribute name="Context" type="sell_segment_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PriceType">
    <xs:annotation>
      <xs:documentation>Describes a Price</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="sell_segment_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
  </xs:complexType>
  <xs:complexType name="ScheduleQueryType">
    <xs:annotation>
      <xs:documentation>Describes a Schedule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="sell_segment_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="sell_segment_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="DateTime">
        <xs:annotation>
          <xs:documentation>Date and optional time. It can be the departure time or the arrival time</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:choice>
            <xs:element name="Departure" type="sell_segment_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the departure time</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Arrival" type="sell_segment_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the arrival time</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:complexType>
      </xs:element>
      <xs:element name="SearchCriteria" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Used to restrict the schedule solutions based on specific criteria</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>It describes any search criteria according to the code list</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="sell_segment_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">It is the value of the search criteria specified in the code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleReplyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Segment" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>Portion of an schedule solution, including all legs which are listed under the same train number or identifier.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="sell_segment_ctr:SegmentType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="ScheduleSolution" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>An schedule solution</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="sell_segment_ctr:ScheduleSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="sell_segment_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleSolutionType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="sell_segment_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode and departure dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="sell_segment_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode and arrival dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration from the departure location to destination.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SearchCriteriaType">
    <xs:annotation>
      <xs:documentation>Describes Search Criteria</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TravelClass" maxOccurs="9">
        <xs:annotation>
          <xs:documentation>Describes any preferences in terms of travel class. Refer to code list TCC.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SegmentShortType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="sell_segment_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="sell_segment_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="sell_segment_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="sell_segment_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Vehicle" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Contains vehicle characteristics</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle Code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DisplayName" type="sell_segment_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle name.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration of the train from departure location to destination location.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentTypeRQ">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment information for booking query</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="sell_segment_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="sell_segment_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="sell_segment_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="sell_segment_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductType">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item. It refers to the code list PTY</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type. It refers to the code list TCC</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="sell_segment_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description" type="xs:string">
      <xs:annotation>
        <xs:documentation>It is the description of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductTypeRQ">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item (Transport, Transport with seat, Ancillary). It refers to the code list SET.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PersonNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">This provides name information for a person.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="NamePrefix" type="sell_segment_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Salutation of honorific (e.g. Mr., Mrs., Ms., Miss, Dr.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="GivenName" type="sell_segment_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Given name, first name or names.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MiddleName" type="sell_segment_ctr:StringLength1to64" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">The middle name of the person name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="SurnamePrefix" type="sell_segment_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The surname prefix, e.g "van der", "von", "de".</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Surname" type="sell_segment_ctr:StringLength1to64">
        <xs:annotation>
          <xs:documentation xml:lang="en">Family name, last name. May also be used for full name if the sending system does not have the ability to separate a full name into its parts, e.g. the surname element may be used to pass the full name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameSuffix" type="sell_segment_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Hold various name suffixes and letters (e.g. Jr., Sr., III, Ret., Esq.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameTitle" type="sell_segment_ctr:StringLength1to16" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Degree or honors (e.g., Ph.D., M.D.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Document" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Document  information for verification purposes and also used for additional filtering for common names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="DocID" type="sell_segment_ctr:StringLength1to32" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DocType" type="sell_segment_ctr:CodeType" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="sell_segment_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of person name data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="NameType" type="sell_segment_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of name of the individual, such as former, nickname, alternate or alias name. Refer to OpenTravel Code List Name Type (NAM).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingSolutionType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TotalQuote" type="sell_segment_ctr:TotalQuoteType" minOccurs="0"/>
      <xs:element name="DetailQuote" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Quote</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Price" type="sell_segment_ctr:PriceType" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation xml:lang="en">Represent price information</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Tax" type="sell_segment_ctr:TaxType" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation xml:lang="en">Represent price information</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Fee" minOccurs="0">
              <xs:complexType>
                <xs:attribute name="CurrencyCode" type="sell_segment_ctr:AlphaLength3" use="required">
                  <xs:annotation>
                    <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three
											alpha code.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
                <xs:attribute name="DecimalPlaces" type="sell_segment_ctr:Numeric0to4" use="required">
                  <xs:annotation>
                    <xs:documentation>Indicates the number of decimal places for a particular
											currency. This is equivalent to the ISO 4217 standard "minor unit".
											Typically used when the amount provided includes the minor unit of
											currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2"
											to represent $85)</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
                <xs:attribute name="Amount" type="xs:integer" use="required">
                  <xs:annotation>
                    <xs:documentation>Defines the amount without decimal separator (i.e.
											Amount=8500 and
											DecimalPlace=2 represent 85.00)</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
                <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                  <xs:annotation>
                    <xs:documentation xml:lang="en">Type of Fee</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
          <xs:attribute name="ID" type="xs:ID">
            <xs:annotation>
              <xs:documentation xml:lang="en">A unique identifying value assigned by the
								creating system. The ID attribute may be used to reference a primary-key value
								within a database or in a particular implementation.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PrdIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of Product IDs which the element refers
								to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="SegIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of Segment IDs which the element refers
								to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PaxIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of Passenger IDs which the element
								refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="AccIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of Accomodation IDs which the element
								refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="RedIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of Reduction IDs which the element
								refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="FareIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of Fare IDs which the element refers
								to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="TicketingOption" type="sell_segment_ctr:TicketingOptionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Ticket type and delivery method</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ToBeSoldWith" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Booking Constraints Linkage (It's an OR, not an AND)</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="PslIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of PricingSolution IDs which the element refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="sell_segment_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
    <xs:attribute name="Avail" type="xs:int">
      <xs:annotation>
        <xs:documentation>It is the numerical availability.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AvailLevel" type="sell_segment_ctr:AlphaNumericStringLength1to3">
      <xs:annotation>
        <xs:documentation>This indicator inform the client on the level of availability.  It refers to the code list AVL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Fare" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Applied Fares</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="sell_segment_ctr:FareType">
              <xs:attribute name="ID" type="xs:ID" use="optional">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PricingSolution" minOccurs="0" maxOccurs="1999">
        <xs:annotation>
          <xs:documentation>Collection of prices and products</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="sell_segment_ctr:PricingSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SslIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of ScheduleSolution IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ReductionType">
    <xs:annotation>
      <xs:documentation>Describes a Reduction request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailcardCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a railcard reduction</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CorporateCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a corporate reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CampaignCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a campaign reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="PassengerCategoryCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a passenger category not related with age. It refers to the code list PGC.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="VendorCompanyCode" type="sell_segment_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ReductionTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Reduction</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailCardDetails" type="sell_segment_ctr:RailCardDetails"/>
        <xs:element name="CorporateTypeDetails" type="sell_segment_ctr:CorporateTypeDetails"/>
        <xs:element name="CampaignTypeDetails" type="sell_segment_ctr:CampaignTypeDetails"/>
        <xs:element name="PassengerCategoryDetails" type="sell_segment_ctr:PassengerCategoryDetails"/>
      </xs:choice>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Condition of the reduction</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Code">
                <xs:simpleType>
                  <xs:restriction base="xs:string"/>
                </xs:simpleType>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="VendorCompanyCode" type="sell_segment_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RequestedAccommodationType">
    <xs:annotation>
      <xs:documentation>Criteria for accommodation request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Option" minOccurs="0" maxOccurs="99">
        <xs:complexType>
          <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to16" use="required">
            <xs:annotation>
              <xs:documentation>See RDP code type list DKL (Deck level), GDT (Gender), PET (Pets allowed), SMK (Smoking), BIK (Bike space), ERT (Environment)</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="sell_segment_ctr:StringLength1to16" use="required"/>
        </xs:complexType>
      </xs:element>
      <xs:choice>
        <xs:element name="SeatOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="sell_segment_ctr:SeatAttributesGroup"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="BerthOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="sell_segment_ctr:BerthAttributesGroup"/>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Seat, Berth, etc. See RDP code type list ACT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="sell_segment_ctr:PlaceAttributesGroup"/>
    <xs:attribute name="NearTo" type="xs:boolean" use="optional" default="false">
      <xs:annotation>
        <xs:documentation>If true the system may return a place near the given one if this place is not available. If false the system try to get only the specified place.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="sell_segment_ctr:SegmentShortType">
        <xs:sequence>
          <xs:element name="CO2Emissions" minOccurs="0">
            <xs:annotation>
              <xs:documentation xml:lang="en">Value and units of the CO2 emissions in the segment</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="xs:decimal">
                  <xs:attribute name="Unit" type="xs:NMTOKEN"/>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="ServiceOnBoard" minOccurs="0" maxOccurs="99">
            <xs:annotation>
              <xs:documentation xml:lang="en">Refer to code list SOB.</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="sell_segment_ctr:StringLength0to32">
                  <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to16" use="optional">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="InformationMessage" type="xs:string" minOccurs="0">
            <xs:annotation>
              <xs:documentation>Information text to display</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="TaxType">
    <xs:annotation>
      <xs:documentation>Describes a Tax</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="sell_segment_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
    <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of Tax. It refers to FTT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TicketingOptionType">
    <xs:annotation>
      <xs:documentation>Describes a Ticketing Option</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="sell_segment_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Type of ticket. Refer to code list TTY.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DeliveryMode" type="sell_segment_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Code of the method of delivery. Refer to code list DMD</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TotalQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="sell_segment_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="sell_segment_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="sell_segment_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UnnamedPassengerType">
    <xs:annotation>
      <xs:documentation>Describes a Passenger</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Reduction" type="sell_segment_ctr:ReductionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Indicate a reduction (railcard, corporate code, etc.) applicable to the passenger</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="WarningType">
    <xs:annotation>
      <xs:documentation>Describes a Warning</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="sell_segment_ctr:StringLength0to255">
        <xs:attribute name="Code" type="sell_segment_ctr:NumericStringLength1to8" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/book/xsd/RailConnect_SellSegmentRS.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="SellSegmentRS" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRBOOK" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:sell_segment_ctr="sell_segment_ctr" xmlns:SellSegmentRS="SellSegmentRS">
  <xs:import namespace="sell_segment_ctr" schemaLocation="Type/RailConnect_SellSegment_CTR_Types.xsd"/>
  <xs:element name="RailConnect_SellSegmentRS">
    <xs:annotation>
      <xs:documentation>User response to a sell message</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:choice>
        <xs:element name="Success">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="sell_segment_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Booking" minOccurs="0" maxOccurs="9">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="PnrIdentification">
                      <xs:annotation>
                        <xs:documentation>Provider RecLoc</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:attribute name="PnrReference" type="xs:string" use="optional">
                          <xs:annotation>
                            <xs:documentation>Identifier of the reservation in Provider system</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="CreationDate" type="xs:dateTime">
                          <xs:annotation>
                            <xs:documentation>Creation date of the Provider PNR</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="Inventory" type="xs:string">
                          <xs:annotation>
                            <xs:documentation>Reservation system</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="Relationship" type="xs:NMTOKEN">
                          <xs:annotation>
                            <xs:documentation>Parent Record or Child record</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Passenger" maxOccurs="9">
                      <xs:annotation>
                        <xs:documentation>Passenger</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="Actor" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Name">
                                  <xs:complexType>
                                    <xs:attribute name="FirstName" type="xs:string"/>
                                    <xs:attribute name="LastName" type="xs:string"/>
                                    <xs:attribute name="Title" type="xs:string"/>
                                    <xs:attribute name="DateOfBirth" type="xs:date"/>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating
                                    system. The ID attribute may be used to reference a primary-key value within a
                                    database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Contact" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:choice>
                                <xs:element name="Email" minOccurs="0">
                                  <xs:complexType>
                                    <xs:simpleContent>
                                      <xs:extension base="xs:string"/>
                                    </xs:simpleContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="Telephone" minOccurs="0">
                                  <xs:complexType>
                                    <xs:simpleContent>
                                      <xs:extension base="xs:string"/>
                                    </xs:simpleContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="CustomerLoyalty" minOccurs="0">
                                  <xs:complexType>
                                    <xs:complexContent>
                                      <xs:extension base="sell_segment_ctr:CustomerLoyaltyType">
                                        <xs:sequence>
                                          <xs:element name="VendorCompany" type="sell_segment_ctr:CompanyNameType"/>
                                        </xs:sequence>
                                      </xs:extension>
                                    </xs:complexContent>
                                  </xs:complexType>
                                </xs:element>
                              </xs:choice>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating
                                    system. The ID attribute may be used to reference a primary-key value within a
                                    database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="PaxIDs" type="xs:IDREFS">
                                <xs:annotation>
                                  <xs:documentation>It can contain a list of Passenger IDs which the element refers
                                    to.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Reservation">
                      <xs:annotation>
                        <xs:documentation>Reservation item</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="Product" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Service, Supplement, Ancillary service</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="sell_segment_ctr:ProductType">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                        creating system. The ID attribute may be used to reference a primary-key value
                                        within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Schedule" minOccurs="0" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Schedule</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Departure" type="sell_segment_ctr:DateTimeLocationType">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                                <xs:element name="Arrival" type="sell_segment_ctr:DateTimeLocationType">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                                <xs:sequence>
                                  <xs:element name="Segment" maxOccurs="99">
                                    <xs:complexType>
                                      <xs:complexContent>
                                        <xs:extension base="sell_segment_ctr:SegmentType">
                                          <xs:attribute name="ID" type="xs:ID" use="required">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                                creating system. The ID attribute may be used to reference a primary-key
                                                value within a database or in a particular implementation.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Status" type="sell_segment_ctr:StringLength1to8" use="required"/>
                                        </xs:extension>
                                      </xs:complexContent>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating
                                    system. The ID attribute may be used to reference a primary-key value within a
                                    database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="AccommodationPreferences" minOccurs="0" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Accommodation</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="sell_segment_ctr:RequestedAccommodationType">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                        creating system. The ID attribute may be used to reference a primary-key value
                                        within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="SegID" type="xs:IDREF" use="required"/>
                                  <xs:attribute name="PaxID" type="xs:IDREF" use="required"/>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Reduction" minOccurs="0" maxOccurs="99">
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="sell_segment_ctr:ReductionTypeDetails">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                        creating system. The ID attribute may be used to reference a primary-key value
                                        within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Pricing">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Fare" maxOccurs="99">
                                  <xs:complexType>
                                    <xs:complexContent>
                                      <xs:extension base="sell_segment_ctr:FareType">
                                        <xs:attribute name="ID" type="xs:ID">
                                          <xs:annotation>
                                            <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                              creating system. The ID attribute may be used to reference a primary-key
                                              value within a database or in a particular implementation.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="SegIDs" type="xs:IDREFS" use="optional"/>
                                        <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                                      </xs:extension>
                                    </xs:complexContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="TotalQuote">
                                  <xs:complexType>
                                    <xs:complexContent>
                                      <xs:extension base="sell_segment_ctr:TotalQuoteType">
                                        <xs:attribute name="TicketingExpirationTime" type="xs:dateTime"/>
                                      </xs:extension>
                                    </xs:complexContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="DetailQuote" maxOccurs="99">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="Price">
                                        <xs:complexType>
                                          <xs:attribute name="CurrencyCode" type="sell_segment_ctr:AlphaLength3" use="required">
                                            <xs:annotation>
                                              <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three
                                                alpha code.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="DecimalPlaces" type="sell_segment_ctr:Numeric0to4" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Indicates the number of decimal places for a particular
                                                currency. This is equivalent to the ISO 4217 standard "minor unit".
                                                Typically used when the amount provided includes the minor unit of
                                                currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2"
                                                to represent $85)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Amount" type="xs:integer" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Defines the amount without decimal separator (i.e.
                                                Amount=8500 and
                                                DecimalPlace=2 represent 85.00)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Tax" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="CurrencyCode" type="sell_segment_ctr:AlphaLength3" use="required">
                                            <xs:annotation>
                                              <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three
                                                alpha code.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="DecimalPlaces" type="sell_segment_ctr:Numeric0to4" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Indicates the number of decimal places for a particular
                                                currency. This is equivalent to the ISO 4217 standard "minor unit".
                                                Typically used when the amount provided includes the minor unit of
                                                currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2"
                                                to represent $85)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Amount" type="xs:integer" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Defines the amount without decimal separator (i.e.
                                                Amount=8500 and
                                                DecimalPlace=2 represent 85.00)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Type of Tax</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Fee" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="CurrencyCode" type="sell_segment_ctr:AlphaLength3" use="required">
                                            <xs:annotation>
                                              <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three
                                                alpha code.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="DecimalPlaces" type="sell_segment_ctr:Numeric0to4" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Indicates the number of decimal places for a particular
                                                currency. This is equivalent to the ISO 4217 standard "minor unit".
                                                Typically used when the amount provided includes the minor unit of
                                                currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2"
                                                to represent $85)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Amount" type="xs:integer" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Defines the amount without decimal separator (i.e.
                                                Amount=8500 and
                                                DecimalPlace=2 represent 85.00)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Type of Fee</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="ID" type="xs:ID">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                          creating system. The ID attribute may be used to reference a primary-key value
                                          within a database or in a particular implementation.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="PrdIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Product IDs which the element refers
                                          to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="SegIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Segment IDs which the element refers
                                          to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="PaxIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Passenger IDs which the element
                                          refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="AccIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Accomodation IDs which the element
                                          refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="RedIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Reduction IDs which the element
                                          refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="FareIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Fare IDs which the element refers
                                          to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="MethodOfPayment" minOccurs="0">
                            <xs:complexType>
                              <xs:choice>
                                <xs:element name="Card">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="AddressVerificationSystemValue" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Credit Card holder's address</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="Line" type="sell_segment_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
                                              <xs:annotation>
                                                <xs:documentation>Street and number on first line. Building, Floor
                                                  etc... on following lines</xs:documentation>
                                              </xs:annotation>
                                            </xs:element>
                                          </xs:sequence>
                                          <xs:attribute name="CityName" type="sell_segment_ctr:StringLength1to64"/>
                                          <xs:attribute name="PostalCode" type="sell_segment_ctr:StringLength1to16">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Post Office Code number.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Country" type="sell_segment_ctr:StringLength1to32">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">ISO 3166 code for the country</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="MagneticTrack" minOccurs="0" maxOccurs="4">
                                        <xs:annotation>
                                          <xs:documentation>Contains Data of the Magnetic Stripe of the Credit Card</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="sell_segment_ctr:StringLength0to255">
                                              <xs:attribute name="Type"/>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Issuance" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Information about the issuing bank and country</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="Bank">
                                              <xs:complexType>
                                                <xs:attribute name="Name" type="sell_segment_ctr:StringLength1to128">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Full name of the issuing bank</xs:documentation>
                                                  </xs:annotation>
                                                </xs:attribute>
                                                <xs:attribute name="ID" type="sell_segment_ctr:StringLength1to64">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Code of bank issuing the card.</xs:documentation>
                                                  </xs:annotation>
                                                </xs:attribute>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                          <xs:attribute name="Country" type="sell_segment_ctr:StringLength1to32">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Credit Card country of issuance</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="PrimaryAccountNumber" type="sell_segment_ctr:StringLength1to32" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Credit card number embossed on the front of the card.</xs:documentation>
                                        </xs:annotation>
                                      </xs:element>
                                      <xs:element name="CVV" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Verification digits printed on the back of the card usually
                                            (CardVerificationValue).</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="sell_segment_ctr:StringLength1to8">
                                              <xs:attribute name="KnoxID" type="sell_segment_ctr:StringLength1to32">
                                                <xs:annotation>
                                                  <xs:documentation xml:lang="en">KnoxID of the CVV</xs:documentation>
                                                </xs:annotation>
                                              </xs:attribute>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="ApprovalCode" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>A series of characters assigned by the applicable credit
                                            card company's authorization system to confirm the approval of a credit sale
                                            transaction.</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="sell_segment_ctr:StringLength1to16">
                                              <xs:attribute name="Source" type="sell_segment_ctr:StringLength3">
                                                <xs:annotation>
                                                  <xs:documentation>Can be A if it comes from Amadeus Payment Server, or
                                                    N if entered manually by an Agent</xs:documentation>
                                                </xs:annotation>
                                              </xs:attribute>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Vendor" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="Code" type="sell_segment_ctr:StringLength1to8">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">The 2 character code of the credit card
                                                issuer.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="SubType" type="sell_segment_ctr:StringLength1to8">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">To identify a subtype of credit cards</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Validity" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="StartDate" type="sell_segment_ctr:MMYYDate">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="EndDate" type="sell_segment_ctr:MMYYDate">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="HolderName" type="sell_segment_ctr:StringLength1to128">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Name of credit card holder.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="FraudStatus" type="sell_segment_ctr:StringLength1to8">
                                      <xs:annotation>
                                        <xs:documentation>Can be OK, KO or RW (pending).</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="Invoice">
                                  <xs:complexType>
                                    <xs:attribute name="Reference" type="sell_segment_ctr:StringLength1to64"/>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="Cash"/>
                              </xs:choice>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating
                                    system. The ID attribute may be used to reference a primary-key value within a
                                    database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="TicketingOption" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>TicketingOption</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="sell_segment_ctr:TicketingOptionType">
                                  <xs:sequence>
                                    <xs:element name="ContactList" minOccurs="0" maxOccurs="9">
                                      <xs:complexType>
                                        <xs:attribute name="ID" type="xs:ID">
                                          <xs:annotation>
                                            <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                              creating system. The ID attribute may be used to reference a primary-key
                                              value within a database or in a particular implementation.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="CtnID" type="xs:IDREFS">
                                          <xs:annotation>
                                            <xs:documentation>It can contain a list of Contact IDs which the element
                                              refers to.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                      </xs:complexType>
                                    </xs:element>
                                  </xs:sequence>
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">A unique identifying value assigned by the
                                        creating system. The ID attribute may be used to reference a primary-key value
                                        within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Remark" minOccurs="0" maxOccurs="999">
                            <xs:annotation>
                              <xs:documentation>Remarks</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="xs:string">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation>A unique identifying value assigned by the creating system. The
                                        ID attribute may be used to reference a primary-key value within a database or
                                        in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                                  <xs:attribute name="SegIDs" type="xs:IDREFS" use="optional"/>
                                  <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                    <xs:annotation>
                                      <xs:documentation>Standard, Accounting, etc.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="ID" type="xs:ID">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system.
                              The ID attribute may be used to reference a primary-key value within a database or in a
                              particular implementation.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Failure">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="sell_segment_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Error" type="sell_segment_ctr:ErrorType" minOccurs="0" maxOccurs="99"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is
            identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="ReservationOptions" type="sell_segment_ctr:StringLength0to128">
        <xs:annotation>
          <xs:documentation>SplitPerPax, DirectSell etc.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attributeGroup ref="sell_segment_ctr:PayloadStdAttributes"/>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://acr.localhost/railconnect/book</con:endpoint><con:endpoint>https://demo-amr.contentrail.com/railconnect/book</con:endpoint><con:endpoint>https://dev.amr.local/railconnect/book</con:endpoint></con:endpoints><con:operation id="329fdaee-1f67-44e7-8a52-70f533b4ac25" isOneWay="false" action="https://dev.amr.local/railconnect/book" name="bookAction" bindingOperationName="bookAction" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="2a94e0f0-d3e5-4ee2-9bc8-ee5e4b221393" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://acr.localhost/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">\r
   <soap:Header/>\r
   <soap:Body>\r
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="?" ReservationOptions="?" TimeStamp="?" Version="?" CorrelationID="?">\r
         <!--1 to 99 repetitions:-->\r
         <Passenger>\r
            <!--1 to 9 repetitions:-->\r
            <Actor ID="?">\r
               <Name FirstName="?" LastName="?" Title="?" DateOfBirth="?"/>\r
            </Actor>\r
            <!--0 to 9 repetitions:-->\r
            <Contact ID="?" PaxIDs="?">\r
               <!--You have a CHOICE of the next 3 items at this level-->\r
               <Email>?</Email>\r
               <Telephone>?</Telephone>\r
               <CustomerLoyalty MembershipID="?" ProgramID="?" ExpirationDate="?">\r
                  <VendorCompany xsi:type="sell:CompanyNameType" Division="?" Department="?" xmlns:sell="sell_segment_ctr">?</VendorCompany>\r
               </CustomerLoyalty>\r
            </Contact>\r
         </Passenger>\r
         <Reservation ID="?">\r
            <!--1 to 99 repetitions:-->\r
            <Product Type="?" Class="?" MainClass="?" AccomType="?" ID="?"/>\r
            <!--0 to 99 repetitions:-->\r
            <Schedule ID="?">\r
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="?" DateTime="?" xmlns:sell="sell_segment_ctr">\r
                  <!--Optional:-->\r
                  <LocationCode Context="?">?</LocationCode>\r
               </Departure>\r
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="?" DateTime="?" xmlns:sell="sell_segment_ctr">\r
                  <!--Optional:-->\r
                  <LocationCode Context="?">?</LocationCode>\r
               </Arrival>\r
               <!--1 to 99 repetitions:-->\r
               <Segment Type="?" SubType="?" ID="?" Inventory="?">\r
                  <!--Optional:-->\r
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="?" DateTime="?" xmlns:sell="sell_segment_ctr">\r
                     <!--Optional:-->\r
                     <LocationCode Context="?">?</LocationCode>\r
                  </Departure>\r
                  <!--Optional:-->\r
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="?" DateTime="?" xmlns:sell="sell_segment_ctr">\r
                     <!--Optional:-->\r
                     <LocationCode Context="?">?</LocationCode>\r
                  </Arrival>\r
                  <!--Optional:-->\r
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">?</ServiceProviderCode>\r
                  <!--Optional:-->\r
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">?</Identifier>\r
               </Segment>\r
            </Schedule>\r
            <!--0 to 99 repetitions:-->\r
            <AccommodationPreferences Type="?" CoachNumber="?" PlaceNumber="?" NearTo="false" ID="?" SegIDs="?" PaxIDs="?">\r
               <!--0 to 99 repetitions:-->\r
               <Option Code="?" Value="?"/>\r
               <!--You have a CHOICE of the next 2 items at this level-->\r
               <!--0 to 99 repetitions:-->\r
               <SeatOptions Code="?" Value="?"/>\r
               <!--0 to 99 repetitions:-->\r
               <BerthOptions Code="?" Value="?"/>\r
            </AccommodationPreferences>\r
            <!--0 to 99 repetitions:-->\r
            <Reduction Description="?" ID="?" PaxIDs="?">\r
               <!--You have a CHOICE of the next 4 items at this level-->\r
               <RailcardCode xsi:type="xsd:string">?</RailcardCode>\r
               <CorporateCode xsi:type="xsd:string">?</CorporateCode>\r
               <CampaignCode xsi:type="xsd:string">?</CampaignCode>\r
               <PassengerCategoryCode xsi:type="xsd:string">?</PassengerCategoryCode>\r
               <!--Optional:-->\r
               <VendorCompanyCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">?</VendorCompanyCode>\r
            </Reduction>\r
            <!--1 to 99 repetitions:-->\r
            <Pricing ID="?" PrdIDs="?" PaxIDs="?" SegIDs="?" AccIDs="?" RedIDs="?">\r
               <!--You have a CHOICE of the next 2 items at this level-->\r
               <Fare xsi:type="sell:FareTypeRQ" Code="?" Family="?" Type="?" xmlns:sell="sell_segment_ctr"/>\r
               <BookingToken>?</BookingToken>\r
            </Pricing>\r
            <!--Optional:-->\r
            <MethodOfPayment ID="?">\r
               <!--You have a CHOICE of the next 3 items at this level-->\r
               <Card HolderName="?" FraudStatus="?">\r
                  <!--Optional:-->\r
                  <AddressVerificationSystemValue CityName="?" PostalCode="?" Country="?">\r
                     <!--0 to 5 repetitions:-->\r
                     <Line xsi:type="sell:StringLength1to64" xmlns:sell="sell_segment_ctr">?</Line>\r
                  </AddressVerificationSystemValue>\r
                  <!--0 to 4 repetitions:-->\r
                  <MagneticTrack Type="?">?</MagneticTrack>\r
                  <!--Optional:-->\r
                  <Issuance Country="?">\r
                     <Bank Name="?" ID="?"/>\r
                  </Issuance>\r
                  <!--Optional:-->\r
                  <PrimaryAccountNumber xsi:type="sell:StringLength1to32" xmlns:sell="sell_segment_ctr">?</PrimaryAccountNumber>\r
                  <!--Optional:-->\r
                  <CVV KnoxID="?">?</CVV>\r
                  <!--Optional:-->\r
                  <ApprovalCode Source="?">?</ApprovalCode>\r
                  <!--Optional:-->\r
                  <Vendor Code="?" SubType="?"/>\r
                  <!--Optional:-->\r
                  <Validity StartDate="?" EndDate="?"/>\r
               </Card>\r
               <Invoice Reference="?"/>\r
               <Cash xsi:type="xsd:anyType">?</Cash>\r
            </MethodOfPayment>\r
            <!--Optional:-->\r
            <TicketingOption Type="?" DeliveryMode="?" Description="?" ID="?">\r
               <!--0 to 9 repetitions:-->\r
               <ContactList CtnIDs="?" Type="?"/>\r
            </TicketingOption>\r
         </Reservation>\r
      </sel:RailConnect_SellSegmentRQ>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="railconnect_ws/RailConnectWSPortBook/bookActionRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="de65c66e-ce36-49c1-9edf-1897931f8f2c" wsaVersion="NONE" name="RailConnectWSTicket" type="wsdl" bindingName="{railconnect_ws}RailConnectWSTicket" soapVersion="1_2" anonymous="optional" definition="https://dev.amr.local/railconnect/ticket/wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="https://dev.amr.local/railconnect/ticket/wsdl"><con:part><con:url>https://dev.amr.local/railconnect/ticket/wsdl</con:url><con:content><![CDATA[<definitions name="RailConnectWS" targetNamespace="railconnect_ws" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="railconnect_ws" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:IssueContractRQ="IssueContractRQ" xmlns:IssueContractRS="IssueContractRS" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="IssueContractRQ" schemaLocation="xsd/RailConnect_IssueContractRQ.xsd"/>
      <import namespace="IssueContractRS" schemaLocation="xsd/RailConnect_IssueContractRS.xsd"/>
      <import namespace="issue_contract_ctr" schemaLocation="xsd/Type/RailConnect_IssueContract_CTR_Types.xsd"/>
    </schema>
  </types>
  <message name="ticketActionIn">
    <part name="request" element="IssueContractRQ:RailConnect_IssueContractRQ"/>
  </message>
  <message name="ticketActionOut">
    <part name="return" element="IssueContractRS:RailConnect_IssueContractRS"/>
  </message>
  <portType name="RailConnectWSPortTicket">
    <operation name="ticketAction">
      <input message="tns:ticketActionIn"/>
      <output message="tns:ticketActionOut"/>
    </operation>
  </portType>
  <binding name="RailConnectWSTicket" type="tns:RailConnectWSPortTicket">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="ticketAction">
      <soap12:operation soapAction="https://dev.amr.local/railconnect/ticket" soapActionRequired="true" style="document"/>
      <input>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </input>
      <output>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </output>
    </operation>
  </binding>
  <service name="RailConnectWSServiceTicket">
    <port name="PortTicket" binding="tns:RailConnectWSTicket">
      <soap12:address location="https://dev.amr.local/railconnect/ticket"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/ticket/xsd/RailConnect_IssueContractRQ.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="IssueContractRQ" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRTICK" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:IssueContractRQ="IssueContractRQ" xmlns:issue_contract_ctr="issue_contract_ctr">
  <xs:import namespace="issue_contract_ctr" schemaLocation="Type/RailConnect_IssueContract_CTR_Types.xsd"/>
  <xs:element name="RailConnect_IssueContractRQ">
    <xs:annotation>
      <xs:documentation>Issue Rail Contract</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PnrIdentification">
          <xs:annotation>
            <xs:documentation>Provider Record Locator</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:attribute name="PnrReference" type="xs:string" use="optional">
              <xs:annotation>
                <xs:documentation>Identifier of the reservation in Provider system</xs:documentation>
              </xs:annotation>
            </xs:attribute>
            <xs:attribute name="Inventory" type="xs:string">
              <xs:annotation>
                <xs:documentation>Reservation system</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
        <xs:element name="Issue">
          <xs:annotation>
            <xs:documentation>Issue</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:sequence>
              <xs:element name="MethodOfPayment" minOccurs="0">
                <xs:complexType>
                  <xs:choice>
                    <xs:element name="Card" minOccurs="0">
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="AddressVerificationSystemValue" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Credit Card holder's address</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Line" type="issue_contract_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
                                  <xs:annotation>
                                    <xs:documentation>Street and number on first line. Building, Floor etc... on following lines</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="CityName" type="issue_contract_ctr:StringLength1to64"/>
                              <xs:attribute name="PostalCode" type="issue_contract_ctr:StringLength1to16">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Post Office Code number.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Country" type="issue_contract_ctr:StringLength1to32">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">ISO 3166 code for the country</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="MagneticTrack" minOccurs="0" maxOccurs="4">
                            <xs:annotation>
                              <xs:documentation>Contains Data of the Magnetic Stripe of the Credit Card</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="issue_contract_ctr:StringLength0to255">
                                  <xs:attribute name="Type"/>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Issuance" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Information about the issuing bank and country</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Bank">
                                  <xs:complexType>
                                    <xs:attribute name="Name" type="issue_contract_ctr:StringLength1to128">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Full name of the issuing bank</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="ID" type="issue_contract_ctr:StringLength1to64">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Code of bank issuing the card.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="Country" type="issue_contract_ctr:StringLength1to32">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Credit Card country of issuance</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="PrimaryAccountNumber" type="issue_contract_ctr:StringLength1to32" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Credit card number embossed on the front of the card.</xs:documentation>
                            </xs:annotation>
                          </xs:element>
                          <xs:element name="CVV" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>Verification digits printed on the back of the card usually (CardVerificationValue).</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="issue_contract_ctr:StringLength1to8">
                                  <xs:attribute name="KnoxID" type="issue_contract_ctr:StringLength1to32">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">KnoxID of the CVV</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="ApprovalCode" minOccurs="0">
                            <xs:annotation>
                              <xs:documentation>A series of characters assigned by the applicable credit card company's authorization system to confirm the approval of a credit sale transaction.</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="issue_contract_ctr:StringLength1to16">
                                  <xs:attribute name="Source" type="issue_contract_ctr:StringLength3">
                                    <xs:annotation>
                                      <xs:documentation>Can be A if it comes from Amadeus Payment Server, or N if entered manually by an Agent</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Vendor" minOccurs="0">
                            <xs:complexType>
                              <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to8">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">The 2 character code of the credit card issuer.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="SubType" type="issue_contract_ctr:StringLength1to8">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">To identify a subtype of credit cards</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Validity" minOccurs="0">
                            <xs:complexType>
                              <xs:attribute name="StartDate" type="issue_contract_ctr:MMYYDate">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="EndDate" type="issue_contract_ctr:MMYYDate">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="HolderName" type="issue_contract_ctr:StringLength1to128">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Name of credit card holder.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="FraudStatus" type="issue_contract_ctr:StringLength1to8">
                          <xs:annotation>
                            <xs:documentation>Can be OK, KO or RW (pending).</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Invoice" minOccurs="0">
                      <xs:complexType>
                        <xs:attribute name="Reference" type="issue_contract_ctr:StringLength1to64"/>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Cash" minOccurs="0"/>
                  </xs:choice>
                </xs:complexType>
              </xs:element>
              <xs:element name="FormatAndDelivery" minOccurs="1">
                <xs:annotation>
                  <xs:documentation>TicketingOption</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="issue_contract_ctr:TicketingOptionType"/>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Remark" minOccurs="0" maxOccurs="999">
                <xs:annotation>
                  <xs:documentation>Remarks</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                        <xs:annotation>
                          <xs:documentation>Standard, Accounting, etc.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Options" type="xs:NMTOKENS">
        <xs:annotation>
          <xs:documentation></xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attributeGroup ref="issue_contract_ctr:PayloadStdAttributes"/>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/ticket/xsd/Type/RailConnect_IssueContract_CTR_Types.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="issue_contract_ctr" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:issue_contract_ctr="issue_contract_ctr">
  <xs:simpleType name="AlphaLength3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alphabetic Strings, length exactly 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaLength3orString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an IntegerLength1to13 or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="issue_contract_ctr:AlphaLength3 issue_contract_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 3.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to14">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used forAlpha-Numeric Strings, length 1 to 14.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,14}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodePatternType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes. It may contain merely codes or integer codes associated to a value in AMA_CodeTable.xls.
Pattern is composed on 3 parts: Standard (AMA or OTA or IATA), ListCode (3 upper case letters) and Code (1 to 3 digits). Code is mandatory. ListName is mandatory if Standard is precised, else it is optional. Standard is optional.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}((\.[0-9A-Z]{3,4})((\.(AMA|OTA|IATA|UIC)){0,1})){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes in the OpenTravel Code tables. Possible values of this pattern are 1, 101, 101.EQP, or 101.EQP.X.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}(\.[A-Z]{3}(\.X){0,1}){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DateOrDateTimeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">A construct to validate either a date or a dateTime value.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:date xs:dateTime"/>
  </xs:simpleType>
  <xs:simpleType name="integerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an integer or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:integer issue_contract_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="ISO3166">
    <xs:annotation>
      <xs:documentation xml:lang="en">Specifies a 2 character country code as defined in ISO3166.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{2}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="MMYYDate">
    <xs:annotation>
      <xs:documentation xml:lang="en">Month and year information.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="(0[1-9]|1[0-2])[0-9][0-9]"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="nonNegativeIntegerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either a nonNegativeInteger or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:nonNegativeInteger issue_contract_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="Numeric0to4">
    <xs:annotation>
      <xs:documentation>Used for numeric values, from 0 to 4 inclusive.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="4"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="NumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StateProvCodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">The standard code or abbreviation for the state, province, or region</xs:documentation>
    </xs:annotation>
    <xs:restriction base="issue_contract_ctr:StringLength1to8">
      <xs:minLength value="2"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="String0">
    <xs:annotation>
      <xs:documentation>Used for String length 0</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="0"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to128">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 128.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to255">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 255.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="255"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to16">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 16.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="16"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to64">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 64.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="64"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to128">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength3">
    <xs:annotation>
      <xs:documentation>Used for String length 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="3"/>
      <xs:maxLength value="3"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:attributeGroup name="AmountCurrencyAndDecimalPlaceGroup">
    <xs:attribute name="CurrencyCode" type="issue_contract_ctr:AlphaLength3orString0">
      <xs:annotation>
        <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DecimalPlaces" type="issue_contract_ctr:nonNegativeIntegerOrString0">
      <xs:annotation>
        <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Amount" type="issue_contract_ctr:integerOrString0">
      <xs:annotation>
        <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="BerthAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Berth Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list BLT (Level), BST (Size), BPT (Position), BCF (Configuration), ETP (Equipement)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="issue_contract_ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:attributeGroup name="BirthDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to provide a date of birth.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as indicated in the document, in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="EffectiveExpireOptionalDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to send the effective date and/or expiration date.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="EffectiveDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDateExclusiveIndicator" type="xs:boolean" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">When true, indicates that the ExpireDate is the first day after the applicable period (e.g. when expire date is Oct 15  the last date of the period is Oct 14).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="GenderGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to indicate the gender of a person, if known.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Gender" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifies the gender.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Male"/>
          <xs:enumeration value="Female"/>
          <xs:enumeration value="Unknown"/>
          <xs:enumeration value="Male_NoShare"/>
          <xs:enumeration value="Female_NoShare"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PayloadStdAttributes">
    <xs:annotation>
      <xs:documentation xml:lang="en">The PayloadAttributesShoRQ defines the attributes that appear on the root element for all Shopping Request messages.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="TimeStamp" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the creation date and time of the message in UTC using the following format specified by ISO 8601; YYYY-MM-DDThh:mm:ssZ with time values using the 24 hour clock (e.g. 20 November 2003, 1:59:38 pm UTC becomes 2003-11-20T13:59:38Z).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Version" type="xs:decimal" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">For all OpenTravel versioned messages, the version of the message is indicated by a decimal value.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="CorrelationID" type="issue_contract_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allow end-to-end correlation of log messages with the corresponding Web service message throughout the processing of the Web service message.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PlaceAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Place attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="CoachNumber" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="PlaceNumber" use="optional">
      <xs:annotation>
        <xs:documentation>Physical place number.(Left padding with 0 or [space] if needed)</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PrivacyGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Allows for control of the sharing of data between parties.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="ShareSynchInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for synchronization of information held by other travel service providers.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for synchronization of information held by other travel service providers.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ShareMarketInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for marketing purposes.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for marketing purposes.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="SeatAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Seat Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list SDR (Direction), SPS (Position),SCT (Configuration), PPF (PassengerProfile), ETP (Equipment)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="issue_contract_ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:complexType name="RailCardDetails">
    <xs:annotation>
      <xs:documentation>Describes a Railcard reduction</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="issue_contract_ctr:StringLength0to128">
        <xs:attribute name="Code">
          <xs:annotation>
            <xs:documentation xml:lang="en">A code identifying the type of card. Refer to code list RCC.</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="6"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="Number">
          <xs:annotation>
            <xs:documentation xml:lang="en">Railcard number</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="45"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="RailcardId" type="xs:string">
          <xs:annotation>
            <xs:documentation>An ID authorizing the use of the card.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="RailCardNumberRequired" type="xs:boolean"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CampaignTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Campaign reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The campaign code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CorporateTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Corporate reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Type">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Contract">
      <xs:annotation>
        <xs:documentation xml:lang="en">The contract number associated to the corporate code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PassengerCategoryDetails">
    <xs:annotation>
      <xs:documentation>Describes a Passenger category reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Context">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CompanyNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Identifies a company by name.</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="issue_contract_ctr:StringLength0to128">
        <xs:annotation>
          <xs:documentation xml:lang="en">Provides detailed information on a company.</xs:documentation>
        </xs:annotation>
        <xs:attribute name="Division" type="issue_contract_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The division name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="Department" type="issue_contract_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The department name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CustomerLoyaltyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Program rewarding frequent use by accumulating credits for services provided by vendors. This type is based on OTA_CommonTypes-CustLoyaltyType</xs:documentation>
    </xs:annotation>
    <xs:attribute name="MembershipID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique identifier of the member in the program (membership number, account number, etc.).</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="issue_contract_ctr:StringLength1to32">
          <xs:minLength value="1"/>
          <xs:maxLength value="32"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ProgramID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="issue_contract_ctr:AlphaNumericStringLength1to3">
          <xs:minLength value="1"/>
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ExpirationDate" type="issue_contract_ctr:DateOrDateTimeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DateTimeLocationType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes DateTime and Location</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="issue_contract_ctr:StringLength1to16">
              <xs:attribute name="Context" type="issue_contract_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="LocationName" type="issue_contract_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Name of the location</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DateTime" type="issue_contract_ctr:DateOrDateTimeType">
      <xs:annotation>
        <xs:documentation>Date and optional time</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DetailQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="issue_contract_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="issue_contract_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="issue_contract_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="BookingToken" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DocumentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Provides information on a specific document.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice minOccurs="0">
        <xs:element name="DocHolderName" type="issue_contract_ctr:StringLength1to64" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of the document holder in unformatted text (Mr. Sam Jones).</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="DocHolderFormattedName" type="issue_contract_ctr:PersonNameType" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of document holder in formatted text.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="DocLimitations" type="issue_contract_ctr:StringLength1to64" minOccurs="0" maxOccurs="9">
        <xs:annotation>
          <xs:documentation xml:lang="en">Used to indicate any limitations on the document (e.g. as a person may only be allowed to spend a max of 30 days in country on a visitor's visa).</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="AdditionalPersonNames" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">A container for additional person names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="AdditionalPersonName" type="issue_contract_ctr:StringLength1to64" maxOccurs="99">
              <xs:annotation>
                <xs:documentation xml:lang="en">The name of an additional person listed on this document.</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="issue_contract_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of document data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueAuthority" type="issue_contract_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the group or association that granted the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueLocation" type="issue_contract_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the location where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocID" type="issue_contract_ctr:StringLength1to32" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocType" type="issue_contract_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="issue_contract_ctr:GenderGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The gender of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="issue_contract_ctr:BirthDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The birth date of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="issue_contract_ctr:EffectiveExpireOptionalDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The effective and expiry date of the document.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueStateProv" type="issue_contract_ctr:StateProvCodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">State or Province where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueCountry" type="issue_contract_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Country where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthCountry" type="issue_contract_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth country of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthPlace" type="issue_contract_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth place of the document holder (e.g., city, state, county, province), when designating a country of birth, use BirthCountry.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocHolderNationality" type="issue_contract_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The country code of the nationality of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ContactName" type="issue_contract_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides contact name associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="HolderType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides the type of document holder.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Infant">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is an infant.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="HeadOfHousehold">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is a head of household.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Remark" type="issue_contract_ctr:StringLength1to128" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">A remark associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PostalCode" type="issue_contract_ctr:StringLength1to16" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Defines the postal code (e.g., ZIP code) on the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ErrorType">
    <xs:annotation>
      <xs:documentation>Describes an Error</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="issue_contract_ctr:StringLength0to255">
        <xs:attribute name="Code" type="issue_contract_ctr:NumericStringLength1to8" use="required"/>
        <xs:attribute name="Type" default="System">
          <xs:simpleType>
            <xs:restriction base="xs:NMTOKEN">
              <xs:enumeration value="System"/>
              <xs:enumeration value="Functional"/>
              <xs:enumeration value="Provider"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="FareType">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="issue_contract_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule with all details</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PassengerLimits" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Defines the minimum and maximum number of passengers for which this quoting rule is eligible.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="MinPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The minimum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="MaxPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The maximum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="issue_contract_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeRQ">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule request</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="LocationType">
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="issue_contract_ctr:StringLength1to16">
              <xs:attribute name="Context" type="issue_contract_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PriceType">
    <xs:annotation>
      <xs:documentation>Describes a Price</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="issue_contract_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
  </xs:complexType>
  <xs:complexType name="ScheduleQueryType">
    <xs:annotation>
      <xs:documentation>Describes a Schedule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="issue_contract_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="issue_contract_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="DateTime">
        <xs:annotation>
          <xs:documentation>Date and optional time. It can be the departure time or the arrival time</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:choice>
            <xs:element name="Departure" type="issue_contract_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the departure time</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Arrival" type="issue_contract_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the arrival time</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:complexType>
      </xs:element>
      <xs:element name="SearchCriteria" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Used to restrict the schedule solutions based on specific criteria</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>It describes any search criteria according to the code list</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="issue_contract_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">It is the value of the search criteria specified in the code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleReplyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Segment" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>Portion of an schedule solution, including all legs which are listed under the same train number or identifier.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="issue_contract_ctr:SegmentType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="ScheduleSolution" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>An schedule solution</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="issue_contract_ctr:ScheduleSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="issue_contract_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleSolutionType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="issue_contract_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode and departure dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="issue_contract_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode and arrival dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration from the departure location to destination.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SearchCriteriaType">
    <xs:annotation>
      <xs:documentation>Describes Search Criteria</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TravelClass" maxOccurs="9">
        <xs:annotation>
          <xs:documentation>Describes any preferences in terms of travel class. Refer to code list TCC.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SegmentShortType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="issue_contract_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="issue_contract_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="issue_contract_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="issue_contract_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Vehicle" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Contains vehicle characteristics</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle Code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DisplayName" type="issue_contract_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle name.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration of the train from departure location to destination location.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentTypeRQ">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment information for booking query</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="issue_contract_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="issue_contract_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="issue_contract_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="issue_contract_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductType">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item. It refers to the code list PTY</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type. It refers to the code list TCC</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="issue_contract_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description" type="xs:string">
      <xs:annotation>
        <xs:documentation>It is the description of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductTypeRQ">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item (Transport, Transport with seat, Ancillary). It refers to the code list SET.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PersonNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">This provides name information for a person.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="NamePrefix" type="issue_contract_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Salutation of honorific (e.g. Mr., Mrs., Ms., Miss, Dr.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="GivenName" type="issue_contract_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Given name, first name or names.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MiddleName" type="issue_contract_ctr:StringLength1to64" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">The middle name of the person name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="SurnamePrefix" type="issue_contract_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The surname prefix, e.g "van der", "von", "de".</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Surname" type="issue_contract_ctr:StringLength1to64">
        <xs:annotation>
          <xs:documentation xml:lang="en">Family name, last name. May also be used for full name if the sending system does not have the ability to separate a full name into its parts, e.g. the surname element may be used to pass the full name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameSuffix" type="issue_contract_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Hold various name suffixes and letters (e.g. Jr., Sr., III, Ret., Esq.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameTitle" type="issue_contract_ctr:StringLength1to16" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Degree or honors (e.g., Ph.D., M.D.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Document" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Document  information for verification purposes and also used for additional filtering for common names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="DocID" type="issue_contract_ctr:StringLength1to32" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DocType" type="issue_contract_ctr:CodeType" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="issue_contract_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of person name data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="NameType" type="issue_contract_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of name of the individual, such as former, nickname, alternate or alias name. Refer to OpenTravel Code List Name Type (NAM).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingSolutionType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TotalQuote" type="issue_contract_ctr:TotalQuoteType" minOccurs="0"/>
      <xs:element name="DetailQuote" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Quote</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="issue_contract_ctr:DetailQuoteType">
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PaxIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="RedIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Reduction IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="FareIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Fare IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PrdIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Service IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="TicketingOption" type="issue_contract_ctr:TicketingOptionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Ticket type and delivery method</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ToBeSoldWith" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Booking Constraints Linkage (It's an OR, not an AND)</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="PslIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of PricingSolution IDs which the element refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="issue_contract_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
    <xs:attribute name="Avail" type="xs:int">
      <xs:annotation>
        <xs:documentation>It is the numerical availability.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AvailLevel" type="issue_contract_ctr:AlphaNumericStringLength1to3">
      <xs:annotation>
        <xs:documentation>This indicator inform the client on the level of availability.  It refers to the code list AVL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Fare" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Applied Fares</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="issue_contract_ctr:FareType">
              <xs:attribute name="ID" type="xs:ID" use="optional">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PricingSolution" minOccurs="0" maxOccurs="1999">
        <xs:annotation>
          <xs:documentation>Collection of prices and products</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="issue_contract_ctr:PricingSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SslIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of ScheduleSolution IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ReductionType">
    <xs:annotation>
      <xs:documentation>Describes a Reduction request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailcardCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a railcard reduction</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CorporateCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a corporate reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CampaignCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a campaign reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="PassengerCategoryCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a passenger category not related with age. It refers to the code list PGC.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="VendorCompanyCode" type="issue_contract_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ReductionTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Reduction</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailCardDetails" type="issue_contract_ctr:RailCardDetails"/>
        <xs:element name="CorporateTypeDetails" type="issue_contract_ctr:CorporateTypeDetails"/>
        <xs:element name="CampaignTypeDetails" type="issue_contract_ctr:CampaignTypeDetails"/>
        <xs:element name="PassengerCategoryDetails" type="issue_contract_ctr:PassengerCategoryDetails"/>
      </xs:choice>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Condition of the reduction</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Code">
                <xs:simpleType>
                  <xs:restriction base="xs:string"/>
                </xs:simpleType>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="VendorCompanyCode" type="issue_contract_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RequestedAccommodationType">
    <xs:annotation>
      <xs:documentation>Criteria for accommodation request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Option" minOccurs="0" maxOccurs="99">
        <xs:complexType>
          <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to16" use="required">
            <xs:annotation>
              <xs:documentation>See RDP code type list DKL (Deck level), GDT (Gender), PET (Pets allowed), SMK (Smoking), BIK (Bike space), ERT (Environment)</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="issue_contract_ctr:StringLength1to16" use="required"/>
        </xs:complexType>
      </xs:element>
      <xs:choice>
        <xs:element name="SeatOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="issue_contract_ctr:SeatAttributesGroup"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="BerthOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="issue_contract_ctr:BerthAttributesGroup"/>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Seat, Berth, etc. See RDP code type list ACT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="issue_contract_ctr:PlaceAttributesGroup"/>
    <xs:attribute name="NearTo" type="xs:boolean" use="optional" default="false">
      <xs:annotation>
        <xs:documentation>If true the system may return a place near the given one if this place is not available. If false the system try to get only the specified place.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="issue_contract_ctr:SegmentShortType">
        <xs:sequence>
          <xs:element name="CO2Emissions" minOccurs="0">
            <xs:annotation>
              <xs:documentation xml:lang="en">Value and units of the CO2 emissions in the segment</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="xs:decimal">
                  <xs:attribute name="Unit" type="xs:NMTOKEN"/>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="ServiceOnBoard" minOccurs="0" maxOccurs="99">
            <xs:annotation>
              <xs:documentation xml:lang="en">Refer to code list SOB.</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="issue_contract_ctr:StringLength0to32">
                  <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to16" use="optional">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="InformationMessage" type="xs:string" minOccurs="0">
            <xs:annotation>
              <xs:documentation>Information text to display</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="TaxType">
    <xs:annotation>
      <xs:documentation>Describes a Tax</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="issue_contract_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
    <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of Tax. It refers to FTT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TicketingOptionType">
    <xs:annotation>
      <xs:documentation>Describes a Ticketing Option</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="issue_contract_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Type of ticket. Refer to code list TTY.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DeliveryMode" type="issue_contract_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Code of the method of delivery. Refer to code list DMD</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TotalQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="issue_contract_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="issue_contract_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="issue_contract_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UnnamedPassengerType">
    <xs:annotation>
      <xs:documentation>Describes a Passenger</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Reduction" type="issue_contract_ctr:ReductionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Indicate a reduction (railcard, corporate code, etc.) applicable to the passenger</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="WarningType">
    <xs:annotation>
      <xs:documentation>Describes a Warning</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="issue_contract_ctr:StringLength0to255">
        <xs:attribute name="Code" type="issue_contract_ctr:NumericStringLength1to8" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/ticket/xsd/RailConnect_IssueContractRS.xsd</con:url><con:content><![CDATA[<xs:schema targetNamespace="IssueContractRS" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRTICK" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:issue_contract_ctr="issue_contract_ctr" xmlns:IssueContractRQ="IssueContractRQ">
  <xs:import namespace="issue_contract_ctr" schemaLocation="Type/RailConnect_IssueContract_CTR_Types.xsd"/>
  <xs:element name="RailConnect_IssueContractRS">
    <xs:annotation>
      <xs:documentation>User response with Rail Contract(s)</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:choice>
        <xs:element name="Success">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="issue_contract_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Booking">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="PnrIdentification">
                      <xs:annotation>
                        <xs:documentation>Provider RecLoc</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:attribute name="PnrReference" type="xs:string" use="optional">
                          <xs:annotation>
                            <xs:documentation>Identifier of the reservation in Provider system</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="CreationDate" type="xs:dateTime">
                          <xs:annotation>
                            <xs:documentation>Creation date of the Provider PNR</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="Inventory" type="xs:string">
                          <xs:annotation>
                            <xs:documentation>Reservation system</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="Relationship" type="xs:NMTOKEN">
                          <xs:annotation>
                            <xs:documentation>Parent Record or Child record</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Passenger" maxOccurs="9">
                      <xs:annotation>
                        <xs:documentation>Passenger</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="Actor" maxOccurs="9">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Name">
                                  <xs:complexType>
                                    <xs:attribute name="FirstName" type="xs:string"/>
                                    <xs:attribute name="LastName" type="xs:string"/>
                                    <xs:attribute name="Title" type="xs:string"/>
                                    <xs:attribute name="DateOfBirth" type="xs:date"/>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Contact" minOccurs="0" maxOccurs="9">
                            <xs:complexType>
                              <xs:all>
                                <xs:element name="Email" minOccurs="0">
                                  <xs:complexType>
                                    <xs:simpleContent>
                                      <xs:extension base="xs:string"/>
                                    </xs:simpleContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="Telephone" minOccurs="0">
                                  <xs:complexType>
                                    <xs:simpleContent>
                                      <xs:extension base="xs:string"/>
                                    </xs:simpleContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="CustomerLoyalty" minOccurs="0">
                                  <xs:complexType>
                                    <xs:complexContent>
                                      <xs:extension base="issue_contract_ctr:CustomerLoyaltyType">
                                        <xs:sequence>
                                          <xs:element name="VendorCompany" type="issue_contract_ctr:CompanyNameType"/>
                                        </xs:sequence>
                                      </xs:extension>
                                    </xs:complexContent>
                                  </xs:complexType>
                                </xs:element>
                              </xs:all>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="PaxIDs" type="xs:NMTOKENS">
                                <xs:annotation>
                                  <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Reservation">
                      <xs:annotation>
                        <xs:documentation>Reservation item</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="Warning" type="issue_contract_ctr:WarningType" minOccurs="0" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Warning</xs:documentation>
                            </xs:annotation>
                          </xs:element>
                          <xs:element name="Product" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Service, Supplement, Ancillary service</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="issue_contract_ctr:ProductType">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Schedule" minOccurs="0" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Schedule</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Departure" type="issue_contract_ctr:DateTimeLocationType">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                                <xs:element name="Arrival" type="issue_contract_ctr:DateTimeLocationType">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                                <xs:sequence>
                                  <xs:element name="Segment" maxOccurs="99">
                                    <xs:complexType>
                                      <xs:complexContent>
                                        <xs:extension base="issue_contract_ctr:SegmentType">
                                          <xs:attribute name="ID" type="xs:ID" use="required">
                                            <xs:annotation>
                                              <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Status" type="issue_contract_ctr:StringLength1to8" use="required"/>
                                        </xs:extension>
                                      </xs:complexContent>
                                    </xs:complexType>
                                  </xs:element>
                                </xs:sequence>
                              </xs:sequence>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Reduction" minOccurs="0" maxOccurs="99">
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="issue_contract_ctr:ReductionTypeDetails">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="AccommodationPreferences" minOccurs="0" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Accommodation</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="issue_contract_ctr:RequestedAccommodationType">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="SegID" type="xs:IDREFS" use="optional"/>
                                  <xs:attribute name="PaxID" type="xs:IDREFS" use="required"/>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Pricing">
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Fare" maxOccurs="99">
                                  <xs:complexType>
                                    <xs:complexContent>
                                      <xs:extension base="issue_contract_ctr:FareType">
                                        <xs:attribute name="ID" type="xs:ID">
                                          <xs:annotation>
                                            <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="SegIDs" type="xs:IDREFS" use="optional"/>
                                        <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                                      </xs:extension>
                                    </xs:complexContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="TotalQuote">
                                  <xs:complexType>
                                    <xs:complexContent>
                                      <xs:extension base="issue_contract_ctr:TotalQuoteType"/>
                                    </xs:complexContent>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="DetailQuote" maxOccurs="99">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="Price">
                                        <xs:complexType>
                                          <xs:attribute name="CurrencyCode" type="issue_contract_ctr:AlphaLength3" use="required">
                                            <xs:annotation>
                                              <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="DecimalPlaces" type="issue_contract_ctr:Numeric0to4" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Amount" type="xs:integer" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Tax" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="CurrencyCode" type="issue_contract_ctr:AlphaLength3" use="required">
                                            <xs:annotation>
                                              <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="DecimalPlaces" type="issue_contract_ctr:Numeric0to4" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Amount" type="xs:integer" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Type of Tax</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Fee" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="CurrencyCode" type="issue_contract_ctr:AlphaLength3" use="required">
                                            <xs:annotation>
                                              <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="DecimalPlaces" type="issue_contract_ctr:Numeric0to4" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Amount" type="xs:integer" use="required">
                                            <xs:annotation>
                                              <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Type of Fee</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="ID" type="xs:ID">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="PrdIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Product IDs which the element refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="SegIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="PaxIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="AccIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Accomodation IDs which the element refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="RedIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Reduction IDs which the element refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="FareIDs" type="xs:IDREFS">
                                      <xs:annotation>
                                        <xs:documentation>It can contain a list of Fare IDs which the element refers to.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="MethodOfPayment">
                            <xs:complexType>
                              <xs:choice>
                                <xs:element name="Card" minOccurs="0">
                                  <xs:complexType>
                                    <xs:sequence>
                                      <xs:element name="AddressVerificationSystemValue" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Credit Card holder's address</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="Line" type="issue_contract_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
                                              <xs:annotation>
                                                <xs:documentation>Street and number on first line. Building, Floor etc... on following lines</xs:documentation>
                                              </xs:annotation>
                                            </xs:element>
                                          </xs:sequence>
                                          <xs:attribute name="CityName" type="issue_contract_ctr:StringLength1to64"/>
                                          <xs:attribute name="PostalCode" type="issue_contract_ctr:StringLength1to16">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Post Office Code number.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="Country" type="issue_contract_ctr:StringLength1to32">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">ISO 3166 code for the country</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="MagneticTrack" minOccurs="0" maxOccurs="4">
                                        <xs:annotation>
                                          <xs:documentation>Contains Data of the Magnetic Stripe of the Credit Card</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="issue_contract_ctr:StringLength0to255">
                                              <xs:attribute name="Type"/>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Issuance" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Information about the issuing bank and country</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:sequence>
                                            <xs:element name="Bank">
                                              <xs:complexType>
                                                <xs:attribute name="Name" type="issue_contract_ctr:StringLength1to128">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Full name of the issuing bank</xs:documentation>
                                                  </xs:annotation>
                                                </xs:attribute>
                                                <xs:attribute name="ID" type="issue_contract_ctr:StringLength1to64">
                                                  <xs:annotation>
                                                    <xs:documentation xml:lang="en">Code of bank issuing the card.</xs:documentation>
                                                  </xs:annotation>
                                                </xs:attribute>
                                              </xs:complexType>
                                            </xs:element>
                                          </xs:sequence>
                                          <xs:attribute name="Country" type="issue_contract_ctr:StringLength1to32">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Credit Card country of issuance</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="PrimaryAccountNumber" type="issue_contract_ctr:StringLength1to32" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Credit card number embossed on the front of the card.</xs:documentation>
                                        </xs:annotation>
                                      </xs:element>
                                      <xs:element name="CVV" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>Verification digits printed on the back of the card usually (CardVerificationValue).</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="issue_contract_ctr:StringLength1to8">
                                              <xs:attribute name="KnoxID" type="issue_contract_ctr:StringLength1to32">
                                                <xs:annotation>
                                                  <xs:documentation xml:lang="en">KnoxID of the CVV</xs:documentation>
                                                </xs:annotation>
                                              </xs:attribute>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="ApprovalCode" minOccurs="0">
                                        <xs:annotation>
                                          <xs:documentation>A series of characters assigned by the applicable credit card company's authorization system to confirm the approval of a credit sale transaction.</xs:documentation>
                                        </xs:annotation>
                                        <xs:complexType>
                                          <xs:simpleContent>
                                            <xs:extension base="issue_contract_ctr:StringLength1to16">
                                              <xs:attribute name="Source" type="issue_contract_ctr:StringLength3">
                                                <xs:annotation>
                                                  <xs:documentation>Can be A if it comes from Amadeus Payment Server, or N if entered manually by an Agent</xs:documentation>
                                                </xs:annotation>
                                              </xs:attribute>
                                            </xs:extension>
                                          </xs:simpleContent>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Vendor" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="Code" type="issue_contract_ctr:StringLength1to8">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">The 2 character code of the credit card issuer.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="SubType" type="issue_contract_ctr:StringLength1to8">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">To identify a subtype of credit cards</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                      <xs:element name="Validity" minOccurs="0">
                                        <xs:complexType>
                                          <xs:attribute name="StartDate" type="issue_contract_ctr:MMYYDate">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                          <xs:attribute name="EndDate" type="issue_contract_ctr:MMYYDate">
                                            <xs:annotation>
                                              <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
                                            </xs:annotation>
                                          </xs:attribute>
                                        </xs:complexType>
                                      </xs:element>
                                    </xs:sequence>
                                    <xs:attribute name="HolderName" type="issue_contract_ctr:StringLength1to128">
                                      <xs:annotation>
                                        <xs:documentation xml:lang="en">Name of credit card holder.</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                    <xs:attribute name="FraudStatus" type="issue_contract_ctr:StringLength1to8">
                                      <xs:annotation>
                                        <xs:documentation>Can be OK, KO or RW (pending).</xs:documentation>
                                      </xs:annotation>
                                    </xs:attribute>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="Invoice" minOccurs="0">
                                  <xs:complexType>
                                    <xs:attribute name="Reference" type="issue_contract_ctr:StringLength1to64"/>
                                  </xs:complexType>
                                </xs:element>
                                <xs:element name="Cash" minOccurs="0"/>
                              </xs:choice>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="TicketingOption">
                            <xs:complexType>
                              <xs:complexContent>
                                <xs:extension base="issue_contract_ctr:TicketingOptionType">
                                  <xs:sequence>
                                    <xs:element name="ContactList" minOccurs="0" maxOccurs="9">
                                      <xs:complexType>
                                        <xs:attribute name="ID" type="xs:ID">
                                          <xs:annotation>
                                            <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="CtnID" type="xs:IDREFS">
                                          <xs:annotation>
                                            <xs:documentation>It can contain a list of Contact IDs which the element refers to.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                      </xs:complexType>
                                    </xs:element>
                                  </xs:sequence>
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:complexContent>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Contract" maxOccurs="99">
                            <xs:annotation>
                              <xs:documentation>Contract</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:sequence>
                                <xs:element name="Price" type="issue_contract_ctr:PriceType" minOccurs="0" maxOccurs="99">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Represent price information</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                                <xs:element name="Tax" type="issue_contract_ctr:TaxType" minOccurs="0" maxOccurs="99">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                                <xs:element name="Fee" type="issue_contract_ctr:TaxType" minOccurs="0" maxOccurs="99">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
                                  </xs:annotation>
                                </xs:element>
                                <xs:element name="Document" minOccurs="0" maxOccurs="99">
                                  <xs:annotation>
                                    <xs:documentation>Document</xs:documentation>
                                  </xs:annotation>
                                  <xs:complexType>
                                    <xs:simpleContent>
                                      <xs:extension base="xs:string">
                                        <xs:attribute name="Type" type="xs:string" use="optional">
                                          <xs:annotation>
                                            <xs:documentation>Type. URL, 2DBarCode, etc.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="Version" type="xs:string" use="optional">
                                          <xs:annotation>
                                            <xs:documentation>API or Standard version</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="Source" type="xs:NMTOKENS">
                                          <xs:annotation>
                                            <xs:documentation>Reservation system</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="Encoding" type="xs:string" use="optional">
                                          <xs:annotation>
                                            <xs:documentation>Encoding name. BASE64, etc.</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="Size" type="xs:positiveInteger" use="optional">
                                          <xs:annotation>
                                            <xs:documentation>Size of Document content</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                        <xs:attribute name="NumberOfCoupons" type="xs:positiveInteger">
                                          <xs:annotation>
                                            <xs:documentation>Quantity of physical coupons</xs:documentation>
                                          </xs:annotation>
                                        </xs:attribute>
                                      </xs:extension>
                                    </xs:simpleContent>
                                  </xs:complexType>
                                </xs:element>
                              </xs:sequence>
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                              <xs:attribute name="SegIDs" type="xs:IDREFS" use="optional"/>
                              <xs:attribute name="AccIDs" type="xs:IDREFS" use="optional"/>
                              <xs:attribute name="TkoID" type="xs:IDREF" use="optional"/>
                              <xs:attribute name="MopID" type="xs:IDREF" use="optional"/>
                              <xs:attribute name="Number" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Main Contract Number</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Status" type="xs:NMTOKENS" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Contract status. Ticketed, Refunded, etc. See RDP code type list TSS.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="SecondNumber" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Second Contract Number</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="IssueDate" type="issue_contract_ctr:DateOrDateTimeType" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Issuance date/date and time of the provider</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="StartValidityDate" type="xs:dateTime">
                                <xs:annotation>
                                  <xs:documentation>Start validity date</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="EndValidityDate" type="xs:dateTime">
                                <xs:annotation>
                                  <xs:documentation>End validity date</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="NumberOfPassengers" type="xs:positiveInteger" use="optional">
                                <xs:annotation>
                                  <xs:documentation>NumberOfPassengers, NumberInParty (NIP)</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Properties" type="xs:NMTOKENS" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Properties.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                          <xs:element name="Remark" minOccurs="0" maxOccurs="999">
                            <xs:annotation>
                              <xs:documentation>Remarks</xs:documentation>
                            </xs:annotation>
                            <xs:complexType>
                              <xs:simpleContent>
                                <xs:extension base="xs:string">
                                  <xs:attribute name="ID" type="xs:ID">
                                    <xs:annotation>
                                      <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                                  <xs:attribute name="SegIDs" type="xs:IDREFS" use="optional"/>
                                  <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                    <xs:annotation>
                                      <xs:documentation>Standard, Accounting, etc.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:extension>
                              </xs:simpleContent>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="ID" type="xs:ID">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Failure">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="issue_contract_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Error" type="issue_contract_ctr:ErrorType" minOccurs="0" maxOccurs="99"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
      <xs:attribute name="EchoToken" type="issue_contract_ctr:StringLength1to128" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">A reference for additional message identification, assigned by the requesting host system. When a request message includes an echo token the corresponding response message MUST include an echo token with an identical value.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Action" type="xs:NMTOKENS">
        <xs:annotation>
          <xs:documentation>Commit, SplitPerPax, etc.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attributeGroup ref="issue_contract_ctr:PayloadStdAttributes"/>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://dev.amr.local/railconnect/ticket</con:endpoint></con:endpoints><con:operation id="58f0b803-5a42-4320-a066-77372b180b23" isOneWay="false" action="https://dev.amr.local/railconnect/ticket" name="ticketAction" bindingOperationName="ticketAction" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="0b110e86-4ce4-4463-a431-dcb0a8cbb677" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">\r
   <soap:Header/>\r
   <soap:Body>\r
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="?" Options="?" TimeStamp="?" Version="?" CorrelationID="?">\r
         <PnrIdentification PnrReference="?" Inventory="?"/>\r
         <Issue>\r
            <!--Optional:-->\r
            <MethodOfPayment>\r
               <!--You have a CHOICE of the next 3 items at this level-->\r
               <!--Optional:-->\r
               <Card HolderName="?" FraudStatus="?">\r
                  <!--Optional:-->\r
                  <AddressVerificationSystemValue CityName="?" PostalCode="?" Country="?">\r
                     <!--0 to 5 repetitions:-->\r
                     <Line xsi:type="iss:StringLength1to64" xmlns:iss="issue_contract_ctr">?</Line>\r
                  </AddressVerificationSystemValue>\r
                  <!--0 to 4 repetitions:-->\r
                  <MagneticTrack Type="?">?</MagneticTrack>\r
                  <!--Optional:-->\r
                  <Issuance Country="?">\r
                     <Bank Name="?" ID="?"/>\r
                  </Issuance>\r
                  <!--Optional:-->\r
                  <PrimaryAccountNumber xsi:type="iss:StringLength1to32" xmlns:iss="issue_contract_ctr">?</PrimaryAccountNumber>\r
                  <!--Optional:-->\r
                  <CVV KnoxID="?">?</CVV>\r
                  <!--Optional:-->\r
                  <ApprovalCode Source="?">?</ApprovalCode>\r
                  <!--Optional:-->\r
                  <Vendor Code="?" SubType="?"/>\r
                  <!--Optional:-->\r
                  <Validity StartDate="?" EndDate="?"/>\r
               </Card>\r
               <!--Optional:-->\r
               <Invoice Reference="?"/>\r
               <!--Optional:-->\r
               <Cash xsi:type="xsd:anyType">?</Cash>\r
            </MethodOfPayment>\r
            <FormatAndDelivery Type="?" DeliveryMode="?" Description="?"/>\r
            <!--0 to 999 repetitions:-->\r
            <Remark Type="?">?</Remark>\r
         </Issue>\r
      </iss:RailConnect_IssueContractRQ>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="railconnect_ws/RailConnectWSPortTicket/ticketActionRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="7450bdf7-fd16-4252-b654-56428e72a925" wsaVersion="NONE" name="RailConnectWSRefundConditions" type="wsdl" bindingName="{railconnect_ws}RailConnectWSRefundConditions" soapVersion="1_2" anonymous="optional" definition="https://dev.amr.local/railconnect/refund_condition/wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="https://dev.amr.local/railconnect/refund_condition/wsdl"><con:part><con:url>https://dev.amr.local/railconnect/refund_condition/wsdl</con:url><con:content><![CDATA[<definitions name="RailConnectWS" targetNamespace="railconnect_ws" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="railconnect_ws" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:GetRefundConditionsRQ="GetRefundConditionsRQ" xmlns:GetRefundConditionsRS="GetRefundConditionsRS" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="refund_condition_ctr" schemaLocation="xsd/Type/RailConnect_Refund_CTR_Types.xsd"/>
      <import namespace="GetRefundConditionsRQ" schemaLocation="xsd/RailConnect_GetRefundConditionsRQ.xsd"/>
      <import namespace="GetRefundConditionsRS" schemaLocation="xsd/RailConnect_GetRefundConditionsRS.xsd"/>
    </schema>
  </types>
  <message name="refundConditionActionIn">
    <part name="request" element="GetRefundConditionsRQ:RailConnect_GetRefundConditionsRQ"/>
  </message>
  <message name="refundConditionActionOut">
    <part name="return" element="GetRefundConditionsRS:RailConnect_GetRefundConditionsRS"/>
  </message>
  <portType name="RailConnectWSPortRefundConditions">
    <operation name="refundConditionAction">
      <input message="tns:refundConditionActionIn"/>
      <output message="tns:refundConditionActionOut"/>
    </operation>
  </portType>
  <binding name="RailConnectWSRefundConditions" type="tns:RailConnectWSPortRefundConditions">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="refundConditionAction">
      <soap12:operation soapAction="https://dev.amr.local/railconnect/refund_condition" soapActionRequired="true" style="document"/>
      <input>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </input>
      <output>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </output>
    </operation>
  </binding>
  <service name="RailConnectWSServiceRefundConditions">
    <port name="PortRefundConditions" binding="tns:RailConnectWSRefundConditions">
      <soap12:address location="https://dev.amr.local/railconnect/refund_condition"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/refund_condition/xsd/Type/RailConnect_Refund_CTR_Types.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2013 rel. 2 sp2 (x64) (http://www.altova.com) by ﻿AMADEUS s.a.s. (AMADEUS s.a.s.)-->
<xs:schema targetNamespace="refund_condition_ctr" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:refund_condition_ctr="refund_condition_ctr">
  <xs:simpleType name="AlphaLength3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alphabetic Strings, length exactly 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaLength3orString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an IntegerLength1to13 or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="refund_condition_ctr:AlphaLength3 refund_condition_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 3.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to14">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used forAlpha-Numeric Strings, length 1 to 14.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,14}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodePatternType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes. It may contain merely codes or integer codes associated to a value in AMA_CodeTable.xls.
Pattern is composed on 3 parts: Standard (AMA or OTA or IATA), ListCode (3 upper case letters) and Code (1 to 3 digits). Code is mandatory. ListName is mandatory if Standard is precised, else it is optional. Standard is optional.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}((\.[0-9A-Z]{3,4})((\.(AMA|OTA|IATA|UIC)){0,1})){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes in the OpenTravel Code tables. Possible values of this pattern are 1, 101, 101.EQP, or 101.EQP.X.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}(\.[A-Z]{3}(\.X){0,1}){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DateOrDateTimeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">A construct to validate either a date or a dateTime value.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:date xs:dateTime"/>
  </xs:simpleType>
  <xs:simpleType name="integerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an integer or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:integer refund_condition_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="ISO3166">
    <xs:annotation>
      <xs:documentation xml:lang="en">Specifies a 2 character country code as defined in ISO3166.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{2}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="MMYYDate">
    <xs:annotation>
      <xs:documentation xml:lang="en">Month and year information.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="(0[1-9]|1[0-2])[0-9][0-9]"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="nonNegativeIntegerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either a nonNegativeInteger or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:nonNegativeInteger refund_condition_ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="Numeric0to4">
    <xs:annotation>
      <xs:documentation>Used for numeric values, from 0 to 4 inclusive.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="4"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="NumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StateProvCodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">The standard code or abbreviation for the state, province, or region</xs:documentation>
    </xs:annotation>
    <xs:restriction base="refund_condition_ctr:StringLength1to8">
      <xs:minLength value="2"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="String0">
    <xs:annotation>
      <xs:documentation>Used for String length 0</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="0"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to128">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 128.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to255">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 255.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="255"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to16">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 16.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="16"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to64">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 64.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="64"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to128">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength3">
    <xs:annotation>
      <xs:documentation>Used for String length 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="3"/>
      <xs:maxLength value="3"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:attributeGroup name="AmountCurrencyAndDecimalPlaceGroup">
    <xs:attribute name="CurrencyCode" type="refund_condition_ctr:AlphaLength3orString0">
      <xs:annotation>
        <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DecimalPlaces" type="refund_condition_ctr:nonNegativeIntegerOrString0">
      <xs:annotation>
        <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Amount" type="refund_condition_ctr:integerOrString0">
      <xs:annotation>
        <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="BerthAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Berth Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list BLT (Level), BST (Size), BPT (Position), BCF (Configuration), ETP (Equipement)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="refund_condition_ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:attributeGroup name="BirthDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to provide a date of birth.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as indicated in the document, in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="EffectiveExpireOptionalDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to send the effective date and/or expiration date.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="EffectiveDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDateExclusiveIndicator" type="xs:boolean" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">When true, indicates that the ExpireDate is the first day after the applicable period (e.g. when expire date is Oct 15  the last date of the period is Oct 14).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="GenderGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to indicate the gender of a person, if known.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Gender" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifies the gender.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Male"/>
          <xs:enumeration value="Female"/>
          <xs:enumeration value="Unknown"/>
          <xs:enumeration value="Male_NoShare"/>
          <xs:enumeration value="Female_NoShare"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PayloadStdAttributes">
    <xs:annotation>
      <xs:documentation xml:lang="en">The PayloadAttributesShoRQ defines the attributes that appear on the root element for all Shopping Request messages.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="TimeStamp" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the creation date and time of the message in UTC using the following format specified by ISO 8601; YYYY-MM-DDThh:mm:ssZ with time values using the 24 hour clock (e.g. 20 November 2003, 1:59:38 pm UTC becomes 2003-11-20T13:59:38Z).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Version" type="xs:decimal" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">For all OpenTravel versioned messages, the version of the message is indicated by a decimal value.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="CorrelationID" type="refund_condition_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allow end-to-end correlation of log messages with the corresponding Web service message throughout the processing of the Web service message.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PlaceAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Place attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="CoachNumber" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="PlaceNumber" use="optional">
      <xs:annotation>
        <xs:documentation>Physical place number.(Left padding with 0 or [space] if needed)</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PrivacyGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Allows for control of the sharing of data between parties.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="ShareSynchInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for synchronization of information held by other travel service providers.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for synchronization of information held by other travel service providers.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ShareMarketInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for marketing purposes.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for marketing purposes.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="SeatAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Seat Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list SDR (Direction), SPS (Position),SCT (Configuration), PPF (PassengerProfile), ETP (Equipment)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="refund_condition_ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:complexType name="BookingType">
    <xs:annotation>
      <xs:documentation>Several Trips information</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="PnrIdentification">
        <xs:annotation>
          <xs:documentation>Provider Record Locator</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="PnrReference" type="xs:string" use="optional">
            <xs:annotation>
              <xs:documentation>Identifier of the reservation in Provider system</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="CreationDate" type="xs:dateTime">
            <xs:annotation>
              <xs:documentation>Creation date of the trip.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Inventory" type="xs:string">
            <xs:annotation>
              <xs:documentation>Reservation system</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Relationship" type="xs:NMTOKEN">
            <xs:annotation>
              <xs:documentation>Parent Record or Child record</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="Passenger" maxOccurs="9">
        <xs:annotation>
          <xs:documentation>Passenger</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence minOccurs="0">
            <xs:element name="Actor" maxOccurs="9">
              <xs:annotation>
                <xs:documentation>Actor</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Name">
                    <xs:complexType>
                      <xs:attribute name="FirstName" type="xs:string"/>
                      <xs:attribute name="LastName" type="xs:string"/>
                      <xs:attribute name="Title" type="xs:string"/>
                      <xs:attribute name="DateOfBirth" type="xs:date"/>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
            <xs:element name="Contact" minOccurs="0" maxOccurs="9">
              <xs:annotation>
                <xs:documentation>Contact</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:choice>
                  <xs:element name="Email" minOccurs="0">
                    <xs:complexType>
                      <xs:simpleContent>
                        <xs:extension base="xs:string"/>
                      </xs:simpleContent>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="Telephone" minOccurs="0">
                    <xs:complexType>
                      <xs:simpleContent>
                        <xs:extension base="xs:string"/>
                      </xs:simpleContent>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="CustomerLoyalty" minOccurs="0">
                    <xs:complexType>
                      <xs:complexContent>
                        <xs:extension base="refund_condition_ctr:CustomerLoyaltyType">
                          <xs:sequence>
                            <xs:element name="VendorCompany" type="refund_condition_ctr:CompanyNameType"/>
                          </xs:sequence>
                        </xs:extension>
                      </xs:complexContent>
                    </xs:complexType>
                  </xs:element>
                </xs:choice>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
                <xs:attribute name="PaxIDs" type="xs:IDREFS">
                  <xs:annotation>
                    <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="Reservation">
        <xs:annotation>
          <xs:documentation>Reservation item</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Warning" type="refund_condition_ctr:WarningType" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Warning</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Product" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Service, Supplement, Ancillary service</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="refund_condition_ctr:ProductType">
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Schedule" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Schedule</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Departure" type="refund_condition_ctr:DateTimeLocationType">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
                    </xs:annotation>
                  </xs:element>
                  <xs:element name="Arrival" type="refund_condition_ctr:DateTimeLocationType">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
                    </xs:annotation>
                  </xs:element>
                  <xs:sequence>
                    <xs:element name="Segment" maxOccurs="99">
                      <xs:complexType>
                        <xs:complexContent>
                          <xs:extension base="refund_condition_ctr:SegmentType">
                            <xs:attribute name="ID" type="xs:ID" use="required">
                              <xs:annotation>
                                <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="Status" type="refund_condition_ctr:StringLength1to8" use="required"/>
                          </xs:extension>
                        </xs:complexContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:sequence>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
            <xs:element name="AccommodationPreferences" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Accommodation</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="refund_condition_ctr:RequestedAccommodationType">
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                    <xs:attribute name="SegID" type="xs:IDREF" use="required"/>
                    <xs:attribute name="PaxID" type="xs:IDREF" use="required"/>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Reduction" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Reduction</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="refund_condition_ctr:ReductionTypeDetails">
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                    <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Pricing" minOccurs="0">
              <xs:annotation>
                <xs:documentation>Pricing</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="refund_condition_ctr:PricingReplyType">
                    <xs:sequence>
                      <xs:element name="Fare" minOccurs="0" maxOccurs="99">
                        <xs:annotation>
                          <xs:documentation>QuotingRule</xs:documentation>
                        </xs:annotation>
                        <xs:complexType>
                          <xs:complexContent>
                            <xs:extension base="refund_condition_ctr:FareType">
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="SegIDs" type="xs:IDREFS" use="optional"/>
                              <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                            </xs:extension>
                          </xs:complexContent>
                        </xs:complexType>
                      </xs:element>
                      <xs:element name="TotalQuote" minOccurs="0" maxOccurs="99">
                        <xs:annotation>
                          <xs:documentation>Quotation</xs:documentation>
                        </xs:annotation>
                        <xs:complexType>
                          <xs:complexContent>
                            <xs:extension base="refund_condition_ctr:TotalQuoteType"/>
                          </xs:complexContent>
                        </xs:complexType>
                      </xs:element>
                      <xs:element name="DetailQuote" maxOccurs="99">
                        <xs:complexType>
                          <xs:sequence>
                            <xs:element name="Price">
                              <xs:complexType>
                                <xs:attribute name="CurrencyCode" type="refund_condition_ctr:AlphaLength3" use="required">
                                  <xs:annotation>
                                    <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="DecimalPlaces" type="refund_condition_ctr:Numeric0to4" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Amount" type="xs:integer" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:complexType>
                            </xs:element>
                            <xs:element name="Tax" minOccurs="0">
                              <xs:complexType>
                                <xs:attribute name="CurrencyCode" type="refund_condition_ctr:AlphaLength3" use="required">
                                  <xs:annotation>
                                    <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="DecimalPlaces" type="refund_condition_ctr:Numeric0to4" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Amount" type="xs:integer" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Type of Tax</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:complexType>
                            </xs:element>
                            <xs:element name="Fee" minOccurs="0">
                              <xs:complexType>
                                <xs:attribute name="CurrencyCode" type="refund_condition_ctr:AlphaLength3" use="required">
                                  <xs:annotation>
                                    <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="DecimalPlaces" type="refund_condition_ctr:Numeric0to4" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Amount" type="xs:integer" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Type of Fee</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                          <xs:attribute name="ID" type="xs:ID">
                            <xs:annotation>
                              <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="PrdIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Product IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="SegIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="PaxIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="AccIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Accomodation IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="RedIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Reduction IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="FareIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Fare IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="MethodOfPayment" minOccurs="0">
              <xs:complexType>
                <xs:choice>
                  <xs:element name="Card">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="AddressVerificationSystemValue" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Credit Card holder's address</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:sequence>
                              <xs:element name="Line" type="refund_condition_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
                                <xs:annotation>
                                  <xs:documentation>Street and number on first line. Building, Floor etc... on following lines</xs:documentation>
                                </xs:annotation>
                              </xs:element>
                            </xs:sequence>
                            <xs:attribute name="CityName" type="refund_condition_ctr:StringLength1to64"/>
                            <xs:attribute name="PostalCode" type="refund_condition_ctr:StringLength1to16">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Post Office Code number.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="Country" type="refund_condition_ctr:StringLength1to32">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">ISO 3166 code for the country</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="MagneticTrack" minOccurs="0" maxOccurs="4">
                          <xs:annotation>
                            <xs:documentation>Contains Data of the Magnetic Stripe of the Credit Card</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:simpleContent>
                              <xs:extension base="refund_condition_ctr:StringLength0to255">
                                <xs:attribute name="Type"/>
                              </xs:extension>
                            </xs:simpleContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="Issuance" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Information about the issuing bank and country</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:sequence>
                              <xs:element name="Bank">
                                <xs:complexType>
                                  <xs:attribute name="Name" type="refund_condition_ctr:StringLength1to128">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">Full name of the issuing bank</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="ID" type="refund_condition_ctr:StringLength1to64">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">Code of bank issuing the card.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:complexType>
                              </xs:element>
                            </xs:sequence>
                            <xs:attribute name="Country" type="refund_condition_ctr:StringLength1to32">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Credit Card country of issuance</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="PrimaryAccountNumber" type="refund_condition_ctr:StringLength1to32" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Credit card number embossed on the front of the card.</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element name="CVV" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Verification digits printed on the back of the card usually (CardVerificationValue).</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:simpleContent>
                              <xs:extension base="refund_condition_ctr:StringLength1to8">
                                <xs:attribute name="KnoxID" type="refund_condition_ctr:StringLength1to32">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">KnoxID of the CVV</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:extension>
                            </xs:simpleContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="ApprovalCode" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>A series of characters assigned by the applicable credit card company's authorization system to confirm the approval of a credit sale transaction.</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:simpleContent>
                              <xs:extension base="refund_condition_ctr:StringLength1to16">
                                <xs:attribute name="Source" type="refund_condition_ctr:StringLength3">
                                  <xs:annotation>
                                    <xs:documentation>Can be A if it comes from Amadeus Payment Server, or N if entered manually by an Agent</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:extension>
                            </xs:simpleContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="Vendor" minOccurs="0">
                          <xs:complexType>
                            <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to8">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">The 2 character code of the credit card issuer.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="SubType" type="refund_condition_ctr:StringLength1to8">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">To identify a subtype of credit cards</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="Validity" minOccurs="0">
                          <xs:complexType>
                            <xs:attribute name="StartDate" type="refund_condition_ctr:MMYYDate">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="EndDate" type="refund_condition_ctr:MMYYDate">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                      </xs:sequence>
                      <xs:attribute name="HolderName" type="refund_condition_ctr:StringLength1to128">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">Name of credit card holder.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                      <xs:attribute name="FraudStatus" type="refund_condition_ctr:StringLength1to8">
                        <xs:annotation>
                          <xs:documentation>Can be OK, KO or RW (pending).</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="Invoice">
                    <xs:complexType>
                      <xs:attribute name="Reference" type="refund_condition_ctr:StringLength1to64"/>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="Cash"/>
                </xs:choice>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
            <xs:element name="TicketingOption" minOccurs="0">
              <xs:annotation>
                <xs:documentation>TicketingOption</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="refund_condition_ctr:TicketingOptionType">
                    <xs:sequence>
                      <xs:element name="ContactList" minOccurs="0" maxOccurs="9">
                        <xs:complexType>
                          <xs:attribute name="ID" type="xs:ID">
                            <xs:annotation>
                              <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="CtnID" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Contact IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Contract" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Contract</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="refund_condition_ctr:ContractType">
                    <xs:sequence>
                      <xs:element name="Document" minOccurs="0" maxOccurs="99">
                        <xs:annotation>
                          <xs:documentation>Document</xs:documentation>
                        </xs:annotation>
                        <xs:complexType>
                          <xs:simpleContent>
                            <xs:extension base="xs:string">
                              <xs:attribute name="Type" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Type. URL, 2DBarCode, etc.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Version" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>API or Standard version</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Source" type="xs:NMTOKENS">
                                <xs:annotation>
                                  <xs:documentation>Reservation system</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Encoding" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Encoding name. BASE64, etc.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Size" type="xs:positiveInteger" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Size of Document content</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="NumberOfCoupons" type="xs:positiveInteger">
                                <xs:annotation>
                                  <xs:documentation>Quantity of physical coupons</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:extension>
                          </xs:simpleContent>
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
          <xs:attribute name="ID" type="xs:ID">
            <xs:annotation>
              <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="CampaignTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Campaign reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The campaign code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ContractType">
    <xs:sequence>
      <xs:element name="Price" type="refund_condition_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="refund_condition_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="refund_condition_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="ID" type="xs:ID">
      <xs:annotation>
        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PaxIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SegIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Accomodation IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="TkoIDs" type="xs:IDREF" use="optional">
      <xs:annotation>
        <xs:documentation>It can contain a list of Ticketing Option IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MopIDs" type="xs:IDREF" use="optional">
      <xs:annotation>
        <xs:documentation>It can contain a list of Method of Payment IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="CtrIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Contract IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Number" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Main Contract Number</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Status" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Contract status. Ticketed, Refunded, etc. See RDP code type list TSS.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SecondNumber" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Second Contract Number</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="IssueDate" type="refund_condition_ctr:DateOrDateTimeType" use="optional">
      <xs:annotation>
        <xs:documentation>Issuance date/date and time of the provider</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="StartValidityDate" type="xs:dateTime">
      <xs:annotation>
        <xs:documentation>Start validity date</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="EndValidityDate" type="xs:dateTime">
      <xs:annotation>
        <xs:documentation>End validity date</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="NumberOfPassengers" type="xs:positiveInteger" use="optional">
      <xs:annotation>
        <xs:documentation>NumberOfPassenger, NumberInParty (NIP)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Properties" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Properties.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CorporateTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Corporate reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Type">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Contract">
      <xs:annotation>
        <xs:documentation xml:lang="en">The contract number associated to the corporate code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PassengerCategoryDetails">
    <xs:annotation>
      <xs:documentation>Describes a Passenger category reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Context">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CompanyNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Identifies a company by name.</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="refund_condition_ctr:StringLength0to128">
        <xs:annotation>
          <xs:documentation xml:lang="en">Provides detailed information on a company.</xs:documentation>
        </xs:annotation>
        <xs:attribute name="Division" type="refund_condition_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The division name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="Department" type="refund_condition_ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The department name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CustomerLoyaltyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Program rewarding frequent use by accumulating credits for services provided by vendors. This type is based on OTA_CommonTypes-CustLoyaltyType</xs:documentation>
    </xs:annotation>
    <xs:attribute name="MembershipID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique identifier of the member in the program (membership number, account number, etc.).</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="refund_condition_ctr:StringLength1to32">
          <xs:minLength value="1"/>
          <xs:maxLength value="32"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ProgramID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="refund_condition_ctr:AlphaNumericStringLength1to3">
          <xs:minLength value="1"/>
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ExpirationDate" type="refund_condition_ctr:DateOrDateTimeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DateTimeLocationType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes DateTime and Location</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="refund_condition_ctr:StringLength1to16">
              <xs:attribute name="Context" type="refund_condition_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="LocationName" type="refund_condition_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Name of the location</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DateTime" type="refund_condition_ctr:DateOrDateTimeType">
      <xs:annotation>
        <xs:documentation>Date and optional time</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DetailQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="refund_condition_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="refund_condition_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="refund_condition_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="BookingToken" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DocumentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Provides information on a specific document.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice minOccurs="0">
        <xs:element name="DocHolderName" type="refund_condition_ctr:StringLength1to64" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of the document holder in unformatted text (Mr. Sam Jones).</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="DocHolderFormattedName" type="refund_condition_ctr:PersonNameType" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of document holder in formatted text.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="DocLimitations" type="refund_condition_ctr:StringLength1to64" minOccurs="0" maxOccurs="9">
        <xs:annotation>
          <xs:documentation xml:lang="en">Used to indicate any limitations on the document (e.g. as a person may only be allowed to spend a max of 30 days in country on a visitor's visa).</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="AdditionalPersonNames" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">A container for additional person names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="AdditionalPersonName" type="refund_condition_ctr:StringLength1to64" maxOccurs="99">
              <xs:annotation>
                <xs:documentation xml:lang="en">The name of an additional person listed on this document.</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="refund_condition_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of document data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueAuthority" type="refund_condition_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the group or association that granted the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueLocation" type="refund_condition_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the location where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocID" type="refund_condition_ctr:StringLength1to32" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocType" type="refund_condition_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="refund_condition_ctr:GenderGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The gender of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="refund_condition_ctr:BirthDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The birth date of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="refund_condition_ctr:EffectiveExpireOptionalDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The effective and expiry date of the document.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueStateProv" type="refund_condition_ctr:StateProvCodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">State or Province where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueCountry" type="refund_condition_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Country where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthCountry" type="refund_condition_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth country of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthPlace" type="refund_condition_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth place of the document holder (e.g., city, state, county, province), when designating a country of birth, use BirthCountry.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocHolderNationality" type="refund_condition_ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The country code of the nationality of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ContactName" type="refund_condition_ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides contact name associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="HolderType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides the type of document holder.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Infant">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is an infant.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="HeadOfHousehold">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is a head of household.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Remark" type="refund_condition_ctr:StringLength1to128" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">A remark associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PostalCode" type="refund_condition_ctr:StringLength1to16" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Defines the postal code (e.g., ZIP code) on the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ErrorType">
    <xs:annotation>
      <xs:documentation>Describes an Error</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="refund_condition_ctr:StringLength0to255">
        <xs:attribute name="Code" type="refund_condition_ctr:NumericStringLength1to8" use="required"/>
        <xs:attribute name="Type" default="System">
          <xs:simpleType>
            <xs:restriction base="xs:NMTOKEN">
              <xs:enumeration value="System"/>
              <xs:enumeration value="Functional"/>
              <xs:enumeration value="Provider"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="FareType">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="refund_condition_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule with all details</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PassengerLimits" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Defines the minimum and maximum number of passengers for which this quoting rule is eligible.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="MinPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The minimum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="MaxPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The maximum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="refund_condition_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeRQ">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule request</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="LocationType">
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="refund_condition_ctr:StringLength1to16">
              <xs:attribute name="Context" type="refund_condition_ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PersonNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">This provides name information for a person.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="NamePrefix" type="refund_condition_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Salutation of honorific (e.g. Mr., Mrs., Ms., Miss, Dr.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="GivenName" type="refund_condition_ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Given name, first name or names.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MiddleName" type="refund_condition_ctr:StringLength1to64" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">The middle name of the person name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="SurnamePrefix" type="refund_condition_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The surname prefix, e.g "van der", "von", "de".</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Surname" type="refund_condition_ctr:StringLength1to64">
        <xs:annotation>
          <xs:documentation xml:lang="en">Family name, last name. May also be used for full name if the sending system does not have the ability to separate a full name into its parts, e.g. the surname element may be used to pass the full name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameSuffix" type="refund_condition_ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Hold various name suffixes and letters (e.g. Jr., Sr., III, Ret., Esq.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameTitle" type="refund_condition_ctr:StringLength1to16" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Degree or honors (e.g., Ph.D., M.D.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Document" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Document  information for verification purposes and also used for additional filtering for common names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="DocID" type="refund_condition_ctr:StringLength1to32" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DocType" type="refund_condition_ctr:CodeType" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="refund_condition_ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of person name data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="NameType" type="refund_condition_ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of name of the individual, such as former, nickname, alternate or alias name. Refer to OpenTravel Code List Name Type (NAM).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PriceType">
    <xs:annotation>
      <xs:documentation>Describes a Price</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="refund_condition_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
  </xs:complexType>
  <xs:complexType name="ProductType">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item. It refers to the code list PTY</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type. It refers to the code list TCC</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="refund_condition_ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description" type="xs:string">
      <xs:annotation>
        <xs:documentation>It is the description of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductTypeRQ">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item (Transport, Transport with seat, Ancillary). It refers to the code list SET.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingSolutionType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TotalQuote" type="refund_condition_ctr:TotalQuoteType" minOccurs="0"/>
      <xs:element name="DetailQuote" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Quote</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="refund_condition_ctr:DetailQuoteType">
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PaxIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="RedIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Reduction IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="FareIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Fare IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PrdIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Service IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="TicketingOption" type="refund_condition_ctr:TicketingOptionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Ticket type and delivery method</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ToBeSoldWith" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Booking Constraints Linkage (It's an OR, not an AND)</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="PslIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of PricingSolution IDs which the element refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="refund_condition_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
    <xs:attribute name="Avail" type="xs:int">
      <xs:annotation>
        <xs:documentation>It is the numerical availability.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AvailLevel" type="refund_condition_ctr:AlphaNumericStringLength1to3">
      <xs:annotation>
        <xs:documentation>This indicator inform the client on the level of availability.  It refers to the code list AVL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Fare" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Applied Fares</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="refund_condition_ctr:FareType">
              <xs:attribute name="ID" type="xs:ID" use="optional">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PricingSolution" minOccurs="0" maxOccurs="1999">
        <xs:annotation>
          <xs:documentation>Collection of prices and products</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="refund_condition_ctr:PricingSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SslIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of ScheduleSolution IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PricingReplyType"/>
  <xs:complexType name="ScheduleQueryType">
    <xs:annotation>
      <xs:documentation>Describes a Schedule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="refund_condition_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="refund_condition_ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="DateTime">
        <xs:annotation>
          <xs:documentation>Date and optional time. It can be the departure time or the arrival time</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:choice>
            <xs:element name="Departure" type="refund_condition_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the departure time</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Arrival" type="refund_condition_ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the arrival time</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:complexType>
      </xs:element>
      <xs:element name="SearchCriteria" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Used to restrict the schedule solutions based on specific criteria</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>It describes any search criteria according to the code list</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="refund_condition_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">It is the value of the search criteria specified in the code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleReplyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Segment" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>Portion of an schedule solution, including all legs which are listed under the same train number or identifier.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="refund_condition_ctr:SegmentType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="ScheduleSolution" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>An schedule solution</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="refund_condition_ctr:ScheduleSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="refund_condition_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleSolutionType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="refund_condition_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode and departure dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="refund_condition_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode and arrival dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration from the departure location to destination.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SearchCriteriaType">
    <xs:annotation>
      <xs:documentation>Describes Search Criteria</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TravelClass" maxOccurs="9">
        <xs:annotation>
          <xs:documentation>Describes any preferences in terms of travel class. Refer to code list TCC.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SegmentShortType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="refund_condition_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="refund_condition_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="refund_condition_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="refund_condition_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Vehicle" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Contains vehicle characteristics</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle Code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DisplayName" type="refund_condition_ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle name.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration of the train from departure location to destination location.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentTypeRQ">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment information for booking query</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="refund_condition_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="refund_condition_ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="refund_condition_ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="refund_condition_ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RailCardDetails">
    <xs:annotation>
      <xs:documentation>Describes a Railcard reduction</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="refund_condition_ctr:StringLength0to128">
        <xs:attribute name="Code">
          <xs:annotation>
            <xs:documentation xml:lang="en">A code identifying the type of card. Refer to code list RCC.</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="6"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="Number">
          <xs:annotation>
            <xs:documentation xml:lang="en">Railcard number</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="45"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="RailcardId" type="xs:string">
          <xs:annotation>
            <xs:documentation>An ID authorizing the use of the card.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="RailCardNumberRequired" type="xs:boolean"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="ReductionType">
    <xs:annotation>
      <xs:documentation>Describes a Reduction request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailcardCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a railcard reduction</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CorporateCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a corporate reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CampaignCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a campaign reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="PassengerCategoryCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a passenger category not related with age. It refers to the code list PGC.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="VendorCompanyCode" type="refund_condition_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ReductionTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Reduction</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailCardDetails" type="refund_condition_ctr:RailCardDetails"/>
        <xs:element name="CorporateTypeDetails" type="refund_condition_ctr:CorporateTypeDetails"/>
        <xs:element name="CampaignTypeDetails" type="refund_condition_ctr:CampaignTypeDetails"/>
        <xs:element name="PassengerCategoryDetails" type="refund_condition_ctr:PassengerCategoryDetails"/>
      </xs:choice>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Condition of the reduction</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Code">
                <xs:simpleType>
                  <xs:restriction base="xs:string"/>
                </xs:simpleType>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="VendorCompanyCode" type="refund_condition_ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RequestedAccommodationType">
    <xs:annotation>
      <xs:documentation>Criteria for accommodation request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Option" minOccurs="0" maxOccurs="99">
        <xs:complexType>
          <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to16" use="required">
            <xs:annotation>
              <xs:documentation>See RDP code type list DKL (Deck level), GDT (Gender), PET (Pets allowed), SMK (Smoking), BIK (Bike space), ERT (Environment)</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="refund_condition_ctr:StringLength1to16" use="required"/>
        </xs:complexType>
      </xs:element>
      <xs:choice>
        <xs:element name="SeatOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="refund_condition_ctr:SeatAttributesGroup"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="BerthOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="refund_condition_ctr:BerthAttributesGroup"/>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Seat, Berth, etc. See RDP code type list ACT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="refund_condition_ctr:PlaceAttributesGroup"/>
    <xs:attribute name="NearTo" type="xs:boolean" use="optional" default="false">
      <xs:annotation>
        <xs:documentation>If true the system may return a place near the given one if this place is not available. If false the system try to get only the specified place.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="refund_condition_ctr:SegmentShortType">
        <xs:sequence>
          <xs:element name="CO2Emissions" minOccurs="0">
            <xs:annotation>
              <xs:documentation xml:lang="en">Value and units of the CO2 emissions in the segment</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="xs:decimal">
                  <xs:attribute name="Unit" type="xs:NMTOKEN"/>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="ServiceOnBoard" minOccurs="0" maxOccurs="99">
            <xs:annotation>
              <xs:documentation xml:lang="en">Refer to code list SOB.</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="refund_condition_ctr:StringLength0to32">
                  <xs:attribute name="Code" type="refund_condition_ctr:StringLength1to16" use="optional">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="InformationMessage" type="xs:string" minOccurs="0">
            <xs:annotation>
              <xs:documentation>Information text to display</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="TaxType">
    <xs:annotation>
      <xs:documentation>Describes a Tax</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="refund_condition_ctr:AmountCurrencyAndDecimalPlaceGroup"/>
    <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of Tax. It refers to FTT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TicketingOptionType">
    <xs:annotation>
      <xs:documentation>Describes a Ticketing Option</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="refund_condition_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Type of ticket. Refer to code list TTY.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DeliveryMode" type="refund_condition_ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Code of the method of delivery. Refer to code list DMD</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TotalQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="refund_condition_ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="refund_condition_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="refund_condition_ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UnnamedPassengerType">
    <xs:annotation>
      <xs:documentation>Describes a Passenger</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Reduction" type="refund_condition_ctr:ReductionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Indicate a reduction (railcard, corporate code, etc.) applicable to the passenger</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="WarningType">
    <xs:annotation>
      <xs:documentation>Describes a Warning</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="refund_condition_ctr:StringLength0to255">
        <xs:attribute name="Code" type="refund_condition_ctr:NumericStringLength1to8" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/refund_condition/xsd/RailConnect_GetRefundConditionsRQ.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2013 rel. 2 sp2 (x64) (http://www.altova.com) by ﻿AMADEUS s.a.s. (AMADEUS s.a.s.)-->
<xs:schema targetNamespace="GetRefundConditionsRQ" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:GetRefundConditionsRQ="GetRefundConditionsRQ" xmlns:refund_condition_ctr="refund_condition_ctr">
  <xs:element name="RailConnect_GetRefundConditionsRQ">
    <xs:annotation>
      <xs:documentation>Get the refund conditions associated to the contracts</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PnrIdentification" minOccurs="0">
          <xs:annotation>
            <xs:documentation>Provider Record Locator</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:attribute name="PnrReference" type="xs:string" use="optional">
              <xs:annotation>
                <xs:documentation>Identifier of the reservation in Provider system</xs:documentation>
              </xs:annotation>
            </xs:attribute>
            <xs:attribute name="Inventory" type="xs:string">
              <xs:annotation>
                <xs:documentation>Reservation system</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
        <xs:element name="ContractSelection" minOccurs="0" maxOccurs="1">
          <xs:annotation>
            <xs:documentation>list of contracts for which refund conditions are requested</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:attribute name="RefContractNumbers" type="xs:NMTOKENS" use="optional">
              <xs:annotation>
                <xs:documentation>References to contract numbers incase of contracts without PNR (refund post departure
                  up to 6 months)</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
        <xs:element name="Options" minOccurs="0">
          <xs:annotation>
            <xs:documentation>Refund options to apply</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Remark" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>Remarks</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                        <xs:annotation>
                          <xs:documentation>Standard, Accounting, etc.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
            <xs:attribute name="ReasonCode" type="xs:NMTOKEN" use="optional">
              <xs:annotation>
                <xs:documentation>The refund reason code (passenger request, strike, operator error, approved by
                  provider, etc.). Refer to code list RRC.</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attributeGroup ref="refund_condition_ctr:PayloadStdAttributes"/>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is
            identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/refund_condition/xsd/RailConnect_GetRefundConditionsRS.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2013 rel. 2 sp2 (x64) (http://www.altova.com) by ﻿AMADEUS s.a.s. (AMADEUS s.a.s.)-->
<xs:schema targetNamespace="GetRefundConditionsRS" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:GetRefundConditionsRS="GetRefundConditionsRS" xmlns:refund_condition_ctr="refund_condition_ctr">
  <xs:element name="RailConnect_GetRefundConditionsRS">
    <xs:annotation>
      <xs:documentation>User response with rail contract(s) refund conditions</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:choice>
        <xs:element name="Success">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="refund_condition_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Booking" type="refund_condition_ctr:BookingType" minOccurs="0"/>
              <xs:element name="Contract" minOccurs="0" maxOccurs="99">
                <xs:annotation>
                  <xs:documentation>Requested contracts</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="refund_condition_ctr:ContractType">
                      <xs:sequence>
                        <xs:element name="Quote" minOccurs="0" maxOccurs="9">
                          <xs:annotation>
                            <xs:documentation>Informative refund amounts (penalty, resulting amount, etc..)</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:complexContent>
                              <xs:extension base="refund_condition_ctr:PriceType">
                                <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Type of Price</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:extension>
                            </xs:complexContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="TaxQuote" type="refund_condition_ctr:TaxType" minOccurs="0" maxOccurs="9">
                          <xs:annotation>
                            <xs:documentation>Informative refund tax amounts</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                      </xs:sequence>
                      <xs:attribute name="Refundable" type="xs:boolean"/>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Quote" minOccurs="0" maxOccurs="9">
                <xs:annotation>
                  <xs:documentation>Informative total refund amounts (penalty, resulting amount, etc..)</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="refund_condition_ctr:PriceType">
                      <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">Type of Price</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Options" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>Refund options that will apply</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="Remark" minOccurs="0">
                      <xs:annotation>
                        <xs:documentation>Remarks</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute name="SegIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="PaxIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="PrdIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Product IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="AccIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Accomodation IDs which the element refers
                                  to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="ContrIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Contract IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                              <xs:annotation>
                                <xs:documentation>Standard, Accounting, etc.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute name="ReasonCode" type="xs:NMTOKEN" use="optional">
                    <xs:annotation>
                      <xs:documentation>The refund reason code (passenger request, strike, operator error, approved by
                        provider, etc.). Refer to code list RRC.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Failure">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="refund_condition_ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Error" type="refund_condition_ctr:ErrorType" minOccurs="0" maxOccurs="99"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
      <xs:attributeGroup ref="refund_condition_ctr:PayloadStdAttributes"/>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is
            identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://dev.amr.local/railconnect/refund_condition</con:endpoint></con:endpoints><con:operation id="f6aee61a-693c-4e3c-a125-017543d5636e" isOneWay="false" action="https://dev.amr.local/railconnect/refund_condition" name="refundConditionAction" bindingOperationName="refundConditionAction" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="7eb63c15-8c76-41ba-8981-c7e2f4823ab0" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">\r
   <soap:Header/>\r
   <soap:Body>\r
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">\r
         <!--Optional:-->\r
         <PnrIdentification PnrReference="?" Inventory="?"/>\r
         <!--Optional:-->\r
         <ContractSelection RefContractNumbers="?"/>\r
         <!--Optional:-->\r
         <Options ReasonCode="?">\r
            <!--Optional:-->\r
            <Remark Type="?">?</Remark>\r
         </Options>\r
      </get:RailConnect_GetRefundConditionsRQ>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="railconnect_ws/RailConnectWSPortRefundConditions/refundConditionActionRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:interface xsi:type="con:WsdlInterface" id="1c970a08-4509-42f7-939a-422a2f7f4599" wsaVersion="NONE" name="RailConnectWSCommitRefund" type="wsdl" bindingName="{railconnect_ws}RailConnectWSCommitRefund" soapVersion="1_2" anonymous="optional" definition="https://dev.amr.local/railconnect/commit_refund/wsdl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:settings/><con:definitionCache type="TEXT" rootPart="https://dev.amr.local/railconnect/commit_refund/wsdl"><con:part><con:url>https://dev.amr.local/railconnect/commit_refund/wsdl</con:url><con:content><![CDATA[<definitions name="RailConnectWS" targetNamespace="railconnect_ws" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="railconnect_ws" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soap-enc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:CommitRefundRQ="CommitRefundRQ" xmlns:CommitRefundRS="CommitRefundRS" xmlns="http://schemas.xmlsoap.org/wsdl/">
  <types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema">
      <import namespace="CommitRefundRQ" schemaLocation="xsd/RailConnect_CommitRefundRQ.xsd"/>
      <import namespace="CommitRefundRS" schemaLocation="xsd/RailConnect_CommitRefundRS.xsd"/>
      <!--<import namespace="ctr" schemaLocation="xsd/Type/RailConnect_Refund_CTR_Types.xsd"/>-->
    </schema>
  </types>
  <message name="commitRefundActionIn">
    <part name="request" element="CommitRefundRQ:RailConnect_CommitRefundRQ"/>
  </message>
  <message name="commitRefundActionOut">
    <part name="return" element="CommitRefundRS:RailConnect_CommitRefundRS"/>
  </message>
  <portType name="RailConnectWSPortCommitRefund">
    <operation name="commitRefundAction">
      <input message="tns:commitRefundActionIn"/>
      <output message="tns:commitRefundActionOut"/>
    </operation>
  </portType>
  <binding name="RailConnectWSCommitRefund" type="tns:RailConnectWSPortCommitRefund">
    <soap12:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="commitRefundAction">
      <soap12:operation soapAction="https://dev.amr.local/railconnect/commit_refund" soapActionRequired="true" style="document"/>
      <input>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </input>
      <output>
        <soap12:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="railconnect_ws"/>
      </output>
    </operation>
  </binding>
  <service name="RailConnectWSServiceCommitRefund">
    <port name="PortCommitRefund" binding="tns:RailConnectWSCommitRefund">
      <soap12:address location="https://dev.amr.local/railconnect/commit_refund"/>
    </port>
  </service>
</definitions>]]></con:content><con:type>http://schemas.xmlsoap.org/wsdl/</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/commit_refund/xsd/RailConnect_CommitRefundRQ.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2013 rel. 2 sp2 (x64) (http://www.altova.com) by ﻿AMADEUS s.a.s. (AMADEUS s.a.s.)-->
<xs:schema elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" targetNamespace="CommitRefundRQ" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ctr="ctr">
  <xs:import namespace="ctr" schemaLocation="Type/RailConnect_Commit_Refund_CTR_Types.xsd"/>
  <xs:element name="RailConnect_CommitRefundRQ">
    <xs:annotation>
      <xs:documentation>Commit the refund of the contracts of the refund context</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:sequence>
        <xs:element name="PnrIdentification" minOccurs="0">
          <xs:annotation>
            <xs:documentation>Provider Record Locator</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:attribute name="PnrReference" type="xs:string" use="optional">
              <xs:annotation>
                <xs:documentation>Identifier of the reservation in Provider system</xs:documentation>
              </xs:annotation>
            </xs:attribute>
            <xs:attribute name="Inventory" type="xs:string">
              <xs:annotation>
                <xs:documentation>Reservation system</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
        <xs:element name="ContractSelection" minOccurs="0" maxOccurs="1">
          <xs:annotation>
            <xs:documentation>list of contracts for which refund conditions are requested</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:attribute name="RefContractNumbers" type="xs:NMTOKENS" use="optional">
              <xs:annotation>
                <xs:documentation>References to contract numbers incase of contracts without PNR (refund post departure
                  up to 6 months)</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
        <xs:element name="MethodOfPayment" minOccurs="0" maxOccurs="99">
          <xs:annotation>
            <xs:documentation>MethodOfPayment</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:choice>
              <xs:element name="Card" minOccurs="0">
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="AddressVerificationSystemValue" minOccurs="0">
                      <xs:annotation>
                        <xs:documentation>Credit Card holder's address</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="Line" type="ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
                            <xs:annotation>
                              <xs:documentation>Street and number on first line. Building, Floor etc... on following
                                lines</xs:documentation>
                            </xs:annotation>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="CityName" type="ctr:StringLength1to64"/>
                        <xs:attribute name="PostalCode" type="ctr:StringLength1to16">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Post Office Code number.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="Country" type="ctr:StringLength1to32">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">ISO 3166 code for the country</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="MagneticTrack" minOccurs="0" maxOccurs="4">
                      <xs:annotation>
                        <xs:documentation>Contains Data of the Magnetic Stripe of the Credit Card</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="ctr:StringLength0to255">
                            <xs:attribute name="Type"/>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Issuance" minOccurs="0">
                      <xs:annotation>
                        <xs:documentation>Information about the issuing bank and country</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:sequence>
                          <xs:element name="Bank">
                            <xs:complexType>
                              <xs:attribute name="Name" type="ctr:StringLength1to128">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Full name of the issuing bank</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="ID" type="ctr:StringLength1to64">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">Code of bank issuing the card.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:complexType>
                          </xs:element>
                        </xs:sequence>
                        <xs:attribute name="Country" type="ctr:StringLength1to32">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Credit Card country of issuance</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="PrimaryAccountNumber" type="ctr:StringLength1to32" minOccurs="0">
                      <xs:annotation>
                        <xs:documentation>Credit card number embossed on the front of the card.</xs:documentation>
                      </xs:annotation>
                    </xs:element>
                    <xs:element name="CVV" minOccurs="0">
                      <xs:annotation>
                        <xs:documentation>Verification digits printed on the back of the card usually
                          (CardVerificationValue).</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="ctr:StringLength1to8">
                            <xs:attribute name="KnoxID" type="ctr:StringLength1to32">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">KnoxID of the CVV</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="ApprovalCode" minOccurs="0">
                      <xs:annotation>
                        <xs:documentation>A series of characters assigned by the applicable credit card company's
                          authorization system to confirm the approval of a credit sale transaction.</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="ctr:StringLength1to16">
                            <xs:attribute name="Source" type="ctr:StringLength3">
                              <xs:annotation>
                                <xs:documentation>Can be A if it comes from Amadeus Payment Server, or N if entered
                                  manually by an Agent</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Vendor" minOccurs="0">
                      <xs:complexType>
                        <xs:attribute name="Code" type="ctr:StringLength1to8">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">The 2 character code of the credit card issuer.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="SubType" type="ctr:StringLength1to8">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">To identify a subtype of credit cards</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                    <xs:element name="Validity" minOccurs="0">
                      <xs:complexType>
                        <xs:attribute name="StartDate" type="ctr:MMYYDate">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                        <xs:attribute name="EndDate" type="ctr:MMYYDate">
                          <xs:annotation>
                            <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
                          </xs:annotation>
                        </xs:attribute>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute name="HolderName" type="ctr:StringLength1to128">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Name of credit card holder.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                  <xs:attribute name="FraudStatus" type="ctr:StringLength1to8">
                    <xs:annotation>
                      <xs:documentation>Can be OK, KO or RW (pending).</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:complexType>
              </xs:element>
              <xs:element name="Invoice" minOccurs="0">
                <xs:complexType>
                  <xs:attribute name="Reference" type="ctr:StringLength1to64"/>
                </xs:complexType>
              </xs:element>
              <xs:element name="Cash" minOccurs="0"/>
            </xs:choice>
          </xs:complexType>
        </xs:element>
        <xs:element name="FormatAndDelivery" type="ctr:TicketingOptionType" minOccurs="0">
          <xs:annotation>
            <xs:documentation>FormatAndDelivery</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="Options" minOccurs="0">
          <xs:annotation>
            <xs:documentation>Refund options to apply</xs:documentation>
          </xs:annotation>
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Remark" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>Remarks</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:simpleContent>
                    <xs:extension base="xs:string">
                      <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                        <xs:annotation>
                          <xs:documentation>Standard, Accounting, etc.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:simpleContent>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
            <xs:attribute name="ReasonCode" type="xs:NMTOKEN" use="optional">
              <xs:annotation>
                <xs:documentation>The refund reason code (passenger request, strike, operator error, approved by
                  provider, etc.). Refer to code list RRC.</xs:documentation>
              </xs:annotation>
            </xs:attribute>
          </xs:complexType>
        </xs:element>
      </xs:sequence>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is
            identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Options" type="xs:NMTOKENS">
        <xs:annotation>
          <xs:documentation/>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attributeGroup ref="ctr:PayloadStdAttributes"/>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/commit_refund/xsd/Type/RailConnect_Commit_Refund_CTR_Types.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2013 rel. 2 sp2 (x64) (http://www.altova.com) by ﻿AMADEUS s.a.s. (AMADEUS s.a.s.)-->
<xs:schema targetNamespace="ctr" elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ctr="ctr">
  <xs:simpleType name="AlphaLength3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alphabetic Strings, length exactly 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaLength3orString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an IntegerLength1to13 or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="ctr:AlphaLength3 ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to3">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 3.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,3}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Alpha-Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="AlphaNumericStringLength1to14">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used forAlpha-Numeric Strings, length 1 to 14.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9a-zA-Z]{1,14}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodePatternType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes. It may contain merely codes or integer codes associated to a value in AMA_CodeTable.xls.
Pattern is composed on 3 parts: Standard (AMA or OTA or IATA), ListCode (3 upper case letters) and Code (1 to 3 digits). Code is mandatory. ListName is mandatory if Standard is precised, else it is optional. Standard is optional.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}((\.[0-9A-Z]{3,4})((\.(AMA|OTA|IATA|UIC)){0,1})){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="CodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for codes in the OpenTravel Code tables. Possible values of this pattern are 1, 101, 101.EQP, or 101.EQP.X.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9A-Z]{1,3}(\.[A-Z]{3}(\.X){0,1}){0,1}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="DateOrDateTimeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">A construct to validate either a date or a dateTime value.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:date xs:dateTime"/>
  </xs:simpleType>
  <xs:simpleType name="integerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either an integer or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:integer ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="ISO3166">
    <xs:annotation>
      <xs:documentation xml:lang="en">Specifies a 2 character country code as defined in ISO3166.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[a-zA-Z]{2}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="MMYYDate">
    <xs:annotation>
      <xs:documentation xml:lang="en">Month and year information.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="(0[1-9]|1[0-2])[0-9][0-9]"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="nonNegativeIntegerOrString0">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used in order to validate either a nonNegativeInteger or String0.</xs:documentation>
    </xs:annotation>
    <xs:union memberTypes="xs:nonNegativeInteger ctr:String0"/>
  </xs:simpleType>
  <xs:simpleType name="Numeric0to4">
    <xs:annotation>
      <xs:documentation>Used for numeric values, from 0 to 4 inclusive.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:integer">
      <xs:minInclusive value="0"/>
      <xs:maxInclusive value="4"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="NumericStringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Numeric Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:pattern value="[0-9]{1,8}"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StateProvCodeType">
    <xs:annotation>
      <xs:documentation xml:lang="en">The standard code or abbreviation for the state, province, or region</xs:documentation>
    </xs:annotation>
    <xs:restriction base="ctr:StringLength1to8">
      <xs:minLength value="2"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="String0">
    <xs:annotation>
      <xs:documentation>Used for String length 0</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="0"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to128">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 128.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength0to255">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 0 to 255.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="0"/>
      <xs:maxLength value="255"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to8">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 8.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="8"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to16">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 16.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="16"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to32">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 32.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="32"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to64">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used for Character Strings, length 1 to 64.</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="64"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength1to128">
    <xs:restriction base="xs:string">
      <xs:minLength value="1"/>
      <xs:maxLength value="128"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:simpleType name="StringLength3">
    <xs:annotation>
      <xs:documentation>Used for String length 3</xs:documentation>
    </xs:annotation>
    <xs:restriction base="xs:string">
      <xs:minLength value="3"/>
      <xs:maxLength value="3"/>
    </xs:restriction>
  </xs:simpleType>
  <xs:attributeGroup name="AmountCurrencyAndDecimalPlaceGroup">
    <xs:attribute name="CurrencyCode" type="ctr:AlphaLength3orString0">
      <xs:annotation>
        <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DecimalPlaces" type="ctr:nonNegativeIntegerOrString0">
      <xs:annotation>
        <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Amount" type="ctr:integerOrString0">
      <xs:annotation>
        <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="BerthAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Berth Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list BLT (Level), BST (Size), BPT (Position), BCF (Configuration), ETP (Equipement)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:attributeGroup name="BirthDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to provide a date of birth.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as indicated in the document, in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="EffectiveExpireOptionalDateGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to send the effective date and/or expiration date.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="EffectiveDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ExpireDateExclusiveIndicator" type="xs:boolean" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">When true, indicates that the ExpireDate is the first day after the applicable period (e.g. when expire date is Oct 15  the last date of the period is Oct 14).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="GenderGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Used to indicate the gender of a person, if known.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Gender" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifies the gender.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Male"/>
          <xs:enumeration value="Female"/>
          <xs:enumeration value="Unknown"/>
          <xs:enumeration value="Male_NoShare"/>
          <xs:enumeration value="Female_NoShare"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PayloadStdAttributes">
    <xs:annotation>
      <xs:documentation xml:lang="en">The PayloadAttributesShoRQ defines the attributes that appear on the root element for all Shopping Request messages.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="TimeStamp" type="xs:dateTime" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the creation date and time of the message in UTC using the following format specified by ISO 8601; YYYY-MM-DDThh:mm:ssZ with time values using the 24 hour clock (e.g. 20 November 2003, 1:59:38 pm UTC becomes 2003-11-20T13:59:38Z).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Version" type="xs:decimal" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">For all OpenTravel versioned messages, the version of the message is indicated by a decimal value.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="CorrelationID" type="ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allow end-to-end correlation of log messages with the corresponding Web service message throughout the processing of the Web service message.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PlaceAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Place attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="CoachNumber" use="optional">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="PlaceNumber" use="optional">
      <xs:annotation>
        <xs:documentation>Physical place number.(Left padding with 0 or [space] if needed)</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="PrivacyGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Allows for control of the sharing of data between parties.</xs:documentation>
    </xs:annotation>
    <xs:attribute name="ShareSynchInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for synchronization of information held by other travel service providers.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for synchronization of information held by other travel service providers.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ShareMarketInd" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Permission for sharing data for marketing purposes.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:annotation>
          <xs:documentation xml:lang="en">If the value=Inherit, specifies data sharing permissions for marketing purposes.</xs:documentation>
        </xs:annotation>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Yes"/>
          <xs:enumeration value="No"/>
          <xs:enumeration value="Inherit"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:attributeGroup>
  <xs:attributeGroup name="SeatAttributesGroup">
    <xs:annotation>
      <xs:documentation xml:lang="en">Seat Attributes</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="ctr:StringLength1to16" use="required">
      <xs:annotation>
        <xs:documentation>See RDP code type list SDR (Direction), SPS (Position),SCT (Configuration), PPF (PassengerProfile), ETP (Equipment)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Value" type="ctr:StringLength1to16" use="required"/>
  </xs:attributeGroup>
  <xs:complexType name="BookingType">
    <xs:annotation>
      <xs:documentation>Several Trips information</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="PnrIdentification">
        <xs:annotation>
          <xs:documentation>Provider Record Locator</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="PnrReference" type="xs:string" use="optional">
            <xs:annotation>
              <xs:documentation>Identifier of the reservation in Provider system</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="CreationDate" type="xs:dateTime">
            <xs:annotation>
              <xs:documentation>Creation date of the trip.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Inventory" type="xs:string">
            <xs:annotation>
              <xs:documentation>Reservation system</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Relationship" type="xs:NMTOKEN">
            <xs:annotation>
              <xs:documentation>Parent Record or Child record</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="Passenger" maxOccurs="9">
        <xs:annotation>
          <xs:documentation>Passenger</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence minOccurs="0">
            <xs:element name="Actor" maxOccurs="9">
              <xs:annotation>
                <xs:documentation>Actor</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Name">
                    <xs:complexType>
                      <xs:attribute name="FirstName" type="xs:string"/>
                      <xs:attribute name="LastName" type="xs:string"/>
                      <xs:attribute name="Title" type="xs:string"/>
                      <xs:attribute name="DateOfBirth" type="xs:date"/>
                    </xs:complexType>
                  </xs:element>
                </xs:sequence>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
            <xs:element name="Contact" minOccurs="0" maxOccurs="9">
              <xs:annotation>
                <xs:documentation>Contact</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:choice>
                  <xs:element name="Email" minOccurs="0">
                    <xs:complexType>
                      <xs:simpleContent>
                        <xs:extension base="xs:string"/>
                      </xs:simpleContent>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="Telephone" minOccurs="0">
                    <xs:complexType>
                      <xs:simpleContent>
                        <xs:extension base="xs:string"/>
                      </xs:simpleContent>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="CustomerLoyalty" minOccurs="0">
                    <xs:complexType>
                      <xs:complexContent>
                        <xs:extension base="ctr:CustomerLoyaltyType">
                          <xs:sequence>
                            <xs:element name="VendorCompany" type="ctr:CompanyNameType"/>
                          </xs:sequence>
                        </xs:extension>
                      </xs:complexContent>
                    </xs:complexType>
                  </xs:element>
                </xs:choice>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
                <xs:attribute name="PaxIDs" type="xs:IDREFS">
                  <xs:annotation>
                    <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
      <xs:element name="Reservation">
        <xs:annotation>
          <xs:documentation>Reservation item</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="Warning" type="ctr:WarningType" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Warning</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Product" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Service, Supplement, Ancillary service</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="ctr:ProductType">
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Schedule" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Schedule</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:sequence>
                  <xs:element name="Departure" type="ctr:DateTimeLocationType">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
                    </xs:annotation>
                  </xs:element>
                  <xs:element name="Arrival" type="ctr:DateTimeLocationType">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
                    </xs:annotation>
                  </xs:element>
                  <xs:sequence>
                    <xs:element name="Segment" maxOccurs="99">
                      <xs:complexType>
                        <xs:complexContent>
                          <xs:extension base="ctr:SegmentType">
                            <xs:attribute name="ID" type="xs:ID" use="required">
                              <xs:annotation>
                                <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="Status" type="ctr:StringLength1to8" use="required"/>
                          </xs:extension>
                        </xs:complexContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                </xs:sequence>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
            <xs:element name="AccommodationPreferences" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Accommodation</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="ctr:RequestedAccommodationType">
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                    <xs:attribute name="SegID" type="xs:IDREF" use="required"/>
                    <xs:attribute name="PaxID" type="xs:IDREF" use="required"/>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Reduction" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Reduction</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="ctr:ReductionTypeDetails">
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                    <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Pricing" minOccurs="0">
              <xs:annotation>
                <xs:documentation>Pricing</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="ctr:PricingReplyType">
                    <xs:sequence>
                      <xs:element name="Fare" minOccurs="0" maxOccurs="99">
                        <xs:annotation>
                          <xs:documentation>QuotingRule</xs:documentation>
                        </xs:annotation>
                        <xs:complexType>
                          <xs:complexContent>
                            <xs:extension base="ctr:FareType">
                              <xs:attribute name="ID" type="xs:ID">
                                <xs:annotation>
                                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="SegIDs" type="xs:IDREFS" use="optional"/>
                              <xs:attribute name="PaxIDs" type="xs:IDREFS" use="optional"/>
                            </xs:extension>
                          </xs:complexContent>
                        </xs:complexType>
                      </xs:element>
                      <xs:element name="TotalQuote" minOccurs="0" maxOccurs="99">
                        <xs:annotation>
                          <xs:documentation>Quotation</xs:documentation>
                        </xs:annotation>
                        <xs:complexType>
                          <xs:complexContent>
                            <xs:extension base="ctr:TotalQuoteType"/>
                          </xs:complexContent>
                        </xs:complexType>
                      </xs:element>
                      <xs:element name="DetailQuote" maxOccurs="99">
                        <xs:complexType>
                          <xs:sequence>
                            <xs:element name="Price">
                              <xs:complexType>
                                <xs:attribute name="CurrencyCode" type="ctr:AlphaLength3" use="required">
                                  <xs:annotation>
                                    <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="DecimalPlaces" type="ctr:Numeric0to4" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Amount" type="xs:integer" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:complexType>
                            </xs:element>
                            <xs:element name="Tax" minOccurs="0">
                              <xs:complexType>
                                <xs:attribute name="CurrencyCode" type="ctr:AlphaLength3" use="required">
                                  <xs:annotation>
                                    <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="DecimalPlaces" type="ctr:Numeric0to4" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Amount" type="xs:integer" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Type of Tax</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:complexType>
                            </xs:element>
                            <xs:element name="Fee" minOccurs="0">
                              <xs:complexType>
                                <xs:attribute name="CurrencyCode" type="ctr:AlphaLength3" use="required">
                                  <xs:annotation>
                                    <xs:documentation>The code specifying a monetary unit. Use ISO 4217, three alpha code.</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="DecimalPlaces" type="ctr:Numeric0to4" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Indicates the number of decimal places for a particular currency. This is equivalent to the ISO 4217 standard "minor unit". Typically used when the amount provided includes the minor unit of currency without a decimal point (e.g., USD 8500 needs DecimalPlaces="2" to represent $85)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Amount" type="xs:integer" use="required">
                                  <xs:annotation>
                                    <xs:documentation>Defines the amount without decimal separator (i.e. Amount=8500 and
					DecimalPlace=2 represent 85.00)</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                                <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Type of Fee</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:complexType>
                            </xs:element>
                          </xs:sequence>
                          <xs:attribute name="ID" type="xs:ID">
                            <xs:annotation>
                              <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="PrdIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Product IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="SegIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="PaxIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="AccIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Accomodation IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="RedIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Reduction IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="FareIDs" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Fare IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation>A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="MethodOfPayment" minOccurs="0">
              <xs:complexType>
                <xs:choice>
                  <xs:element name="Card">
                    <xs:complexType>
                      <xs:sequence>
                        <xs:element name="AddressVerificationSystemValue" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Credit Card holder's address</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:sequence>
                              <xs:element name="Line" type="ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
                                <xs:annotation>
                                  <xs:documentation>Street and number on first line. Building, Floor etc... on following lines</xs:documentation>
                                </xs:annotation>
                              </xs:element>
                            </xs:sequence>
                            <xs:attribute name="CityName" type="ctr:StringLength1to64"/>
                            <xs:attribute name="PostalCode" type="ctr:StringLength1to16">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Post Office Code number.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="Country" type="ctr:StringLength1to32">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">ISO 3166 code for the country</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="MagneticTrack" minOccurs="0" maxOccurs="4">
                          <xs:annotation>
                            <xs:documentation>Contains Data of the Magnetic Stripe of the Credit Card</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:simpleContent>
                              <xs:extension base="ctr:StringLength0to255">
                                <xs:attribute name="Type"/>
                              </xs:extension>
                            </xs:simpleContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="Issuance" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Information about the issuing bank and country</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:sequence>
                              <xs:element name="Bank">
                                <xs:complexType>
                                  <xs:attribute name="Name" type="ctr:StringLength1to128">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">Full name of the issuing bank</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                  <xs:attribute name="ID" type="ctr:StringLength1to64">
                                    <xs:annotation>
                                      <xs:documentation xml:lang="en">Code of bank issuing the card.</xs:documentation>
                                    </xs:annotation>
                                  </xs:attribute>
                                </xs:complexType>
                              </xs:element>
                            </xs:sequence>
                            <xs:attribute name="Country" type="ctr:StringLength1to32">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Credit Card country of issuance</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="PrimaryAccountNumber" type="ctr:StringLength1to32" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Credit card number embossed on the front of the card.</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                        <xs:element name="CVV" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>Verification digits printed on the back of the card usually (CardVerificationValue).</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:simpleContent>
                              <xs:extension base="ctr:StringLength1to8">
                                <xs:attribute name="KnoxID" type="ctr:StringLength1to32">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">KnoxID of the CVV</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:extension>
                            </xs:simpleContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="ApprovalCode" minOccurs="0">
                          <xs:annotation>
                            <xs:documentation>A series of characters assigned by the applicable credit card company's authorization system to confirm the approval of a credit sale transaction.</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:simpleContent>
                              <xs:extension base="ctr:StringLength1to16">
                                <xs:attribute name="Source" type="ctr:StringLength3">
                                  <xs:annotation>
                                    <xs:documentation>Can be A if it comes from Amadeus Payment Server, or N if entered manually by an Agent</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:extension>
                            </xs:simpleContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="Vendor" minOccurs="0">
                          <xs:complexType>
                            <xs:attribute name="Code" type="ctr:StringLength1to8">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">The 2 character code of the credit card issuer.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="SubType" type="ctr:StringLength1to8">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">To identify a subtype of credit cards</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="Validity" minOccurs="0">
                          <xs:complexType>
                            <xs:attribute name="StartDate" type="ctr:MMYYDate">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Indicates the starting date.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="EndDate" type="ctr:MMYYDate">
                              <xs:annotation>
                                <xs:documentation xml:lang="en">Indicates the ending date.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:complexType>
                        </xs:element>
                      </xs:sequence>
                      <xs:attribute name="HolderName" type="ctr:StringLength1to128">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">Name of credit card holder.</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                      <xs:attribute name="FraudStatus" type="ctr:StringLength1to8">
                        <xs:annotation>
                          <xs:documentation>Can be OK, KO or RW (pending).</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="Invoice">
                    <xs:complexType>
                      <xs:attribute name="Reference" type="ctr:StringLength1to64"/>
                    </xs:complexType>
                  </xs:element>
                  <xs:element name="Cash"/>
                </xs:choice>
                <xs:attribute name="ID" type="xs:ID">
                  <xs:annotation>
                    <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                  </xs:annotation>
                </xs:attribute>
              </xs:complexType>
            </xs:element>
            <xs:element name="TicketingOption" minOccurs="0">
              <xs:annotation>
                <xs:documentation>TicketingOption</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="ctr:TicketingOptionType">
                    <xs:sequence>
                      <xs:element name="ContactList" minOccurs="0" maxOccurs="9">
                        <xs:complexType>
                          <xs:attribute name="ID" type="xs:ID">
                            <xs:annotation>
                              <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                          <xs:attribute name="CtnID" type="xs:IDREFS">
                            <xs:annotation>
                              <xs:documentation>It can contain a list of Contact IDs which the element refers to.</xs:documentation>
                            </xs:annotation>
                          </xs:attribute>
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                    <xs:attribute name="ID" type="xs:ID">
                      <xs:annotation>
                        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                      </xs:annotation>
                    </xs:attribute>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
            <xs:element name="Contract" minOccurs="0" maxOccurs="99">
              <xs:annotation>
                <xs:documentation>Contract</xs:documentation>
              </xs:annotation>
              <xs:complexType>
                <xs:complexContent>
                  <xs:extension base="ctr:ContractType">
                    <xs:sequence>
                      <xs:element name="Document" minOccurs="0" maxOccurs="99">
                        <xs:annotation>
                          <xs:documentation>Document</xs:documentation>
                        </xs:annotation>
                        <xs:complexType>
                          <xs:simpleContent>
                            <xs:extension base="xs:string">
                              <xs:attribute name="Type" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Type. URL, 2DBarCode, etc.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Version" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>API or Standard version</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Source" type="xs:NMTOKENS">
                                <xs:annotation>
                                  <xs:documentation>Reservation system</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Encoding" type="xs:string" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Encoding name. BASE64, etc.</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="Size" type="xs:positiveInteger" use="optional">
                                <xs:annotation>
                                  <xs:documentation>Size of Document content</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                              <xs:attribute name="NumberOfCoupons" type="xs:positiveInteger">
                                <xs:annotation>
                                  <xs:documentation>Quantity of physical coupons</xs:documentation>
                                </xs:annotation>
                              </xs:attribute>
                            </xs:extension>
                          </xs:simpleContent>
                        </xs:complexType>
                      </xs:element>
                    </xs:sequence>
                  </xs:extension>
                </xs:complexContent>
              </xs:complexType>
            </xs:element>
          </xs:sequence>
          <xs:attribute name="ID" type="xs:ID">
            <xs:annotation>
              <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="CampaignTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Campaign reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The campaign code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ContractType">
    <xs:sequence>
      <xs:element name="Price" type="ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="ID" type="xs:ID">
      <xs:annotation>
        <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PaxIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SegIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Accomodation IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="TkoIDs" type="xs:IDREF" use="optional">
      <xs:annotation>
        <xs:documentation>It can contain a list of Ticketing Option IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MopIDs" type="xs:IDREF" use="optional">
      <xs:annotation>
        <xs:documentation>It can contain a list of Method of Payment IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="CtrIDs" type="xs:IDREFS">
      <xs:annotation>
        <xs:documentation>It can contain a list of Contract IDs which the element refers to.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Number" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Main Contract Number</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Status" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Contract status. Ticketed, Refunded, etc. See RDP code type list TSS.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SecondNumber" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation>Second Contract Number</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="IssueDate" type="ctr:DateOrDateTimeType" use="optional">
      <xs:annotation>
        <xs:documentation>Issuance date/date and time of the provider</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="StartValidityDate" type="xs:dateTime">
      <xs:annotation>
        <xs:documentation>Start validity date</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="EndValidityDate" type="xs:dateTime">
      <xs:annotation>
        <xs:documentation>End validity date</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="NumberOfPassengers" type="xs:positiveInteger" use="optional">
      <xs:annotation>
        <xs:documentation>NumberOfPassenger, NumberInParty (NIP)</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Properties" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Properties.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CorporateTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Corporate reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Type">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Contract">
      <xs:annotation>
        <xs:documentation xml:lang="en">The contract number associated to the corporate code</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PassengerCategoryDetails">
    <xs:annotation>
      <xs:documentation>Describes a Passenger category reduction</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="xs:string" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate ID code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Context">
      <xs:annotation>
        <xs:documentation xml:lang="en">The corporate type</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="1"/>
          <xs:maxLength value="20"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="CompanyNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Identifies a company by name.</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="ctr:StringLength0to128">
        <xs:annotation>
          <xs:documentation xml:lang="en">Provides detailed information on a company.</xs:documentation>
        </xs:annotation>
        <xs:attribute name="Division" type="ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The division name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="Department" type="ctr:StringLength1to32" use="optional">
          <xs:annotation>
            <xs:documentation xml:lang="en">The department name or ID with which the contact is associated.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="CustomerLoyaltyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Program rewarding frequent use by accumulating credits for services provided by vendors. This type is based on OTA_CommonTypes-CustLoyaltyType</xs:documentation>
    </xs:annotation>
    <xs:attribute name="MembershipID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique identifier of the member in the program (membership number, account number, etc.).</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ctr:StringLength1to32">
          <xs:minLength value="1"/>
          <xs:maxLength value="32"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ProgramID" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="ctr:AlphaNumericStringLength1to3">
          <xs:minLength value="1"/>
          <xs:maxLength value="3"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="ExpirationDate" type="ctr:DateOrDateTimeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Identifier to indicate the company owner of the loyalty program.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DateTimeLocationType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes DateTime and Location</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="ctr:StringLength1to16">
              <xs:attribute name="Context" type="ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="LocationName" type="ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Name of the location</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DateTime" type="ctr:DateOrDateTimeType">
      <xs:annotation>
        <xs:documentation>Date and optional time</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="DetailQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="BookingToken" type="xs:string" minOccurs="0"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="DocumentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Provides information on a specific document.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice minOccurs="0">
        <xs:element name="DocHolderName" type="ctr:StringLength1to64" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of the document holder in unformatted text (Mr. Sam Jones).</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="DocHolderFormattedName" type="ctr:PersonNameType" minOccurs="0">
          <xs:annotation>
            <xs:documentation xml:lang="en">The name of document holder in formatted text.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="DocLimitations" type="ctr:StringLength1to64" minOccurs="0" maxOccurs="9">
        <xs:annotation>
          <xs:documentation xml:lang="en">Used to indicate any limitations on the document (e.g. as a person may only be allowed to spend a max of 30 days in country on a visitor's visa).</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="AdditionalPersonNames" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">A container for additional person names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:sequence>
            <xs:element name="AdditionalPersonName" type="ctr:StringLength1to64" maxOccurs="99">
              <xs:annotation>
                <xs:documentation xml:lang="en">The name of an additional person listed on this document.</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:sequence>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of document data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueAuthority" type="ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the group or association that granted the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueLocation" type="ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the location where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocID" type="ctr:StringLength1to32" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocType" type="ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="ctr:GenderGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The gender of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="ctr:BirthDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The birth date of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attributeGroup ref="ctr:EffectiveExpireOptionalDateGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">The effective and expiry date of the document.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="DocIssueStateProv" type="ctr:StateProvCodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">State or Province where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocIssueCountry" type="ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Country where the document was issued.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthCountry" type="ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth country of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="BirthPlace" type="ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Specifies the birth place of the document holder (e.g., city, state, county, province), when designating a country of birth, use BirthCountry.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DocHolderNationality" type="ctr:ISO3166" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The country code of the nationality of the document holder.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="ContactName" type="ctr:StringLength1to64" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides contact name associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="HolderType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Provides the type of document holder.</xs:documentation>
      </xs:annotation>
      <xs:simpleType>
        <xs:restriction base="xs:NMTOKEN">
          <xs:enumeration value="Infant">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is an infant.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
          <xs:enumeration value="HeadOfHousehold">
            <xs:annotation>
              <xs:documentation xml:lang="en">The document holder is a head of household.</xs:documentation>
            </xs:annotation>
          </xs:enumeration>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
    <xs:attribute name="Remark" type="ctr:StringLength1to128" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">A remark associated with the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="PostalCode" type="ctr:StringLength1to16" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Defines the postal code (e.g., ZIP code) on the document.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ErrorType">
    <xs:annotation>
      <xs:documentation>Describes an Error</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="ctr:StringLength0to255">
        <xs:attribute name="Code" type="ctr:NumericStringLength1to8" use="required"/>
        <xs:attribute name="Type" default="System">
          <xs:simpleType>
            <xs:restriction base="xs:NMTOKEN">
              <xs:enumeration value="System"/>
              <xs:enumeration value="Functional"/>
              <xs:enumeration value="Provider"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="FareType">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule with all details</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Describes the conditions of use related to a fare.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
                <xs:annotation>
                  <xs:documentation>The type of fare condition. Refer to INF code list</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PassengerLimits" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Defines the minimum and maximum number of passengers for which this quoting rule is eligible.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="MinPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The minimum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="MaxPassengers" type="xs:int">
            <xs:annotation>
              <xs:documentation xml:lang="en">The maximum number of passengers for this ticket.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Code" type="ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Flexibility" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation>The fare flexibility (Flexible, Semi-Flexible, Non-Flexible). Refer to code list RFB.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the fare type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="FareTypeRQ">
    <xs:annotation>
      <xs:documentation>Describes a Quoting Rule request</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Code" type="ctr:StringLength1to32" use="required">
      <xs:annotation>
        <xs:documentation xml:lang="en">Fare Code</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Family" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The family of the fare (Leisure, Business). Refer to code list FFL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>The type of fare (Single, Return). It refers to the code list SRT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="LocationType">
    <xs:sequence>
      <xs:element name="LocationCode" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Code used to identify a location</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="ctr:StringLength1to16">
              <xs:attribute name="Context" type="ctr:AlphaNumericStringLength1to8" use="optional">
                <xs:annotation>
                  <xs:documentation>Context of location code</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PersonNameType">
    <xs:annotation>
      <xs:documentation xml:lang="en">This provides name information for a person.</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="NamePrefix" type="ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Salutation of honorific (e.g. Mr., Mrs., Ms., Miss, Dr.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="GivenName" type="ctr:StringLength1to64" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Given name, first name or names.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="MiddleName" type="ctr:StringLength1to64" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">The middle name of the person name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="SurnamePrefix" type="ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The surname prefix, e.g "van der", "von", "de".</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Surname" type="ctr:StringLength1to64">
        <xs:annotation>
          <xs:documentation xml:lang="en">Family name, last name. May also be used for full name if the sending system does not have the ability to separate a full name into its parts, e.g. the surname element may be used to pass the full name.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameSuffix" type="ctr:StringLength1to16" minOccurs="0" maxOccurs="3">
        <xs:annotation>
          <xs:documentation xml:lang="en">Hold various name suffixes and letters (e.g. Jr., Sr., III, Ret., Esq.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="NameTitle" type="ctr:StringLength1to16" minOccurs="0" maxOccurs="5">
        <xs:annotation>
          <xs:documentation xml:lang="en">Degree or honors (e.g., Ph.D., M.D.)</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Document" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Document  information for verification purposes and also used for additional filtering for common names.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="DocID" type="ctr:StringLength1to32" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Unique number assigned by authorities to document.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DocType" type="ctr:CodeType" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Indicates the type of document (e.g. Passport, Military ID, Drivers License, national ID, Vaccination Certificate). Refer to OpenTravel Code List Document Type (DOC).</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attributeGroup ref="ctr:PrivacyGroup">
      <xs:annotation>
        <xs:documentation xml:lang="en">Allows for control of the sharing of person name data between parties.</xs:documentation>
      </xs:annotation>
    </xs:attributeGroup>
    <xs:attribute name="NameType" type="ctr:CodeType" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of name of the individual, such as former, nickname, alternate or alias name. Refer to OpenTravel Code List Name Type (NAM).</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PriceType">
    <xs:annotation>
      <xs:documentation>Describes a Price</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="ctr:AmountCurrencyAndDecimalPlaceGroup"/>
  </xs:complexType>
  <xs:complexType name="ProductType">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item. It refers to the code list PTY</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type. It refers to the code list TCC</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DisplayName" type="ctr:StringLength1to16">
      <xs:annotation>
        <xs:documentation>It is the display name of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description" type="xs:string">
      <xs:annotation>
        <xs:documentation>It is the description of the product type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ProductTypeRQ">
    <xs:annotation>
      <xs:documentation>List of Train Product Types available for sale</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of item (Transport, Transport with seat, Ancillary). It refers to the code list SET.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Class" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>The travel class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="MainClass" type="xs:string">
      <xs:annotation>
        <xs:documentation>The main class code associated to this service type</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AccomType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Type of accommodation (seat, berth, cabin). Refer to code list ACT.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingSolutionType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TotalQuote" type="ctr:TotalQuoteType" minOccurs="0"/>
      <xs:element name="DetailQuote" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Quote</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="ctr:DetailQuoteType">
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PaxIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="RedIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Reduction IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="FareIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Fare IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="PrdIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Service IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="TicketingOption" type="ctr:TicketingOptionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Ticket type and delivery method</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ToBeSoldWith" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Booking Constraints Linkage (It's an OR, not an AND)</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="PslIDs" type="xs:IDREFS">
            <xs:annotation>
              <xs:documentation>It can contain a list of PricingSolution IDs which the element refers to.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
    <xs:attribute name="Avail" type="xs:int">
      <xs:annotation>
        <xs:documentation>It is the numerical availability.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="AvailLevel" type="ctr:AlphaNumericStringLength1to3">
      <xs:annotation>
        <xs:documentation>This indicator inform the client on the level of availability.  It refers to the code list AVL.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="PricingType">
    <xs:annotation>
      <xs:documentation>Describes a Pricing Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Fare" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Applied Fares</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="ctr:FareType">
              <xs:attribute name="ID" type="xs:ID" use="optional">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="PricingSolution" minOccurs="0" maxOccurs="1999">
        <xs:annotation>
          <xs:documentation>Collection of prices and products</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="ctr:PricingSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SslIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of ScheduleSolution IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="PricingReplyType"/>
  <xs:complexType name="ScheduleQueryType">
    <xs:annotation>
      <xs:documentation>Describes a Schedule</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="ctr:LocationType">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="DateTime">
        <xs:annotation>
          <xs:documentation>Date and optional time. It can be the departure time or the arrival time</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:choice>
            <xs:element name="Departure" type="ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the departure time</xs:documentation>
              </xs:annotation>
            </xs:element>
            <xs:element name="Arrival" type="ctr:DateOrDateTimeType">
              <xs:annotation>
                <xs:documentation>It is the arrival time</xs:documentation>
              </xs:annotation>
            </xs:element>
          </xs:choice>
        </xs:complexType>
      </xs:element>
      <xs:element name="SearchCriteria" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Used to restrict the schedule solutions based on specific criteria</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>It describes any search criteria according to the code list</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">It is the value of the search criteria specified in the code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleReplyType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Segment" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>Portion of an schedule solution, including all legs which are listed under the same train number or identifier.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="ctr:SegmentType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="ScheduleSolution" minOccurs="0" maxOccurs="999">
        <xs:annotation>
          <xs:documentation>An schedule solution</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:complexContent>
            <xs:extension base="ctr:ScheduleSolutionType">
              <xs:attribute name="ID" type="xs:ID">
                <xs:annotation>
                  <xs:documentation xml:lang="en">A unique identifying value assigned by the creating system. The ID attribute may be used to reference a primary-key value within a database or in a particular implementation.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
              <xs:attribute name="SegIDs" type="xs:IDREFS">
                <xs:annotation>
                  <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                </xs:annotation>
              </xs:attribute>
            </xs:extension>
          </xs:complexContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="Warning" type="ctr:WarningType" minOccurs="0" maxOccurs="99"/>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="ScheduleSolutionType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Schedule Solution</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode and departure dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the destination locationCode and arrival dateTime.</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration from the departure location to destination.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SearchCriteriaType">
    <xs:annotation>
      <xs:documentation>Describes Search Criteria</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="TravelClass" maxOccurs="9">
        <xs:annotation>
          <xs:documentation>Describes any preferences in terms of travel class. Refer to code list TCC.</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="ctr:StringLength1to16" use="optional">
            <xs:annotation>
              <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="PreferLevel" use="optional">
            <xs:annotation>
              <xs:documentation>Used to indicate a level of preference</xs:documentation>
            </xs:annotation>
            <xs:simpleType>
              <xs:restriction base="xs:NMTOKEN">
                <xs:minLength value="1"/>
                <xs:maxLength value="14"/>
              </xs:restriction>
            </xs:simpleType>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="SegmentShortType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Vehicle" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Contains vehicle characteristics</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:attribute name="Code" type="ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle Code</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="DisplayName" type="ctr:StringLength1to16">
            <xs:annotation>
              <xs:documentation>Vehicle name.</xs:documentation>
            </xs:annotation>
          </xs:attribute>
        </xs:complexType>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Duration" type="xs:duration" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">The duration of the train from departure location to destination location.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentTypeRQ">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment information for booking query</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Departure" type="ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The start element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Arrival" type="ctr:DateTimeLocationType" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">The end element contains the origin locationCode</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="ServiceProviderCode" type="ctr:StringLength1to16" minOccurs="0">
        <xs:annotation>
          <xs:documentation>Code of the company providing the transport service. Refer to SPR code list</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Identifier" type="ctr:StringLength1to8" minOccurs="0">
        <xs:annotation>
          <xs:documentation xml:lang="en">Train number or service identifier</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the transport mode. It refers to TCS code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="SubType" type="xs:NMTOKEN">
      <xs:annotation>
        <xs:documentation>Describes the service type. It refers to TVT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RailCardDetails">
    <xs:annotation>
      <xs:documentation>Describes a Railcard reduction</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="ctr:StringLength0to128">
        <xs:attribute name="Code">
          <xs:annotation>
            <xs:documentation xml:lang="en">A code identifying the type of card. Refer to code list RCC.</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="6"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="Number">
          <xs:annotation>
            <xs:documentation xml:lang="en">Railcard number</xs:documentation>
          </xs:annotation>
          <xs:simpleType>
            <xs:restriction base="xs:string">
              <xs:minLength value="1"/>
              <xs:maxLength value="45"/>
            </xs:restriction>
          </xs:simpleType>
        </xs:attribute>
        <xs:attribute name="RailcardId" type="xs:string">
          <xs:annotation>
            <xs:documentation>An ID authorizing the use of the card.</xs:documentation>
          </xs:annotation>
        </xs:attribute>
        <xs:attribute name="RailCardNumberRequired" type="xs:boolean"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
  <xs:complexType name="ReductionType">
    <xs:annotation>
      <xs:documentation>Describes a Reduction request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailcardCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a railcard reduction</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CorporateCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a corporate reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="CampaignCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a campaign reduction.</xs:documentation>
          </xs:annotation>
        </xs:element>
        <xs:element name="PassengerCategoryCode" type="xs:string">
          <xs:annotation>
            <xs:documentation>Used to specify a passenger category not related with age. It refers to the code list PGC.</xs:documentation>
          </xs:annotation>
        </xs:element>
      </xs:choice>
      <xs:element name="VendorCompanyCode" type="ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="ReductionTypeDetails">
    <xs:annotation>
      <xs:documentation>Describes a Reduction</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:choice>
        <xs:element name="RailCardDetails" type="ctr:RailCardDetails"/>
        <xs:element name="CorporateTypeDetails" type="ctr:CorporateTypeDetails"/>
        <xs:element name="CampaignTypeDetails" type="ctr:CampaignTypeDetails"/>
        <xs:element name="PassengerCategoryDetails" type="ctr:PassengerCategoryDetails"/>
      </xs:choice>
      <xs:element name="Condition" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Condition of the reduction</xs:documentation>
        </xs:annotation>
        <xs:complexType>
          <xs:simpleContent>
            <xs:extension base="xs:string">
              <xs:attribute name="Code">
                <xs:simpleType>
                  <xs:restriction base="xs:string"/>
                </xs:simpleType>
              </xs:attribute>
            </xs:extension>
          </xs:simpleContent>
        </xs:complexType>
      </xs:element>
      <xs:element name="VendorCompanyCode" type="ctr:StringLength1to16" minOccurs="0"/>
    </xs:sequence>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="RequestedAccommodationType">
    <xs:annotation>
      <xs:documentation>Criteria for accommodation request</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Option" minOccurs="0" maxOccurs="99">
        <xs:complexType>
          <xs:attribute name="Code" type="ctr:StringLength1to16" use="required">
            <xs:annotation>
              <xs:documentation>See RDP code type list DKL (Deck level), GDT (Gender), PET (Pets allowed), SMK (Smoking), BIK (Bike space), ERT (Environment)</xs:documentation>
            </xs:annotation>
          </xs:attribute>
          <xs:attribute name="Value" type="ctr:StringLength1to16" use="required"/>
        </xs:complexType>
      </xs:element>
      <xs:choice>
        <xs:element name="SeatOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="ctr:SeatAttributesGroup"/>
          </xs:complexType>
        </xs:element>
        <xs:element name="BerthOptions" minOccurs="0" maxOccurs="99">
          <xs:complexType>
            <xs:attributeGroup ref="ctr:BerthAttributesGroup"/>
          </xs:complexType>
        </xs:element>
      </xs:choice>
    </xs:sequence>
    <xs:attribute name="Type" type="xs:NMTOKENS" use="optional">
      <xs:annotation>
        <xs:documentation>Seat, Berth, etc. See RDP code type list ACT</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attributeGroup ref="ctr:PlaceAttributesGroup"/>
    <xs:attribute name="NearTo" type="xs:boolean" use="optional" default="false">
      <xs:annotation>
        <xs:documentation>If true the system may return a place near the given one if this place is not available. If false the system try to get only the specified place.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="SegmentType">
    <xs:annotation>
      <xs:documentation xml:lang="en">Describes a Segment</xs:documentation>
    </xs:annotation>
    <xs:complexContent>
      <xs:extension base="ctr:SegmentShortType">
        <xs:sequence>
          <xs:element name="CO2Emissions" minOccurs="0">
            <xs:annotation>
              <xs:documentation xml:lang="en">Value and units of the CO2 emissions in the segment</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="xs:decimal">
                  <xs:attribute name="Unit" type="xs:NMTOKEN"/>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="ServiceOnBoard" minOccurs="0" maxOccurs="99">
            <xs:annotation>
              <xs:documentation xml:lang="en">Refer to code list SOB.</xs:documentation>
            </xs:annotation>
            <xs:complexType>
              <xs:simpleContent>
                <xs:extension base="ctr:StringLength0to32">
                  <xs:attribute name="Code" type="ctr:StringLength1to16" use="optional">
                    <xs:annotation>
                      <xs:documentation xml:lang="en">Any code used to specify an item, for example, type of traveler, service code, room amenity, etc.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:extension>
              </xs:simpleContent>
            </xs:complexType>
          </xs:element>
          <xs:element name="InformationMessage" type="xs:string" minOccurs="0">
            <xs:annotation>
              <xs:documentation>Information text to display</xs:documentation>
            </xs:annotation>
          </xs:element>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType>
  <xs:complexType name="TaxType">
    <xs:annotation>
      <xs:documentation>Describes a Tax</xs:documentation>
    </xs:annotation>
    <xs:attributeGroup ref="ctr:AmountCurrencyAndDecimalPlaceGroup"/>
    <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Type of Tax. It refers to FTT code list.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TicketingOptionType">
    <xs:annotation>
      <xs:documentation>Describes a Ticketing Option</xs:documentation>
    </xs:annotation>
    <xs:attribute name="Type" type="ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Type of ticket. Refer to code list TTY.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="DeliveryMode" type="ctr:AlphaNumericStringLength1to14">
      <xs:annotation>
        <xs:documentation>Code of the method of delivery. Refer to code list DMD</xs:documentation>
      </xs:annotation>
    </xs:attribute>
    <xs:attribute name="Description">
      <xs:simpleType>
        <xs:restriction base="xs:string">
          <xs:minLength value="0"/>
          <xs:maxLength value="128"/>
        </xs:restriction>
      </xs:simpleType>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="TotalQuoteType">
    <xs:annotation>
      <xs:documentation>Describes a Quote</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Price" type="ctr:PriceType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent price information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Tax" type="ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation xml:lang="en">Represent tax information</xs:documentation>
        </xs:annotation>
      </xs:element>
      <xs:element name="Fee" type="ctr:TaxType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Represent fee information</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
  </xs:complexType>
  <xs:complexType name="UnnamedPassengerType">
    <xs:annotation>
      <xs:documentation>Describes a Passenger</xs:documentation>
    </xs:annotation>
    <xs:sequence>
      <xs:element name="Reduction" type="ctr:ReductionType" minOccurs="0" maxOccurs="99">
        <xs:annotation>
          <xs:documentation>Indicate a reduction (railcard, corporate code, etc.) applicable to the passenger</xs:documentation>
        </xs:annotation>
      </xs:element>
    </xs:sequence>
    <xs:attribute name="BirthDate" type="xs:date" use="optional">
      <xs:annotation>
        <xs:documentation xml:lang="en">Indicates the date of birth as in ISO 8601 prescribed format.</xs:documentation>
      </xs:annotation>
    </xs:attribute>
  </xs:complexType>
  <xs:complexType name="WarningType">
    <xs:annotation>
      <xs:documentation>Describes a Warning</xs:documentation>
    </xs:annotation>
    <xs:simpleContent>
      <xs:extension base="ctr:StringLength0to255">
        <xs:attribute name="Code" type="ctr:NumericStringLength1to8" use="required"/>
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part><con:part><con:url>https://dev.amr.local/railconnect/commit_refund/xsd/RailConnect_CommitRefundRS.xsd</con:url><con:content><![CDATA[<!--edited with XMLSpy v2013 rel. 2 sp2 (x64) (http://www.altova.com) by ﻿AMADEUS s.a.s. (AMADEUS s.a.s.)-->
<xs:schema elementFormDefault="qualified" attributeFormDefault="unqualified" version="1.000" id="CTRAIL" targetNamespace="CommitRefundRS" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:ctr="ctr">
  <xs:import namespace="ctr" schemaLocation="Type/RailConnect_Commit_Refund_CTR_Types.xsd"/>
  <xs:element name="RailConnect_CommitRefundRS">
    <xs:annotation>
      <xs:documentation>User response with rail contract(s) refund outcome</xs:documentation>
    </xs:annotation>
    <xs:complexType>
      <xs:choice>
        <xs:element name="Success">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Booking" type="ctr:BookingType" minOccurs="0"/>
              <xs:element name="Contract" minOccurs="0" maxOccurs="99">
                <xs:annotation>
                  <xs:documentation>Refunded contracts</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="ctr:ContractType">
                      <xs:sequence>
                        <xs:element name="Quote" minOccurs="0" maxOccurs="9">
                          <xs:annotation>
                            <xs:documentation>Informative refund amounts (penalty, resulting amount, etc..)</xs:documentation>
                          </xs:annotation>
                          <xs:complexType>
                            <xs:complexContent>
                              <xs:extension base="ctr:PriceType">
                                <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                                  <xs:annotation>
                                    <xs:documentation xml:lang="en">Type of Price</xs:documentation>
                                  </xs:annotation>
                                </xs:attribute>
                              </xs:extension>
                            </xs:complexContent>
                          </xs:complexType>
                        </xs:element>
                        <xs:element name="TaxQuote" type="ctr:TaxType" minOccurs="0" maxOccurs="9">
                          <xs:annotation>
                            <xs:documentation>Informative refund tax amounts</xs:documentation>
                          </xs:annotation>
                        </xs:element>
                      </xs:sequence>
                      <xs:attribute name="Refundable" type="xs:boolean"/>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Quote" minOccurs="0" maxOccurs="9">
                <xs:annotation>
                  <xs:documentation>Confirmed total refund amounts (penalty, resulting amount, etc..)</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:complexContent>
                    <xs:extension base="ctr:PriceType">
                      <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                        <xs:annotation>
                          <xs:documentation xml:lang="en">Type of Price</xs:documentation>
                        </xs:annotation>
                      </xs:attribute>
                    </xs:extension>
                  </xs:complexContent>
                </xs:complexType>
              </xs:element>
              <xs:element name="Options" minOccurs="0">
                <xs:annotation>
                  <xs:documentation>Refund options which have applied</xs:documentation>
                </xs:annotation>
                <xs:complexType>
                  <xs:sequence>
                    <xs:element name="Remark" minOccurs="0">
                      <xs:annotation>
                        <xs:documentation>Remarks</xs:documentation>
                      </xs:annotation>
                      <xs:complexType>
                        <xs:simpleContent>
                          <xs:extension base="xs:string">
                            <xs:attribute name="SegIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Segment IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="PaxIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Passenger IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="PrdIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Product IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="AccIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Accomodation IDs which the element refers
                                  to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="ContrIDs" type="xs:IDREFS">
                              <xs:annotation>
                                <xs:documentation>It can contain a list of Contract IDs which the element refers to.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                            <xs:attribute name="Type" type="xs:NMTOKEN" use="optional">
                              <xs:annotation>
                                <xs:documentation>Standard, Accounting, etc.</xs:documentation>
                              </xs:annotation>
                            </xs:attribute>
                          </xs:extension>
                        </xs:simpleContent>
                      </xs:complexType>
                    </xs:element>
                  </xs:sequence>
                  <xs:attribute name="ReasonCode" type="xs:NMTOKEN" use="optional">
                    <xs:annotation>
                      <xs:documentation>The refund reason code (passenger request, strike, operator error, approved by
                        provider, etc.). Refer to code list RRC.</xs:documentation>
                    </xs:annotation>
                  </xs:attribute>
                </xs:complexType>
              </xs:element>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="Failure">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="Warning" type="ctr:WarningType" minOccurs="0" maxOccurs="99"/>
              <xs:element name="Error" type="ctr:ErrorType" minOccurs="0" maxOccurs="99"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
      </xs:choice>
      <xs:attribute name="Distributor" type="xs:string">
        <xs:annotation>
          <xs:documentation>Distributor channel</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Language" type="xs:language" use="optional">
        <xs:annotation>
          <xs:documentation xml:lang="en">Identifies language preference for the message. The human language is
            identified by ISO 639 codes.</xs:documentation>
        </xs:annotation>
      </xs:attribute>
      <xs:attribute name="Options" type="xs:NMTOKENS">
        <xs:annotation>
          <xs:documentation/>
        </xs:annotation>
      </xs:attribute>
      <xs:attributeGroup ref="ctr:PayloadStdAttributes"/>
    </xs:complexType>
  </xs:element>
</xs:schema>]]></con:content><con:type>http://www.w3.org/2001/XMLSchema</con:type></con:part></con:definitionCache><con:endpoints><con:endpoint>https://dev.amr.local/railconnect/commit_refund</con:endpoint></con:endpoints><con:operation id="43dcec8e-52a2-43de-ae86-e05f02860240" isOneWay="false" action="https://dev.amr.local/railconnect/commit_refund" name="commitRefundAction" bindingOperationName="commitRefundAction" type="Request-Response" inputName="" receivesAttachments="false" sendsAttachments="false" anonymous="optional"><con:settings/><con:call id="82b3c448-fd10-43bd-b798-48cf312b6316" name="Request 1"><con:settings/><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">\r
   <soap:Header/>\r
   <soap:Body>\r
      <com:RailConnect_CommitRefundRQ Language="?" Options="?" Distributor="?" TimeStamp="?" Version="?" CorrelationID="?">\r
         <!--Optional:-->\r
         <PnrIdentification PnrReference="?" Inventory="?"/>\r
         <!--Optional:-->\r
         <ContractSelection RefContractNumbers="?"/>\r
         <!--0 to 99 repetitions:-->\r
         <MethodOfPayment>\r
            <!--You have a CHOICE of the next 3 items at this level-->\r
            <!--Optional:-->\r
            <Card HolderName="?" FraudStatus="?">\r
               <!--Optional:-->\r
               <AddressVerificationSystemValue CityName="?" PostalCode="?" Country="?">\r
                  <!--0 to 5 repetitions:-->\r
                  <Line xsi:type="ctr:StringLength1to64" xmlns:ctr="ctr">?</Line>\r
               </AddressVerificationSystemValue>\r
               <!--0 to 4 repetitions:-->\r
               <MagneticTrack Type="?">?</MagneticTrack>\r
               <!--Optional:-->\r
               <Issuance Country="?">\r
                  <Bank Name="?" ID="?"/>\r
               </Issuance>\r
               <!--Optional:-->\r
               <PrimaryAccountNumber xsi:type="ctr:StringLength1to32" xmlns:ctr="ctr">?</PrimaryAccountNumber>\r
               <!--Optional:-->\r
               <CVV KnoxID="?">?</CVV>\r
               <!--Optional:-->\r
               <ApprovalCode Source="?">?</ApprovalCode>\r
               <!--Optional:-->\r
               <Vendor Code="?" SubType="?"/>\r
               <!--Optional:-->\r
               <Validity StartDate="?" EndDate="?"/>\r
            </Card>\r
            <!--Optional:-->\r
            <Invoice Reference="?"/>\r
            <!--Optional:-->\r
            <Cash xsi:type="xsd:anyType">?</Cash>\r
         </MethodOfPayment>\r
         <!--Optional:-->\r
         <FormatAndDelivery xsi:type="ctr:TicketingOptionType" Type="?" DeliveryMode="?" Description="?" xmlns:ctr="ctr"/>\r
         <!--Optional:-->\r
         <Options ReasonCode="?">\r
            <!--Optional:-->\r
            <Remark Type="?">?</Remark>\r
         </Options>\r
      </com:RailConnect_CommitRefundRQ>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508" action="railconnect_ws/RailConnectWSPortCommitRefund/commitRefundActionRequest"/><con:wsrmConfig version="1.2"/></con:call></con:operation></con:interface><con:testSuite id="629e931e-f6a7-4b55-8d1b-a2d785d96db4" name="RAILCONNECT_RENFE"><con:settings/><con:runType>SEQUENTIAL</con:runType><con:testCase id="6137a69a-163c-4297-8f50-a69f7d98498a" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search_OneWay" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="78480c4b-de35-4cbb-a029-97f386387808"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN 1pas ByDepartureDateTime" id="48914234-c159-4c2d-9f66-77d66d162f8d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN 1pas ByDepartureDateTime" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123dfghfgh" Distributor="RNF" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T00:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="1997-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="55c5fa3e-9661-4408-aae4-26d7a5dc5526" name="&lt;ScheduleSolution"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="fc701626-73dd-4546-b8b1-9669b4b78d7d" name="&lt;Passenger"><con:configuration><token>&lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13ba396c-5145-493a-a58c-9d55cd9be894" name="Contains 3"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4f2efe2-84d9-4707-8f80-913e5c191fde" name="&lt;PricingSolution"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="473e609b-c6c2-49da-8521-7f5f4f734229" name="Contains 5"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="71bc36e7-b018-473a-91a7-435341aa8611" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e77a2657-39e4-4732-88b1-98526879e3fa" name="Contains 7"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="aa523e64-7f31-4658-9a8d-7a567aa4007f" name="Contains 8"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4ef49730-ddab-4369-a52c-e98186184104" name="&lt;Warning xsi:type=&quot;ns1:WarningType&quot; Code=&quot;906&quot;>LOW AVAILABILITY - BOOKING MIGHT FAIL&lt;/Warning> "><con:configuration><token>&lt;Warning Code="906">LOW AVAILABILITY - BOOKING MIGHT FAIL&lt;/Warning>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SLM 2pas" id="6540a6bd-2f67-4aed-a411-f9d5947e19df"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SLM 2pas" id="98a41825-7f61-43f9-aa94-ba89577f7082"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123dfghfgh" Distributor="RNF" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T00:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="1997-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="c1202e80-6d0c-4a0a-8529-f67c50c9d516"/><con:assertion type="Simple Contains" id="a7767a2b-ed21-498c-91a9-6346d534345b" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="9671bd1a-0c32-4fc7-aad5-73c0a2963b40" name="XPath Match"><con:configuration><path>declare namespace ns2='ScheduleRS';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='ctr';
count(//Passenger)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="91ec0b27-a7e6-4e01-be32-8aba01fdd724" name="Contains 1"><con:configuration><token>ID="SCH</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="22ea2446-a0b0-4653-9528-77742ee28002" name="Contains 2"><con:configuration><token>ID="SEG</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="a2f80dc5-aad2-41eb-90eb-c067deedb262" name="Contains 3"><con:configuration><token>ID="PAX</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9637429f-d9da-4a36-acfa-57f4fe151f1a" name="Contains 4"><con:configuration><token>ID="RED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f86c9990-2269-450a-972c-ab3d489acbbf" name="Contains 5"><con:configuration><token>ID="PRD</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d4229174-d100-4fd0-8978-6942060e81cd" name="Contains 6"><con:configuration><token>ID="FAR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e7799e89-f69f-4c74-afac-cc3bb0ead44a" name="Contains 7"><con:configuration><token>ID="SSL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c7dc147e-dab5-4030-94a0-2154d598ab20" name="Contains 8"><con:configuration><token>ID="PSL</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert CorrelationId" id="16238bf3-6e8e-481b-aa9c-413158997437"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xmlResp = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
  def xmlReq = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Request").getXml()
def xmlSlurperResp = new XmlSlurper().parseText(xmlResp)
def xmlSlurperReq = new XmlSlurper().parseText(xmlReq)
assert xmlSlurperResp instanceof groovy.util.slurpersupport.GPathResult
assert xmlSlurperReq instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurperResp.Body.RailConnect_ScheduleQuoteRS.@CorrelationID==xmlSlurperReq.Body.RailConnect_ScheduleQuoteRQ.@CorrelationID

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment attributes" id="40837821-7292-49dc-be3c-f1200c8bd5d2"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.@ExtID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].@ID!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].@Duration!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].@Type!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].@SubType!=''
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment Departure" id="b56e1b1c-7565-4e05-a2a9-6ef17325bb64"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Departure.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Departure.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Departure.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Departure.LocationCode!=''

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment Arrival" id="b1c1240b-67ec-44f7-89e8-c7acfb6373e9"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Arrival.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Arrival.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Arrival.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Arrival.LocationCode!=''

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment elements" id="a2f83ca4-a026-4777-a073-bf8dc53ededd"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].ServiceProviderCode=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Identifier!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Vehicle.@Code!=xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Identifier
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Vehicle.@Code!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].ServiceOnBoard.@Code!=''</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Schedule solution" id="4018ecb9-f8fb-4b43-ab13-2f3235022ed7"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].@SegIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Departure.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Departure.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Departure.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Departure.LocationCode!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Arrival.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Arrival.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Arrival.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.ScheduleSolution[0].Arrival.LocationCode!=''</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Passenger" id="c8148f42-9da1-470d-a1f3-65f049b8d2cb"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Passenger[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Passenger[0].@ExtID!=''
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Product" id="984cb547-4861-4116-bfc8-c34913606224"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@Type=='002'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@Class!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@MainClass!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@AccomType!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@DisplayName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@ID!=''</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Fare" id="8568b9a1-26ca-40e6-aae6-a4db8534aea3"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Code!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Flexibility!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@DisplayName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Family!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Type!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].Condition=='http://www.renfe.com/viajeros/tarifas/'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Pricing Solution Attr" id="c7fc7e83-4eab-4cbe-8467-73c12f5f897e"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].@SslIDs !=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].@Avail!='' 

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Total Quote" id="bf219835-7948-4079-8c88-60d1f3521755"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@CurrencyCode=='EUR'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@DecimalPlaces=='2'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@Amount!=''

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Detailed Quote" id="5a640077-af50-4748-af3a-12abd7210db3"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@SegIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@PaxIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@FareIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@PrdIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@CurrencyCode=='EUR'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@DecimalPlaces=='2'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@Amount!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].BookingToken!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].@RedIDs!=''
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert TicketingOption" id="be49a6b7-06af-4dbc-b2ea-511a2e305531"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TicketingOption.@Type!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TicketingOption.@DeliveryMode!=''
 


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Reduction" id="f2b8481d-9a49-473c-bee4-d4f7f2cac098"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Reduction.@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Reduction.@PaxIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Reduction.@Description=='Adult'
 assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Reduction.PassengerCategoryCode=='006'


</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SLM AdultAndChild" id="160aef39-8ce2-42e1-a475-9c607622fd65"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SLM AdultAndChild" id="bc656c34-6846-499f-9a5c-d9a104e33b48"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="78726aa2-0f82-4947-88db-8215e16d3810"/><con:assertion type="Simple Contains" id="14ac249a-8494-481a-adf9-401a25cf2e36" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="a2c89008-89da-466a-bfa0-4d6776a5d460" name="XPath Match"><con:configuration><path>declare namespace ns2='ScheduleRS';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='ctr';
count(//Passenger)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="95256df7-120b-4be4-8336-0c9ff6241aae" name="Contains 1"><con:configuration><token>&lt;PassengerCategoryCode>002&lt;/PassengerCategoryCode></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="06567d23-16ec-4999-bc83-1af7b17ceeae" name="Contains 2"><con:configuration><token>Description="Child"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert adult and child" id="763e68ad-8351-40f1-8f84-9fb676863b47"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM AdultAndChild#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@Amount!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[1].Price.@Amount!=''
 


</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SLM AdultAndChildFree" id="7e3898be-2c61-42ec-99b0-d011ba641051"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SLM AdultAndChildFree" id="384c0a2b-d5bd-4cfa-a09c-f9ea5813199e"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
        </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="85a52268-83f3-4d26-ad30-c04e8a997f8f"/><con:assertion type="XPath Match" id="497dd4e4-e905-448c-84cc-ee0a9522fd5a" name="XPath Match"><con:configuration><path>declare namespace ns2='ScheduleRS';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='ctr';
count(//Passenger)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="14218922-11cb-4c5e-8151-bb9fe3380ee7" name="Contains"><con:configuration><token>&lt;PassengerCategoryCode>001&lt;/PassengerCategoryCode></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert adult and childFree" id="0cc28f01-9473-43bd-bd7c-c9bacbb22509"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SLM AdultAndChildFree#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@Amount!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[1].Price.@Amount=='0'
 


</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN  ByBothDates_NEG" id="9019709e-e65f-4c8d-ae61-6103fed00250"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN  ByBothDates_NEG" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
                <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T09:00:00</Departure>
               <Arrival xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T09:00:00</Arrival>
            </DateTime>
            <SearchCriteria Code="TCC" Value="001" PreferLevel="Unacceptable"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Arrival': This element is not expected.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Search invalid departure NEG" id="39c95b8d-e58b-4316-854f-969f4c14abb4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="Search invalid departure NEG" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">dfg</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>INVALID LOCATION CODE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Search invalid arrival NEG" id="550c8e0f-2803-4d66-a039-f65d6ece5891"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="Search invalid arrival NEG" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">asd</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>INVALID LOCATION CODE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Search departure from past NEG" id="3912520e-260f-476a-879f-599788c4dbcf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="Search departure from past NEG" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()-4).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>INVALID DEPARTURE DATE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Copy of Search departure too far NEG" id="5d19eeb3-81af-47b7-b2ab-712ad8738f94"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="Copy of Search departure too far NEG" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+100).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>Error</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-VLC 9pas" id="5c23b4d9-19a0-44c8-aa15-3315240ec0b1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-VLC 9pas" id="6ae3caf0-21b7-4477-a289-f96dcfd2ce5a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="001" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="1996-01-01" ExtID="1">
         </Passenger>
         <Passenger ExtID="2">
         </Passenger>
         <Passenger BirthDate="1950-01-01" ExtID="3">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="4">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="5">
         </Passenger>
         <Passenger BirthDate="1958-01-01" ExtID="6">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="7">
         </Passenger>
         <Passenger BirthDate="2016-01-01" ExtID="8">
         </Passenger>
         <Passenger BirthDate="2010-01-01" ExtID="9">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="4f90415c-4878-4c6d-9fc0-1b883c396a53"/><con:assertion type="Simple Contains" id="6450bd18-8d39-4652-9c71-1944c431b59c" name="Contains"><con:configuration><token>ExtID="9"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-VLC 10pas" id="fe2b50aa-61eb-4c94-aaeb-9abcf0e08ebd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-VLC 10pas" id="6ae3caf0-21b7-4477-a289-f96dcfd2ce5a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T09:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="001" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="1996-01-01" ExtID="1">
         </Passenger>
         <Passenger ExtID="2">
         </Passenger>
         <Passenger BirthDate="1950-01-01" ExtID="3">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="4">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="5">
         </Passenger>
         <Passenger BirthDate="1958-01-01" ExtID="6">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="7">
         </Passenger>
         <Passenger BirthDate="2016-01-01" ExtID="8">
         </Passenger>
         <Passenger BirthDate="2010-01-01" ExtID="9">
         </Passenger>
         <Passenger BirthDate="2010-01-01" ExtID="9">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="4f90415c-4878-4c6d-9fc0-1b883c396a53"/><con:assertion type="Simple Contains" id="6450bd18-8d39-4652-9c71-1944c431b59c" name="Contains"><con:configuration><token>Max number of passengers for renfe is 9</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Search missing shedule ExtId NEG" id="32de62fd-4ac0-4dfd-9bb4-ce3daa840581"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="Search missing shedule ExtId NEG" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule>
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>Tag "Schedule" requires attribute "ExtId"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6a756de0-c15e-430e-ba32-69a231f193d4" name="Not Contains 2"><con:configuration><token>xsi:nil=”true”</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="Search missing pass ExtId NEG" id="4c782b20-e92f-49e7-a76c-ce8f9127060f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="Search missing pass ExtId NEG" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>Tag "Passenger" requires attribute "ExtId"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="cdeb2319-b48a-4776-9194-0bca07497ca0" name="Not Contains 2"><con:configuration><token>xsi:nil=”true”</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN 1pas Birth from future" id="e77c985d-0db4-4ecd-91b1-3767a43e6cb1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN 1pas Birth from future" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2020-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>INVALID DATE ENTERED FOR DATE OF BIRTH</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN optionalSearchCriteria" id="adc1d068-2ce7-444b-a25a-41079d4e4134"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN optionalSearchCriteria" id="e1c98ef9-84bb-434f-a0b0-4037c4edc420"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T09:30:00</Departure>
            </DateTime>
              </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="ecc0a798-2887-4b41-a3c4-34aeae971c25"/><con:assertion type="Simple Contains" id="5ff73c6f-02f8-4ad2-824e-1a7d3c878e54" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN 1pas ByArrivalDateNEG" id="1f133944-c40b-4797-bda3-da9ce9340fd1" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN 1pas ByArrivalDateNEG" id="d3d12f56-9de6-45c1-9744-78cb1f261e79"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Arrival xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+10).format('yyyy-MM-dd')}T09:30:00</Arrival>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="0cb0d811-40d1-40a5-85b3-12e7a4f4a800"/><con:assertion type="Simple Contains" id="e759a4f4-ff86-49ba-a462-f68f8a836eed" name="Contains"><con:configuration><token>INVALID ARRIVAL DATE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchPAR-BCN" id="a4375a5a-787c-4d13-b722-f14da11f4638"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchPAR-BCN" id="9c1b4b87-5e5c-4dba-a8d1-ab6c38e5beb4"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123dfghfgh" Distributor="RNF" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">8700013</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
        
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="509197ce-7749-4d81-ac63-47c831d80e11"/><con:assertion type="Simple Contains" id="f3b82b21-f744-401b-b4a2-5a34f8fdb192" name="Contains"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="55c5fa3e-9661-4408-aae4-26d7a5dc5526" name="&lt;ScheduleSolution"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="fc701626-73dd-4546-b8b1-9669b4b78d7d" name="&lt;Passenger"><con:configuration><token>&lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="13ba396c-5145-493a-a58c-9d55cd9be894" name="Contains 3"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f4f2efe2-84d9-4707-8f80-913e5c191fde" name="&lt;PricingSolution"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="473e609b-c6c2-49da-8521-7f5f4f734229" name="Contains 5"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="71bc36e7-b018-473a-91a7-435341aa8611" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e77a2657-39e4-4732-88b1-98526879e3fa" name="Contains 7"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="aa523e64-7f31-4658-9a8d-7a567aa4007f" name="Contains 8"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="6f6a7c2f-d923-4de0-98c8-041db8464dee" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="393875ac-c84e-4f63-803c-a8d79f58f06c" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3b669b1d-d949-431c-9c2b-adff221fd71e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="SearchCriteria One_Way" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="61fe0e08-1b22-4339-9abf-a2a6b8a9552f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV with Search Criteria Only" id="a64e766b-c608-487f-b25c-5c3ab542e6f6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV with Search Criteria Only" id="de43d148-3b73-4af0-9be3-9137ce8290bb"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
              <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6dc784c3-26bc-44ae-bcff-4347e77ed363"/><con:assertion type="Simple NotContains" id="d9c52aed-27d2-41f9-aa39-e3d2f17e1804" name="Not Contains"><con:configuration><token>Class="001"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b13816cf-2004-4288-8ab1-77ff2c5c3623" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert class 002" id="84dcae6d-4bc3-404f-8fa6-f59c5dea8bce"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SEV with Search Criteria Only#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@Class=='002'</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV with Search Criteria Preffered" id="8c6d3422-8e5b-4e99-a4d8-720f88a8d972"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV with Search Criteria Preffered" id="de43d148-3b73-4af0-9be3-9137ce8290bb"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="001" PreferLevel="Preferred"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6dc784c3-26bc-44ae-bcff-4347e77ed363"/><con:assertion type="Simple Contains" id="b13816cf-2004-4288-8ab1-77ff2c5c3623" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert class 001" id="283a2423-c31b-49ac-a4d8-3541dec3257c"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchMAD-SEV with Search Criteria Preffered#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@Class=='001'</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV with Search Criteria Unacceptable" id="e84c465a-c015-48ea-96e4-2f48a0cf2e47"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV with Search Criteria Unacceptable" id="de43d148-3b73-4af0-9be3-9137ce8290bb"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="001" PreferLevel="Unacceptable"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="6dc784c3-26bc-44ae-bcff-4347e77ed363"/><con:assertion type="Simple NotContains" id="d9c52aed-27d2-41f9-aa39-e3d2f17e1804" name="Not Contains"><con:configuration><token>Class="001"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b13816cf-2004-4288-8ab1-77ff2c5c3623" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV with Search Criteria unexisted code" id="7bb9e94a-2ed3-43da-a201-8a9877a69d12" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV with Search Criteria unexisted code" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
              <SearchCriteria Code="FDFD" Value="001" PreferLevel="Unacceptable"/>
         </Schedule>
       
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="79338580-0967-4b72-90cb-894ab1882713" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f60549ab-d977-4693-bcdb-2d814e001446" name="warning"><con:configuration><token>warning</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV with Search Criteria unexisted value" id="32a5271d-9d04-45df-8ef5-7ae3108088d8" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV with Search Criteria unexisted value" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="321" PreferLevel="Only"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="4cb63e75-0372-472d-b874-6c2ba665cc14" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f44c004e-c49f-4739-aa4b-b4d9a08458f7" name="warning2"><con:configuration><token>warning</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV with Search Criteria unexisted preferLevel" id="cf6f6cd0-5abc-42f3-94ed-b16e7d39c313" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV with Search Criteria unexisted preferLevel" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="all"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="cea89066-689c-4d51-b983-1deb3c3d3516" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="f1e9b21b-4546-4667-bb3f-2b9923b03af1" name="Contains 1"><con:configuration><token>warning</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="af7c92d0-1973-42aa-b720-4667238fac6a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search_Reductions OneWay" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="6ebe0ed8-d519-47c8-ad95-c6adc30761e7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions  railcard" id="9591b398-f3ca-4e8b-b746-41632809aace"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions  railcard" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <SearchCriteria Code="TCC" Value="002" PreferLevel="Preffered"/>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="46ba5901-9aa1-49f8-a9f2-65a879d2a2ac" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions railcard several" id="c9f31926-bca7-453f-ac33-486fce03438d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions railcard several" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <SearchCriteria Code="TCC" Value="002" PreferLevel="Preffered"/>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE2</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2ee5bff2-bbf4-4c2e-9542-9e4d6f18d1cf" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions railcard missed vendor" id="8a4d0f0b-696c-43b9-859a-ccf88ca446c5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions railcard missed vendor" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <SearchCriteria Code="TCC" Value="002" PreferLevel="Preffered"/>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE2</RailcardCode>
               
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Not SOAP Fault Assertion" id="eca29fba-2b4e-41ec-9b32-8b37a872498b" name="SOAP Fault"/><con:assertion type="Simple Contains" id="25510e05-8ed2-4faf-835b-6e9e0cf13d51" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions corporate" id="2a910da3-6180-403a-a7e2-1dfcfaa21c5b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions corporate" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Preferred"/>
         </Schedule>
        
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="de9ae4d6-da91-4ede-ac9a-b17d8527d29e" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="4544e907-89a3-4f39-bf38-64edaae71fa8" name="reduction"><con:configuration><token>reduction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions corporate not all pas" id="97cbdac9-92d4-4f19-830f-d4f8ca4e2cd0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions corporate not all pas" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
         </Passenger>
          <Passenger BirthDate="1990-01-01" ExtID="1">
           </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="c8b47262-b26e-44b1-bb16-1891e5645c9c" name="Contains"><con:configuration><token>reduction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions corporate missed vendor" id="73ac2464-3797-45e3-9158-75c07843e303"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions corporate missed vendor" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
             
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="9d5e5c00-00e4-4340-a937-db5d3723f720" name="Contains"><con:configuration><token>reduc</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions campaign" id="565eeca3-80d8-468e-b548-4ebc3b0bde19"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions campaign" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="bda625ec-ae7a-436a-a1ac-0b3ec052c6f4" name="Contains"><con:configuration><token>reduct</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions campaign missed vendor" id="c6981082-6c93-4166-b3ba-9d1a20c25e6e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions campaign missed vendor" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Preferred"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
           </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="6551f9f4-6974-4ea7-bf40-34beed0078c1" name="Contains"><con:configuration><token>reduction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions passCategory" id="af48708a-a1d7-4852-9667-b622b07cc3fb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions passCategory" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">004</PassengerCategoryCode>
              
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="c35ba5e0-8b97-4129-bdf7-0330c44ab615" name="Contains"><con:configuration><token>reduction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions mix" id="93ba96b0-9fbd-4a5a-9ccd-c9168182013c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions mix" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">004</PassengerCategoryCode>
              
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="f94e3edc-0ef6-4a27-85c1-128229e5bbad" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchMAD-SEV reductions mix more then 8" id="c1f94ccf-2b12-4d57-b437-dfd72f19a4e1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-SEV reductions mix more then 8" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
           <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">51003</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         
         <Passenger BirthDate="2000-01-01" ExtID="1">
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">004</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">001</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">002</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">003</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">005</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
           </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="9acb6513-1df5-49bd-8c68-1703982522f3" name="Contains"><con:configuration><token>reduct</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="2c540fc2-85a5-404a-902a-ae89a506d5f1" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search_RT" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="ceaee493-a890-4399-95eb-a358c04da275"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN 1pas ByDepartureDate" id="452f433b-4590-41af-a2da-00195ee04b65"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN 1pas ByDepartureDate" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="b99a4f1f-89a4-4a36-8f96-e983bf45de68" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="0c046d7c-4f21-467e-b15f-ae9642e368ac" name="Contains 1"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7bd802cc-9b84-4a99-9037-f4460e8eb961" name="Contains 2"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="45c6c880-5226-4505-b7c1-cec75c50135e" name="Contains 3"><con:configuration><token>&lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7bb7ae73-5538-44c5-a99f-877e066e03c1" name="&lt;Reduction"><con:configuration><token>&lt;Reduction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9e67587d-383f-4da8-908e-59a0a47ff435" name="Product"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c938d918-5493-4f90-8738-f3d2399c685f" name="Contains 6"><con:configuration><token>&lt;Pricing</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="5f2dedda-71d1-42aa-84d7-9ab987d52e1c" name="Contains 7"><con:configuration><token>&lt;TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3f3d0e80-a791-47fb-8d9b-1b1cccf367ff" name="Contains 9"><con:configuration><token>&lt;PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SLM 2pas" id="9adba5db-7320-4b57-85f8-5866073d52df"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SLM 2pas" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
          <Passenger BirthDate="2000-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="5e535967-6fee-4163-a424-e0ee77b67ed7" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="3a22cd59-ad7b-4159-9cc0-3884cc0fbb68" name="Contains 1"><con:configuration><token>&lt;ServiceOnBoard Code="005"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6d5bff3d-65a2-47af-a7cd-f403cd0a2741" name="ToBeSoldWith"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment Departure" id="2650748f-865e-4a0d-bbdc-368e292c67fd"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
def xml = groovyUtils.getXmlHolder("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Departure.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Departure.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Departure.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Departure.LocationCode!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Departure.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Departure.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Departure.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Departure.LocationCode!=''

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment attributes" id="a70242eb-b4eb-409d-a839-df0021312b58"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].@ExtID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].@ExtID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].@ID!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].@Duration!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].@Type!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].@SubType!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].@ID!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].@Duration!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].@Type!=''
assert xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].@SubType!=''
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment Arrival" id="65dd399f-3922-4a91-bd43-5c2a22cd14e6"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Arrival.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Arrival.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Arrival.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Arrival.LocationCode!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Arrival.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Arrival.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Arrival.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Arrival.LocationCode!=''

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Segment elements" id="cb2f8407-4a87-4e0a-8b4b-deb2f165158c"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].ServiceProviderCode=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Identifier!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Vehicle.@Code!=xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Identifier
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].Segment[0].Vehicle.@Code!=''
 


assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].ServiceProviderCode=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Identifier!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Vehicle.@Code!=xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule.Segment[0].Identifier
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].Vehicle.@Code!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[0].ServiceOnBoard.@Code!=''||xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].Segment[1].ServiceOnBoard.@Code!=''
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Schedule solution" id="5b875a65-ee19-4e4b-bd7a-d90fa8e0a49a"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].@SegIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Departure.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Departure.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Departure.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Departure.LocationCode!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Arrival.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Arrival.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Arrival.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[0].ScheduleSolution[0].Arrival.LocationCode!=''

assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].@SegIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Departure.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Departure.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Departure.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Departure.LocationCode!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Arrival.@LocationName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Arrival.@DateTime!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Arrival.LocationCode.@Context=='RNF'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Schedule[1].ScheduleSolution[0].Arrival.LocationCode!=''</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Passenger" id="2ef3920d-5a20-4b3d-94e1-8f2f04231d5a"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Passenger[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Passenger[0].@ExtID!=''
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Product" id="c4029def-e509-47de-bb21-f921bbd320f1"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@Type=='002'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@Class!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@MainClass!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@AccomType!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@DisplayName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@ID!=''</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Fare" id="d38985b8-eff6-48cb-9ff8-077cf7b7b926"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Code!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Flexibility!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@DisplayName!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Family!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].@Type!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.Fare[0].Condition=='http://www.renfe.com/viajeros/tarifas/'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Pricing Solution Attr" id="a86e4d49-fd83-4232-beb0-7a1062e6eaab"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].@SslIDs !=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].@Avail!=''

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Total Quote" id="d9c58cd5-1905-416d-9027-3a4385cd84f7"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@CurrencyCode=='EUR'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@DecimalPlaces=='2'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@Amount!=''

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Detailed Quote" id="d752bab3-158f-4867-87f0-d5c7d88ef4a4"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@SegIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@PaxIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@FareIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@PrdIDs!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@CurrencyCode=='EUR'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@DecimalPlaces=='2'
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@Amount!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].BookingToken!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.@RedIDs!=''
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert TicketingOption" id="9bcb92b6-bb66-43f6-8cc3-ed45e3503e87"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TicketingOption.@Type!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TicketingOption.@DeliveryMode!=''
 


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert Reduction" id="9cb89ec6-9067-4670-b5d0-7ac038d6d493"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM 2pas#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Reduction.@ID!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Reduction.@PaxIDs!=''
 assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Reduction.PassengerCategoryCode=='006'


</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SLM Adult and Child" id="f7a010cb-39a3-417e-8fe8-ffdcc4c15e20"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SLM Adult and Child" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="5e535967-6fee-4163-a424-e0ee77b67ed7" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert adult and child" id="2b944e54-8d90-42cb-9ab0-21e765147d65"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM Adult and Child#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@Amount!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[1].Price.@Amount!=''
 


</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SLM Adult and ChildFree" id="96370f77-cbfe-44b1-a6fb-533fd2e722c4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SLM Adult and ChildFree" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="5e535967-6fee-4163-a424-e0ee77b67ed7" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert adult and childFree" id="cef06ad0-1fd6-4635-9737-bd50accaaedf"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SLM Adult and ChildFree#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[0].Price.@Amount!=''
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote[1].Price.@Amount=='0'
 


</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-VLC 9pas ByMixDate" id="168a74b5-841d-4e06-bbdb-cd36cacd39cf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-VLC 9pas ByMixDate" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">VALEN</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="1990-01-01" ExtID="2">
         </Passenger>
          <Passenger BirthDate="2000-01-01" ExtID="3">
         </Passenger>
         <Passenger BirthDate="1990-01-01" ExtID="4">
         </Passenger>
          <Passenger BirthDate="2000-01-01" ExtID="5">
         </Passenger>
         <Passenger BirthDate="1990-01-01" ExtID="6">
         </Passenger>
          <Passenger BirthDate="2000-01-01" ExtID="7">
         </Passenger>
         <Passenger BirthDate="1990-01-01" ExtID="8">
         </Passenger>
          <Passenger BirthDate="2000-01-01" ExtID="9">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="3277cd11-c43d-48af-95ce-79ae9ecf112b" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="954814f7-4c1f-4ff7-b410-3cc7c3a977a0" name="XPath Match"><con:configuration><path>declare namespace ns2='ScheduleRS';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='ctr';
count(//Passenger)</path><content>9</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN arrival early departure" id="d8ccddc4-da94-4348-8950-c3ce4e88be21"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN arrival early departure" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="b7f09c04-807b-438a-9573-2cfc3eb5d502" name="Contains"><con:configuration><token>GOING/RETURN DATES/TIMES NOT VALID</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN  ByBothDates" id="f49e00f0-fc63-4348-815f-c3527aa5915d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN  ByBothDates" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
                <Arrival xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Arrival>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="8547f95f-d8ec-460b-a951-0bed102c82a4" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Arrival': This element is not expected</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN invalid departure" id="849655fd-3c44-449b-82ce-7b37b2977489"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN invalid departure" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">sdf</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="d1e4b997-7611-4d3d-bbf7-39c514be9eaf" name="Contains"><con:configuration><token>Mismatched location codes values for corresponding data in schedules</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN invalid arrival" id="5350d9cc-d515-4630-9240-c7519628a660"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN invalid arrival" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">sdf</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="f65049fb-3492-4aca-8c14-5fec61738e18" name="Contains 1"><con:configuration><token>Mismatched location codes values for corresponding data in schedules</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN  ByDepartureDate from past" id="6780c2a3-2725-45aa-a7c3-8556cbfe8771"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN  ByDepartureDate from past" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()-4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="d6e92056-ac59-4e1d-bb76-0b43cc9060a9" name="Contains"><con:configuration><token>INVALID DEPARTURE DATE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN no Shed ExtId" id="ee5a221d-7682-4f79-8193-9f84a6b37b12"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN no Shed ExtId" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule>
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="93be0133-f805-49d4-9043-6d0b95c6bcfe" name="Contains"><con:configuration><token>Tag "Schedule" requires attribute "ExtId"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="49b442e9-cf70-4ec8-8328-f4b19aad58b6" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="SearchCriteria RT" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="d1f9f626-82ea-445e-9eba-e8c84ee73abe"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV with Search Criteria Only" id="10f123ac-ca2f-46be-92a3-3064478368e7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV with Search Criteria Only" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="c7dfc270-c079-448c-b4ef-054fe3f59263" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert class 002" id="29237fff-b214-42b7-b4fd-aa7db7c09c65"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SEV with Search Criteria Only#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[0].@Class=='002'</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV with Search Criteria Preffered" id="55e0beae-8033-41ab-a3da-663aec26e5ac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV with Search Criteria Preffered" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="001" PreferLevel="Preferred"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="001" PreferLevel="Preferred"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="56957279-4413-42f4-9d51-11a0cf375aa2" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script assert class 001" id="0f5167c5-78c7-44d5-98bb-490f89dcf7a8"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("SearchRT MAD-SEV with Search Criteria Preffered#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_ScheduleQuoteRS.Success.Product[1].@Class=='001'</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV with Search Criteria Unacceptable" id="d3100755-422d-43f8-99db-1e1c1e8467f0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV with Search Criteria Unacceptable" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Unacceptable"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Unacceptable"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="78d94b68-5c74-4daa-a93e-c9da08202d5c" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a74e05db-0f25-4afa-baae-308f4715c20f" name="Not Contains"><con:configuration><token>Class="002"</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV with Search Criteria unexisted code" id="bd6d7821-f35c-444a-a3d3-56b4e5a030b0" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV with Search Criteria unexisted code" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="sdfCC" Value="002" PreferLevel="Preferred"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="ff8af812-a975-4d98-ab8b-12b38bc9c32d" name="Contains"><con:configuration><token>warning</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV with Search Criteria unexisted value" id="cf7cd437-29fd-43e8-b87b-1ec3b4d8eb00" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV with Search Criteria unexisted value" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="sdf" PreferLevel="Preferred"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="7c603677-d21d-489c-8f49-48416276dd75" name="Contains"><con:configuration><token>warning</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV with Search Criteria unexisted preferLevel" id="f4d97f91-813a-4d6d-b51d-808faba42d29" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV with Search Criteria unexisted preferLevel" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="all"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="54fe0072-8316-4b24-9987-5784753ed37b" name="Contains"><con:configuration><token>warning</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="1a22fd93-027e-47ef-a77c-e8c996c197b3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Search_Reductions RT" searchProperties="true" disabled="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="9749ea2d-90c8-4446-ae18-974aea14ffab"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions  railcard" id="73f7df0e-946d-447c-8946-0c7e351e7aed"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions  railcard" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
          <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="7fea5fbb-059c-41d6-a44e-2c83e1e9b936" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions railcard several" id="10927684-1501-4003-82d4-ff970e6f0911"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions railcard several" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE2</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="c55d15e7-c82d-4e4f-9b98-71992576b595" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions railcard missed vendor" id="c85d441b-c0c1-4ec4-8ccd-bf26de34bf99"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions railcard missed vendor" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE2</RailcardCode>
               
            </Reduction>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Not SOAP Fault Assertion" id="b53e4163-a609-4d59-ae45-6853f842f3b7" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions corporate" id="3c51d341-861a-4ed2-b27c-d4cfeab35107"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions corporate" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="80261d08-3c84-4726-9b80-0a78fc40b147" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions corporate not all pas" id="a931954d-1dba-4f55-b669-96a2a2981c40"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions corporate not all pas" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
          <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
         </Passenger>
          <Passenger BirthDate="1990-01-01" ExtID="1">
           </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Not SOAP Fault Assertion" id="8c08d27a-62e2-4acf-bbdb-9b5d028efb90" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions corporate missed vendor" id="b747e584-2404-4131-bc9f-4fb9c6253fbf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions corporate missed vendor" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
          <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
             
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Not SOAP Fault Assertion" id="918a2803-0df5-4551-b7ca-5c5c324eb565" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions campaign" id="9882cdf6-a98b-403a-aac6-4b9829ba1e56"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions campaign" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="e216d0e2-5bb8-4575-a436-0cab6d34d21a" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions campaign missed vendor" id="3506531e-c02b-4029-990a-59048d73a543"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions campaign missed vendor" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
           <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
           </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Not SOAP Fault Assertion" id="6434cd25-b46b-4f24-8149-6bac537a6324" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions passCategory" id="a9c549b2-b365-4a6c-b3a1-28022bab3d30"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions passCategory" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">004</PassengerCategoryCode>
              
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2dad86ad-a3d1-454f-8adc-66907fa4e5d2" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions mix" id="c05aad35-cb8a-470e-9b58-ea8ff97053a2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions mix" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">004</PassengerCategoryCode>
              
            </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="7f1af87f-e837-4ab5-b904-4901b3536946" name="Contains"><con:configuration><token>&lt;Schedule</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-SEV reductions mix more then 8" id="55fdb889-7e42-4022-956b-223dbff0d2e8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-SEV reductions mix more then 8" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <RailcardCode xsi:type="xsd:string">RCODE</RailcardCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CorporateCode xsi:type="xsd:string">CCODE</CorporateCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <CampaignCode xsi:type="xsd:string">CCODE</CampaignCode>
               <VendorCompanyCode xsi:type="ctr:StringLength1to16">RNF</VendorCompanyCode>
            </Reduction>
            <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">004</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">001</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">002</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">003</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">005</PassengerCategoryCode>
           </Reduction>
           <Reduction xsi:type="ctr:ReductionType" Description="?" xmlns:ctr="ctr">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
           </Reduction>
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Not SOAP Fault Assertion" id="e49b2294-fd51-4a69-91e0-9f37bdad7cd5" name="SOAP Fault"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="fe90ccca-75fa-4e00-8248-c36e314023f4" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="SearchInvalidSecretKey" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="811be6a0-e6d9-453f-ae49-7ff00eaebba9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN invalid key" id="e2af9ff7-60ff-494a-8e89-64573602b2f8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN invalid key" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae0685a31f34adfg5c08cd864d57a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="3bbca733-99a9-48ea-a413-f0a81926b48e" name="Contains"><con:configuration><token>OPERATION DENIED. PERMISSION MISSING</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="SearchRT MAD-BCN invalid key" id="678c595f-37f8-4ac5-8b65-52e1bfef215f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT MAD-BCN invalid key" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a4dsff34a5c08dsf68f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="bf5fb9bc-4ad6-4e4b-ac10-65ac53b6cd3d" name="Contains"><con:configuration><token>OPERATION DENIED. PERMISSION MISSING</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="4b3d778b-5b0c-444f-a3cd-ab41a5dbba90" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_1pas_BKTKOnly" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="4d24c3ab-de10-41e0-93a3-e8d9a04d4cd9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="9e24a01b-8eed-4bbb-881e-151b083e0af9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="31a03497-f7c6-4d41-920a-42fb36dba280"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>SegmentSubtype</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/@SubType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/@SubType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="5bfd3327-97f2-4d50-8533-0a48de00addd"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="d157ae00-c3bc-4baf-bf0d-e0513fc9da59"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123123">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120722">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120722">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation>
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_917506" SubType="005" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120722" SegIDs="SEG_917506">
               <BookingToken>OID[5859355]SRPID[120722]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>  &lt;/Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="cdd7ae1f-c3cd-4524-b104-0a0c21cee4db" name="PnrIdentification@CreationDate"><con:configuration><token>CreationDate</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script PRNidentification" id="2cfb7f39-a631-4367-b599-cf21078354db"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@PnrReference!=""
  assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script ReservationID" id="0162a554-f9c0-4430-bb03-b1bb426c07fc"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.@ID!=""


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Schedule assert" id="a0e4cd8d-409b-4d96-a673-2c538de840b1"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Departure.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Departure.LocationCode.@Context
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Departure.LocationCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Arrival.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Arrival.LocationCode.@Context
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Arrival.LocationCode</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Segment attrs assert" id="cc992edc-410f-4d04-a00b-3c04163ee3bd"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.@Type
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.@SubType!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.@Duration!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Segment subnodes assert" id="871cad9d-90b6-4b16-9e18-f7e6463727eb"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Departure.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Departure.@DateTime
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Departure.LocationCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Departure.LocationCode.@Context

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Arrival.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Arrival.@DateTime
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Arrival.LocationCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Arrival.LocationCode.@Context

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.ServiceProviderCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.ServiceProviderCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Identifier==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule.Segment.Identifier</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Fare" id="38911026-f39b-4a38-beb2-2bea3138dc3d"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

def xmlSearch = groovyUtils.getXmlHolder ("SearchMAD-BCN#Response").getXml()
def xmlSlurperSearch = new XmlSlurper().parseText(xmlSearch)
assert xmlSlurperSearch instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Code!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Family!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Type!=""

//assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@SegIDs== xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.@ID
//assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@PaxIDs==xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.@ID

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.@TicketingExpirationTime!=""

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode==xmlSlurperSearch.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces==xmlSlurperSearch.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@DecimalPlaces
//assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount==xmlSlurperSearch.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@Amount

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@CurrencyCode==xmlSlurperSearch.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@DecimalPlaces==xmlSlurperSearch.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.Price.@DecimalPlaces
//assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount==xmlSlurperSearch.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.Price.@Amount
//DEFECT AMR-1509
//assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.@ID!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Ticketing Option" id="b54387d3-2806-4135-b64a-d946e922f4ee"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.TicketingOption.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.TicketingOption.@Type
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.TicketingOption.@DeliveryMode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.TicketingOption.@DeliveryMode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.TicketingOption.@ID!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script TotalPrice" id="1ac8b4ad-b295-4842-a1b1-eb2cd1de3b84"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("SearchMAD-BCN#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].DetailQuote.Price.@Amount
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.PricingSolution[0].TotalQuote.Price.@Amount</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script acomodation preferences assert" id="74bbcc0f-10e2-49e2-b992-355544deb1c1"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@PaxID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@Type!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@SegID!=""
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="60cfd51a-930e-4821-aea6-af72d298dcc3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_OptionalContact" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="c87a5b4a-8b97-4ea4-9280-7441706c830e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-VAL" id="c97f9aa1-6b04-4183-8e8f-02bb33980565"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-VAL" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="9c17d998-8996-448d-8f59-c69a9233caf8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VAL</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="a3375109-977c-490f-aa6f-856df2d14d92"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="6522490a-dd04-42e1-b26a-ae58fcbcbfdb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120723">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
          </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">18000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">66212</LocationCode>
               </Arrival>
               <Segment ID="SEG_917540" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" DateTime="2018-02-17T08:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">18000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" DateTime="2018-02-17T14:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">66212</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18160</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120723" SegIDs="SEG_917540">
               <!--You have a CHOICE of the next 2 items at this level-->
                <BookingToken>OID[5859563]SRPID[120723]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>&lt;/Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script PRNidentification" id="99b89e20-b971-4986-9df6-523a8020a61c"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@PnrReference!=""
  assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="73cf86dd-f204-4c51-817b-b082352cc594" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_Actor Data" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="d44695b9-5219-47a5-9946-c42881c43cf0"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="9196008d-ac6e-4e97-854d-c655d8be44ad"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="8b166c9b-dc34-4e06-b71f-3449489e25f1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Contact1PaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Contact2PaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact[3]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="4d73a7ca-00f2-4f21-b89a-1b08337d340f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="e316a3be-85a0-444a-bfd3-79d1916f75ec"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120724">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2000-01-01" Title="Mr"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120724">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
  			<Contact ID="CTN_2" PaxIDs="PAX_120724">
               <!--You have a CHOICE of the next 3 items at this level-->
                <Telephone>456456</Telephone>
              
            </Contact>

          
  			<Contact ID="CTN_3" PaxIDs="PAX_120724">
               <!--You have a CHOICE of the next 3 items at this level-->
                   <CustomerLoyalty MembershipID="1" ProgramID="2" ExpirationDate="${=(new Date()).format('yyyy-MM-dd')}T08:00:00">
                  <VendorCompany xsi:type="sell:CompanyNameType" Division="first" Department="second" xmlns:sell="sell_segment_ctr">?</VendorCompany>
               </CustomerLoyalty>
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_917551" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-16T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-16T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120724" SegIDs="SEG_917551">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5859618]SRPID[120724]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token> &lt;Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Actor assert" id="435a2c0f-05c3-41f8-811e-067638d8ef51"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.@ID!=""
 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@FirstName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Passenger.Actor.Name.@FirstName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@LastName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Passenger.Actor.Name.@LastName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@Title=="MR"
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Passenger.Actor.Name.@DateOfBirth</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Product assert" id="595013fa-5525-4ec6-b092-646c85331491"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Product.@Type
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@Class==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Product.@Class
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@MainClass==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Product.@MainClass
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@AccomType==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Product.@AccomType
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@ID!=""      
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="52dec14e-d13e-423d-88b2-9da27bbd9cb0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_9pas+99Contacts" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="627eb9b0-7eaf-4e18-8dfe-b10f572b0752"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="e8534548-5bd9-48ab-be7a-c565055d855a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="3313da35-2da6-40ad-81b1-32b6d75dd6a9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[1]/@ID
</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX2_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[2]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX2_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[2]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[2]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX2_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[2]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX3_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[3]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[3]/@ID</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX3_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[3]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[3]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX3_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[3]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX4_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[4]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[4]/@ID</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX4_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[4]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[4]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX4_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[4]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX5_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[5]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[5]/@ID</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX5_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[5]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[5]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX5_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[5]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[5]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX6_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[6]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[6]/@ID</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX6_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[6]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[6]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX6_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[6]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[6]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX7_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[7]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[7]/@ID</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX7_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[7]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[7]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX7_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[7]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[7]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX8_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[8]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[8]/@ID</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX8_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[8]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[8]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX8_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[8]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[8]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX9_ACTOR_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[9]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[9]/@ID</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX9_Contact_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[9]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[9]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX9_Pricing_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[9]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[9]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="f912ca01-819c-47b9-a9e1-4bb9c5c203a4"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="c1393461-3f7f-4005-91a5-826e5a4cde7c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120725">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120726">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120727">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120728">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120729">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120730">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120731">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120732">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120733">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120725">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_120726">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_120727">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_120728">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_120729">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_120730">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_120731">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_120732">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_120733">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
           
         </Passenger>
         <Reservation>
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PRI_1" PrdIDs="PRD_1" PaxIDs="PAX_120725" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5859812]SRPID[120725]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_2" PrdIDs="PRD_1" PaxIDs="PAX_120726" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5859812]SRPID[120726]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_3" PrdIDs="PRD_1" PaxIDs="PAX_120727" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5859812]SRPID[120727]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_4" PrdIDs="PRD_1" PaxIDs="PAX_120728" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5859812]SRPID[120728]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_5" PrdIDs="PRD_1" PaxIDs="PAX_120729" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5859812]SRPID[120729]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_6" PrdIDs="PRD_1" PaxIDs="PAX_120730" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5859812]SRPID[120730]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_7" PrdIDs="PRD_1" PaxIDs="PAX_120731" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5859812]SRPID[120731]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_8" PrdIDs="PRD_1" PaxIDs="PAX_120732" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5859812]SRPID[120732]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_9" PrdIDs="PRD_1" PaxIDs="PAX_120733" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5859812]SRPID[120733]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contact assert" id="d53d84a7-3d10-4bab-a156-de2baa45d0f5"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact[0].@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact[0].@PaxIDs!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact[0].Email==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Passenger.Contact[0].Email</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="960bca88-f0fd-4581-a4d7-be41264d289b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_Reduction" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="5d55745d-d54e-424c-afe6-1f0bb2841780"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="5308a49a-734f-49d8-9a5a-5e7fd24ca546"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+10).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="80ec6c8c-01d9-427a-8083-34c015a446b5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ReductionPax</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Reduction/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="1ed81857-dfe4-4927-bd4a-6abfab592a14"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="95ddf1a3-d92d-4635-be76-51881a3ac2cd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120734">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_120734">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-23T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-23T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Reduction ID="RED_1" PaxIDs="PAX_120734">
               <PassengerCategoryCode xsi:type="xsd:string">002</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120734" SegIDs="SEGMENT_1" RedIDs="RED_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5859985]SRPID[120734]</BookingToken>
 			</Pricing>
 			<TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
            
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d470db29-e2b8-4b8e-96ec-b5089c754f65" name="&lt;Reduction"><con:configuration><token>&lt;Reduction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script redids in fare" id="d7862448-3356-49d8-870b-32df99bae25d"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

def xmlSearch = groovyUtils.getXmlHolder ("SearchMAD-BCN#Response").getXml()
def xmlSlurperSearch = new XmlSlurper().parseText(xmlSearch)
assert xmlSlurperSearch instanceof groovy.util.slurpersupport.GPathResult



assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.@RedIDs!=""
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b2b10f37-e887-49d1-85be-528769b5d066" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_WithAccomodationPreferencesSeatCenter" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="1d4642c8-cccc-486a-8ff3-78cbd0eaeafa"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="521eed56-b0aa-44fa-9a19-49d04a1d64d5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="f32ed1f8-756c-4194-bf22-5e5a9979c685"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_ACTOR</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX1_CONTACT</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX1_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="3b24d3e1-b821-43fb-916c-260954eba943"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="c9a2a2e4-e723-49d5-85c0-8f11d2d542b6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120735">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120735">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEGMENT_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="004"/>
               
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120735" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5860178]SRPID[120735]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9b00ab65-fce1-4d8b-adfb-45f64466134a" name="Contains 1"><con:configuration><token>AccommodationPreferences</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6c6a7e67-a6b5-43be-a948-aa3e73d8845e" name="Contains 2"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="9cc439d8-739e-4714-bf13-abd2b4cfb826" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_WithAccomodationPreferencesSeatAisle" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="72e98c37-d875-4c9f-8410-d009fe03c96d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="faf86cf1-a3ea-4bfe-b45a-e61b48e13f7c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="d71dd644-4eb5-43b6-8ebc-65ed6fbeb1a3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="ecb28d2f-a44c-412c-8ac1-29d05fac51bb"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="a5b98747-1407-4a7b-bd3f-ed3bdfc94469"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120736">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120736">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEGMENT_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="003"/>
               
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120736" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5860344]SRPID[120736]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9b00ab65-fce1-4d8b-adfb-45f64466134a" name="Contains 1"><con:configuration><token>AccommodationPreferences</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="ee9a72fe-b4ec-4f3d-b410-ecdb42bf6186" name="Contains 2"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="435c3185-c728-4d9b-aa42-a4a0c672fb03" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_WithAccomodationPreferencesSeatWindow" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="4384aca0-b503-4d20-9597-bd6ce7560bfd"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="377629d6-bf82-4f61-acb4-26bedfc66fdb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="ab9c68e5-bda5-4d32-b9b5-f403a5de451e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="55bba02c-6fd6-4e04-ad7c-31742d8e6adc"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="1de67862-a140-48b5-aa42-ed022ee73bba"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120737">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120737">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEGMENT_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
             <Reduction ID="RED_1" PaxIDs="PAX_20790" Description="Some Description">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120737" SegIDs="SEGMENT_1" AccIDs="RED_1" RedIDs="RED_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5860552]SRPID[120737]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9b00ab65-fce1-4d8b-adfb-45f64466134a" name="Contains 1"><con:configuration><token>AccommodationPreferences</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="87c3a2e1-aa4a-4900-9b47-b5da1964648b" name="Contains 2"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script AccID" id="ccac1a54-6b62-4f98-8aa0-0bf78b419c32"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

def xmlSearch = groovyUtils.getXmlHolder ("SearchMAD-BCN#Response").getXml()
def xmlSlurperSearch = new XmlSlurper().parseText(xmlSearch)
assert xmlSlurperSearch instanceof groovy.util.slurpersupport.GPathResult



assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.@AccIDs!=""
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script paxid in accpref" id="e6b620b9-1495-4b6e-a0df-760eef49966a"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

def xmlSearch = groovyUtils.getXmlHolder ("SearchMAD-BCN#Response").getXml()
def xmlSlurperSearch = new XmlSlurper().parseText(xmlSearch)
assert xmlSlurperSearch instanceof groovy.util.slurpersupport.GPathResult



assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@PaxID!=""
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="42017061-e1d6-4f4d-8303-2d6804d18438" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_MethodOfPayment" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="f937ddee-a90a-4d4a-b02c-4b212d36c09b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="402104a6-c1e5-434f-9eb3-b00c64001d76"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="bd8b7ba0-95e0-4afb-adf4-9c392993674f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="195fc5c9-e415-4490-b9a7-9f9b59306411"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="174c63a5-d637-4675-9e95-e9aaedde913a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120738">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_120738">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120738" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
                     
            		  <BookingToken>OID[5860689]SRPID[120738]</BookingToken>
            </Pricing>
              <MethodOfPayment ID="MOP_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO1"/>
          
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8c6292a9-4e7b-4cf1-bc74-db6b24cc21ad" name="MethodOfPayment"><con:configuration><token>MethodOfPayment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="64e5583b-777e-40fe-94cd-aa473349f5c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_AdultAndChild" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="7b6fc271-7050-4489-af1f-a17264fb54d3"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-VALEN" id="08886330-1495-487f-be92-7a23635eaa2b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-VALEN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="85410d31-b13a-4d7c-8804-86981b6cbed7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//BookingToken	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax2_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger[2]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX2_Contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger[2]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact[2]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" disabled="false" entitize="false" ignoreEmpty="false" transferChildNodes="false" transferToAll="false" useXQuery="false"><con:name>PAX2_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger[2]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:type>XPATH</con:type><con:targetTransferType>XPATH</con:targetTransferType><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="ef8973bc-45a3-4211-aef3-4262da2bbd59"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="8b23fb63-3015-4b76-834c-8315d39b3f7e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120739">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120740">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120739">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120740">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">18000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">66212</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" DateTime="2018-02-17T08:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">18000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" DateTime="2018-02-17T14:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">66212</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18160</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120739" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860826]SRPID[120739]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120740" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860826]SRPID[120740]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script child cpmpare adult" id="04a7b586-23ca-4c42-b65e-7aba905e0aea"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult


 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[0].Price.@Amount.toInteger() > xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[1].Price.@Amount.toInteger()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c22245fd-3e73-4605-a52a-80485dc73594" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_AdultAndChildFree" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="08b0ffd7-3cd5-4c38-a38b-88fa19d7720b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="80d5dc8a-e32b-4eb4-877e-0b272574bbbe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="8206ff31-e2ba-4ab9-b77d-cb6605acb499"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX1_ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_CONTACT</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="8e61bf91-00c3-4c72-b2fa-c4ebda8c64db"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="8d80797e-00da-439a-9e34-f4ead8b05f9e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120741">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120742">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_120741">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120742">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-17T08:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-17T11:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18921</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120741" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
             
            <BookingToken>OID[5860849]SRPID[120741]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120742" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860849]SRPID[120742]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c32f0911-2655-4133-89bd-4f87a783f5b1" name="Success DEFECT AMR-1401"><con:configuration><token>&lt;Success</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script assert childFree" id="ac735672-4241-461d-850d-9f3633238842"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult


 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[1].Price.@Amount=="0"
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="37c05a94-9a73-442b-8d59-307e18a65506" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_moreThen9pas_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="b5b27041-81bd-4ef1-b7ff-62fa9e947b12"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="511d354d-a71c-419f-8f2e-8c07fc0cc310"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="1990-01-01" ExtID="2">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="3">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="4">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="5">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="6">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="7">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="8">
         </Passenger>
         <Passenger BirthDate="2000-01-01" ExtID="9">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="1a2d9c83-6aac-42fc-9dc1-7645d1c3a342"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="810e7962-b8e9-40b6-a5af-5773d0772d6d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="09144d26-00cf-40b7-83d6-cbfdf724290a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_3">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_4">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_5">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_6">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_7">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_8">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_9">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             <Actor ID="PAX_10">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_3">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_4">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_5">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_6">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_7">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_8">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_9">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CNT_10" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PRI_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5860878]SRPID[120743]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860878]SRPID[120744]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_3" PrdIDs="PRD_1" PaxIDs="PAX_3" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860878]SRPID[120745]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_4" PrdIDs="PRD_1" PaxIDs="PAX_4" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5860878]SRPID[120746]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_5" PrdIDs="PRD_1" PaxIDs="PAX_5" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860878]SRPID[120747]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_6" PrdIDs="PRD_1" PaxIDs="PAX_6" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860878]SRPID[120748]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_7" PrdIDs="PRD_1" PaxIDs="PAX_7" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5860878]SRPID[120749]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_8" PrdIDs="PRD_1" PaxIDs="PAX_8" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5860878]SRPID[120750]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_91" PrdIDs="PRD_1" PaxIDs="PAX_9" SegIDs="SEG_917768">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5860878]SRPID[120751]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Actor': This element is not expected. Expected is ( Contact ).</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="975f2eec-3d04-495e-9929-44e57f038636" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_withNoBookingToken_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="64bf8270-c706-44a4-99ff-033559ee3ecf"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="5198bba6-c726-4754-96f3-ccc0634691cc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="1b54418f-0940-48dc-963a-6b4686f2cec5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="c30c7881-f9a6-4a3c-b411-456e44c417e9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="db6990f4-acfe-4bf2-9516-7cea7fb990fc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120752">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120752" SegIDs="SEG_917796">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken/>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1">
              </TicketingOption>

         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>MISSING MANDATORY FIELD Pricing::BookingToken</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c3dee34f-0b97-4264-bef3-b87977ccb3b2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_No_pas_info_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="ed522958-e005-442e-b863-9afd29fb5a14"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="bd8efab0-033f-4da3-bf4a-72d553cc40f9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="bb6b3aba-1f01-474c-a705-78ad95ebfe96"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>FareCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Fare[1]/@Code</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Fare/@Code</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>FareType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Fare[1]/@Type	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Fare/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>FareFamily</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Fare[1]/@Family</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Fare/@Family</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="a708117a-fb11-46e4-9dc5-66c18530e733"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="e2f9befa-e391-47d4-a7c6-1f07e88d3a5d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Reservation ID="1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120753" SegIDs="SEG_917815">
               <!--You have a CHOICE of the next 2 items at this level-->
               <Fare xsi:type="sell:FareTypeRQ" Code="GL107|CG33VLA|C08-2" Family="007" Type="001" xmlns:sell="sell_segment_ctr"/>
            <BookingToken>OID[5861165]SRPID[120753]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="4bb9e2f5-ffe1-4d3e-9ef7-5fd3aa7a8f3c" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Reservation': This element is not expected. Expected is ( Passenger ).</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="41f4f6d8-20b7-43b8-8579-a39d2e3f5e1b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_NoPasID_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Copy of Groovy Script: set endpoint" id="0528a2e1-fef3-4c4d-b046-6f508fade29c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="e12f72c7-6e9b-45b1-86fe-28f4124a9024"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="59b0d227-cef3-479a-bee5-d31c03dbb30d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="a7b4deec-c820-4721-abe8-b1215874d263"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="78c73a56-25c6-4ae0-8bed-ea9ca773ecb3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor>
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120754" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
             
           <BookingToken>OID[5861302]SRPID[120754]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Actor': The attribute 'ID' is required but missing.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="b7741194-3b1b-4cb2-a773-84d2b200cbb6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_NoPassName_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="93105540-316a-448f-b9c2-8ff553439364"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="95728274-a8de-42cd-b94f-9e7119ac9836"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="ea3d7ba8-e60a-4828-8ebf-93ba19954eee"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="4dab51b6-e973-4ec4-8197-a99a0be31413"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="ec699ed4-10e0-4e8f-a739-8bd4ee0d52f8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name LastName="LastName"/>
            </Actor>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120755" SegIDs="SEG_917853">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5861439]SRPID[120755]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Name': The attribute 'FirstName' is required but missing.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="88373d5e-7132-4d44-9544-f45292211ba9" name="Not Contains"><con:configuration><token>xsi:nil=”true”</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="a72382e4-b7b5-478f-9fc3-b221f3b01a8f" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_NoPassSurname_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="a4456699-1180-40df-bc0c-5c57e71e2ff0"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="da02defb-7f90-41f7-8f8f-19ebb1c0b82a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="8a4b00d2-5ad5-454a-9a1c-da2330c7cc46"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="b0396ef9-edac-4c44-af5a-a3dd6bf4cc14"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="26df4730-2327-4e6a-8899-171a2656bce2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name"/>
            </Actor>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120756" SegIDs="SEG_917872">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5861576]SRPID[120756]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Name': The attribute 'LastName' is required but missing</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bf32282d-5261-4803-a506-a40712f9e49b"><con:configuration/></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="e9e6eb37-376f-4cc9-b5ae-7a7227708509" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_passNameContainsNotAllowedSymbols_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="c41880fe-895e-4139-9fe1-8335536da6a2"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="c6faa5f8-62c9-4638-a7b2-8b81b2dadcb0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="2e72da6d-0ec7-4431-b1f2-00085cacf162"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="1cc30ff4-4df0-4e4a-bce9-a3cb9b657e66"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="6f64b03d-e550-439b-93ab-0a41191745d0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name213" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5861713]SRPID[120757]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Invalid Name::FirstName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="d3fc1f6d-9f39-478b-a847-cf367a163ee0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_passSurNameContainsNotAllowedSymbols_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="2e2e386c-6dd9-4390-8c61-20a6749ab533"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="241fb9d4-9482-4790-9241-54dcdbf2d203"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="e21fb744-6ded-4399-8dac-213dbbe687e5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="168e18c2-0a7f-461f-8721-5a165a641d70"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="797d79d1-6485-4c3f-a434-7740cbc2dbb4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastNam12e"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5861921]SRPID[120758]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>nvalid Name::LastName</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="81295111-a67b-454e-88c6-8f056e7474d3" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_AccomodationPreferences_MissedID_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="a35cdf49-f6e6-4fe2-aaf9-2a3d32008747"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="f417250b-87df-4cb4-8c71-9f125ab22f47"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="74dcb441-1843-4627-a6a0-71b254c2649f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_ACTOR</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_Contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="c1c69241-4444-4d9e-a713-606a7c8abd65"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="e6b6c3e0-cee6-48bf-bbd5-7863f8ea1810"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120759">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120759">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <AccommodationPreferences CoachNumber="1" PlaceNumber="1" NearTo="true" SegIDs="SEGMENT_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SDR" Value="002"/>
               
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120759" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5862129]SRPID[120759]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>ID is mandatory for AccommodationPreferences tag</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="af5216a0-d9fb-434b-8298-c1390a6ccbaf" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_AccomodationPreferences_MissedType_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="2801ace6-ea7f-4839-99db-dd1cb290bdc4"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="2c3880eb-3144-4bf6-9294-a1d3ceac213c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="83689231-1321-4e24-b655-9017e448ce28"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_Contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="68da3f2c-4808-4d15-aedb-72bcd18a179d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="09f1b293-b0f1-46a1-99e5-f5f30fa51488"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120760">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120760">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <AccommodationPreferences CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEGMENT_1" PaxIDs="PAX_1" Type="">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SDR" Value="002"/>
              
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120760" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5862337]SRPID[120760]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Type is mandatory for AccommodationPreferences tag</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f29ec44d-e69e-44e6-9262-e95571e4c338" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_ContactID_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="36d92416-ea4a-4b2a-908d-ee894f1fdd0c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="f80ed884-65dc-4b1b-9ddc-15f48eecfa42"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="daed0cc9-26dd-4848-92aa-69a1024ad80e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>SegmentSubtype</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/@SubType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/@SubType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="c96625d8-52be-4768-b7a8-c41500941650"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="9d97b111-89ba-45cf-9ba0-ecf410ae6f67"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120761">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
                    <Contact PaxIDs="PAX_120761">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918027" SubType="005" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120761" SegIDs="SEG_918027">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5862545]SRPID[120761]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification PnrReference=</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="0e331a00-e561-4819-9c94-e2be856bbed8" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_FirstNameTooLong_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="4ed9c1b3-c140-4e62-9954-11ed6584026c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="53c3a291-0934-49c4-b263-5361f2e02de8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="4c5a3286-bba0-47e7-9da1-2af304d07ab6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="ee5a7863-9b15-4756-a086-d290498504d3"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="9a2fc7fe-bb6a-4de0-9bcd-afc86f5453ef"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="abcdefghijabcdefghijabcdefrtuuiknvcdrwqeggggууууусе" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5862711]SRPID[120762]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>NAME TOO LONG</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="0f08bac6-4caf-47d8-849b-6a7540171c16" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_LastNameTooLong_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="48ef3ab1-219d-49a9-ae31-270923a92fd1"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="066b4353-fda0-4fb9-ba6c-a9c06f31285b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="0635ed7e-6274-4894-af9a-e3c097e9b1fb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookinfToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="8cf7654c-0804-4a08-b206-a1c8cf20fedd"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="603d8c71-36a4-46e2-8753-e4bfe00375af"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="abcdefghijabcdefghijabcdefghijabcdefghijabcdefghijabcdefghij"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5862944]SRPID[120763]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>NAME TOO LONG</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="3faec576-379a-4ee6-b8eb-f02fde42f3f8" name="Not Contains"><con:configuration><token>xsi:nil=”true”</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="eff257e2-80da-4cfd-be15-d1af37868f2a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_MissedActorNEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="06394c6f-66db-435a-8fe3-03b7f2ed62d8"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="60b9d85e-4de9-44e6-a0a0-ae3ee8241ae7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="7236cea3-a873-484c-8765-f820b71fea73"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="7e83abac-65a8-4c64-a6a6-6d40534120ef"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="c2b8f74c-9465-4f35-92b8-87ce764440fa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger/>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120764" SegIDs="SEG_918124">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5863152]SRPID[120764]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Passenger': Missing child element(s). Expected is ( Actor ).</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="8479cff2-38d9-48bf-8de8-abbf807b2a98" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_missedScheduleId_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="57e39247-5a12-4add-872d-0073e1a0392f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="8f4fa6a9-4fad-4ca0-9d11-8d112efec8a2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="c9473ec4-065c-4619-8e6d-e5f14b4b6b8f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="d5dc4444-6303-449b-b908-441b81026d2f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="42348fb1-64b0-446b-91dd-fc296459cb43"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
               
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule>
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
             
            <BookingToken>OID[5863289]SRPID[120765]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1">
              </TicketingOption>

         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification PnrReference</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="1a948ce7-5b62-459d-8c9e-0c16d0d2c3d7" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_missedScheduleLocationName_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="58637602-b87d-42f1-84c4-2fc100835383"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="111448f8-565e-4b16-818a-d1186e9710bc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="d1fb5499-5558-47c7-873c-6d8b1cbc6543"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="6d970fd0-975b-437b-a951-708a062e0bfb"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="c2619372-df11-42ec-8d22-933fc60dd11d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
               
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5863497]SRPID[120766]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1">
              </TicketingOption>

         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>  &lt;PnrIdentification PnrReference</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="84d1dc1f-2105-456b-91a8-72d479ec9bd0" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_missedScheduleLocationCode_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="4ab50a8c-2840-4924-9805-c4f4620ba296"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="74017fd6-13f3-4bec-b788-b1bc99da3bb9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="57a9d44f-9ee0-4f9f-80a1-5e8a8b23c517"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="eb3e5940-7069-4071-8f5a-984fe9454ee9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="8cf1850b-e295-43e9-b15b-600211a7cc1e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
               
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode>71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5863705]SRPID[120767]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1">
              </TicketingOption>

         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>MISSING MANDATORY FIELD Arrival:Context</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="8995055b-3d03-45a0-8879-44108621706a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_missedSegmentID_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="b3e91152-61ae-4fb3-a7ab-6f1a6932525e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="43b00257-72cc-4db6-99be-601811ee0f33"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="e4e929d8-a3bb-4b1d-8907-3a16caeaa859"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="7dbd04e6-9fd8-41fd-ab7a-91608e49a357"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="59b2b737-8503-4737-a6ed-e66ead310a56"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
               
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-16T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-16T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
             
            <BookingToken>OID[5863913]SRPID[120768]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification PnrReferenc</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="e08c2e94-9775-4401-99c1-326dc13d261e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_missedProduct_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="7eefb4c8-11aa-4843-a5fc-b34ab328690c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="48d8dc1a-96fb-4074-960d-a63bd67ecef5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="efad1ab8-de66-4235-8c28-916ac4858e6c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>FareCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Fare[1]/@Code</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Fare/@Code</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>FareType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Fare[1]/@Type	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Fare/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>FareFamily</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Fare[1]/@Family</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Fare/@Family</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="7a8fa02a-d560-4b99-99a9-0121f308054e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="6d7e0d82-7652-45e4-9a75-51b20c717016"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
               
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <Fare xsi:type="sell:FareTypeRQ" Code="GL107|CG30VLA|C05-2" Family="007" Type="001" xmlns:sell="sell_segment_ctr"/>
            <BookingToken>OID[5864107]SRPID[120769]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Schedule': This element is not expected. Expected is ( Product )</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="1d9c2cad-9991-4a5d-a7b0-c8b74bcfbbf5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_missedProductID_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="799bfce1-f19f-4fe0-81e2-a8166f18ec13"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="31795989-89b5-4f33-8eb0-1e0746df4ae1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="1eb4e0af-d9e1-4650-b6a6-f0cd8f33767d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="6c34f662-2f99-4432-b0d2-00c64a9ba28e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="8475fec9-3987-402c-971e-db73bed19713"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
               
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product Type="002" Class="002" MainClass="T" AccomType="002" ID=""/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5864315]SRPID[120770]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Product', attribute 'ID': '' is not a valid value of the atomic type 'xs:ID'</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f04950ea-7004-472e-a46e-1d09497270a6" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_ContactNoPaxID_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="cca1e481-6e5e-4cde-ac5c-00f6c90137fa"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="3321a488-23c6-41ff-98b7-f9076274b54f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="257cad3b-506b-44a7-a49b-1447bb9a7f75"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>SegmentSubtype</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/@SubType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/@SubType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="070cae32-c801-4d29-a667-555ea2e0fabf"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="e9e0f57b-9234-4f17-b914-ee6f9232c409"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120771">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
                    <Contact ID="CTN_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918345" SubType="005" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120771" SegIDs="SEG_918345">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5864523]SRPID[120771]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>Unknown Actor:</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="28c0d11e-b260-4eaf-be25-c04a47582b03" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT 1pas not ida y vuelta BKTKOnly" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="f19d09ca-30c4-4861-a814-4a9b44d914b8"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="7e74cc0b-85d5-4a57-8410-a5951d399648"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+9).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="5fd942a7-4bd5-45bb-b89c-e9d61eee02bd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="317b8052-ce28-470b-a92a-d882de9db4cf"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  
def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="63653ffd-d552-40b8-a70e-dcf093069dd2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120772">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120772">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation>
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_918373" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-18T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-18T18:25:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18907</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918384" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-22T12:28:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-22T15:09:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_120772" SegIDs="SEG_918373">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5864690]SRPID[120772]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_54" PrdIDs="PRD_3" PaxIDs="PAX_120772" SegIDs="SEG_918384">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5864742]SRPID[120772]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="f9a06d68-0897-4e24-b2f9-6997fb90a0a3" name="XPath Match"><con:configuration><path>declare namespace ns3='sell_segment_ctr';
declare namespace ns2='SellSegmentRQ';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='SellSegmentRS';
count(//DetailQuote)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script PRNidentification" id="b23337eb-4691-436f-9d51-43a33f06d99c"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@PnrReference!=""
  assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script ReservationID" id="89bdeead-2104-4e0c-b458-5352f1abcbe3"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.@ID!=""


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Schedule assert" id="797dca9c-1319-45a7-8ac3-b3c162894ffe"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Departure.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Departure.LocationCode.@Context
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Departure.LocationCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Arrival.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Arrival.LocationCode.@Context
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Arrival.LocationCode

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[1].Departure.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[1].Departure.LocationCode.@Context
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[1].Departure.LocationCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[1].Arrival.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[1].Arrival.LocationCode.@Context
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[1].Arrival.LocationCode</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Segment attrs assert" id="b5ada9ef-17d9-4068-b13d-658d8bccd598"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.@Type
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.@SubType!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.@Duration!=""

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[1].Segment.@Type
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.@SubType!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.@Duration!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Segment subnodes assert" id="2467adde-c88f-4436-af5a-d5ec0085e017"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Departure.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Departure.@DateTime
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Departure.LocationCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Departure.LocationCode.@Context

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Arrival.@LocationName
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Arrival.@DateTime
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Arrival.LocationCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Arrival.LocationCode.@Context

assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.ServiceProviderCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.ServiceProviderCode
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Identifier==xmlSlurperEtalon.Body.RailConnect_SellSegmentRQ.Reservation.Schedule[0].Segment.Identifier</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script TotalPrice" id="0e699769-e340-4b08-a397-4576f227d722"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[0].Price.@Amount.toInteger()+xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[1].Price.@Amount.toInteger()==xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount.toInteger()
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="405de4fa-b48e-415e-8f54-9827805e3193" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT 1pas ida y vuelta" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="4e3656d7-0ce8-43b7-b9d2-d25473837b3b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="afb693ad-5855-4a7e-ba02-6e13390d4718"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="703c8d89-baf3-4dc9-acda-ea199c4c30f7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="a6e1c66f-7edc-4418-98d3-f7bb5ef24264"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="dfc4f5d6-a9c9-4c93-8355-80cd912b2485"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120773">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120773">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-16T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-16T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-21T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-21T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEG_1 SEG_2" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="004"/>
               
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120773" SegIDs="SEG_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5864743]SRPID[120773]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_25" PrdIDs="PRD_3" PaxIDs="PAX_120773" SegIDs="SEG_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5864767]SRPID[120773]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="38df9f55-3efa-4d77-8c6e-ff4efe12326c" name="SeatOptionsDEFECT-AMR1507"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="5300b80a-1f82-4e7a-8eb7-0a7fab36579b" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT 1pas optional contact" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="5dc3cf53-b4af-4c5d-99d3-d9e2e3d68d81"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="870068db-256f-4d4b-ad77-652b8a5a9669"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="b87ad35b-12d6-495e-a296-9a9242aefbf1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="7b6a8ae6-ece7-420f-8a26-9bd01294ad2e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="2ba54362-d7c8-483e-be0e-6e4a3a5053a4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120774">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918391" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918416" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120774" SegIDs="SEG_918391">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5864769]SRPID[120774]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120774" SegIDs="SEG_918416">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5865034]SRPID[120774]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="298e257f-c69b-4f17-93e2-89f5c9f8ed67" name="xsi:type"><con:configuration><token>ctr</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="4f001d2b-6b53-4dca-bb8b-f63e4fc7229c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT 9pas 99contacts" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="235f4ad7-9795-4023-b1cd-890978f95f9c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="639ebdf7-5fab-476d-9566-d4a99e660d8b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T10:00:00</Departure>
            </DateTime>
           
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T10:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="9fce8993-1c5c-4e00-9a05-6700bf96f207"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken[1]</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk12</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk13</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk14</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk15</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[5]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk16</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[6]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk17</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[7]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk18</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[8]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk19</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[9]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk21</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[10]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk22</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[11]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk23</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[12]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk24</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[13]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk25</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[14]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk26</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[15]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk27</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[16]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk28</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[17]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk29</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[18]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="63d66b3c-ee21-4de4-b693-d2f5a4a0a844"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[10].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[5]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[6]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[7]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[8]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[9]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[10]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[11]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[12]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[13]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[14]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[15]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[16]/Fare/@Code", fareCode2)
    holderRawReq.setNodeValue("//Pricing[17]/Fare/@Code", fareCode2)
      holderRawReq.setNodeValue("//Pricing[18]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="c6855146-fcc3-40ee-ba6c-d9714ed7096e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_3">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_4">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_5">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_6">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_7">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_8">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_9">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
           <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_3">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_4">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_5">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_6">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_7">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_8">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_9">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
          
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-15T11:08:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-15T13:53:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18903</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-16T10:50:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-16T12:26:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865044]SRPID[120775]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_3" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5865044]SRPID[120776]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_4" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865044]SRPID[120777]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_5" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865044]SRPID[120778]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_6" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5865044]SRPID[120779]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_7" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5865044]SRPID[120780]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_8" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865044]SRPID[120781]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_9" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5865044]SRPID[120782]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_10" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865044]SRPID[120783]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_11" PrdIDs="PRODUCT_1" PaxIDs="PAX_1" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865104]SRPID[120775]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_12" PrdIDs="PRODUCT_1" PaxIDs="PAX_2" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->

            <BookingToken>OID[5865104]SRPID[120776]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_13" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865104]SRPID[120777]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_14" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5865104]SRPID[120778]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_15" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5865104]SRPID[120779]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_16" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
             
            <BookingToken>OID[5865104]SRPID[120780]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_117" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865104]SRPID[120781]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_18" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5865104]SRPID[120782]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_19" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5865104]SRPID[120783]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="6524b0fb-2964-49cb-9588-7d5470b868e1" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT reduction" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="f4d80968-29a2-43e8-856f-ddf64dac00bb"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="484b2efd-c7b7-4328-b51a-5a8cfb4bf14f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="0bc9b9f3-5aaf-45e2-a2b9-0a36bddfa14d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="5f08335e-cf44-48b9-aa8f-73c7f2ac8420"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="a9d31fbf-3449-41af-9bd8-e2ef68520f9d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120784">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120784">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918433" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-16T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-16T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918462" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
              <Reduction ID="RED_1" PaxIDs="PASSENGER_11447">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_120784" SegIDs="SEG_918433" RedIDs="RED_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5865106]SRPID[120784]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_98" PrdIDs="PRD_1" PaxIDs="PAX_120784" SegIDs="SEG_918462" RedIDs="RED_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5865372]SRPID[120784]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
            
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9ed712d9-d215-4803-8f0d-d43c272d89e8" name="Contains 1"><con:configuration><token>Reduction</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script PRNidentification" id="fe37dc5d-c709-49c1-b1f1-ee319aff15a5"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@PnrReference!=""
  assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script ReservationID" id="1e3f1d27-c72c-4ea2-924d-d74e5b071b46"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.@ID!=""


</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="41677072-277e-4ede-b51a-6f591183db3e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT with Acom Pref Seat" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="9b8354a2-02ca-4bdf-9a61-f08723674b4f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="b5e3edcd-a23f-4874-af6a-9ca9745f0217"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="8d18738a-8556-4ca9-a82a-df1e315562f6"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="4276e7a7-9cbe-43bf-bebe-daf87777fb25"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="2b22718f-c23a-4440-8966-453c392c4603"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120785">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120785">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
             <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEG_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120785" SegIDs="SEG_1" AccIDs="ACC_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5865381]SRPID[120785]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_114" PrdIDs="PRD_1" PaxIDs="PAX_120785" SegIDs="SEG_2" AccIDs="ACC_1">
               <!--You have a CHOICE of the next 2 items at this level-->
             
           <BookingToken>OID[5865700]SRPID[120785]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="540f068c-8a46-4c06-954d-1d010d955e10" name="Contains 1"><con:configuration><token>AccommodationPreferences</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d876d7d4-ceaa-4459-8676-6fa31927062a" name="SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script PRNidentification" id="f41769d1-3dc0-4641-849d-39cac4ec6861"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@PnrReference!=""
  assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script ReservationID" id="5825f216-8d56-46f6-b070-31f05c94055d"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.@ID!=""


</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="39ab7cb6-56c4-4c0f-89fa-7a10082af986" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT method of payment" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="abc69e8d-9a22-42b5-bcac-5ad63f7cc4d0"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="e8eb4285-aca8-4e79-bfbd-c608ff8673a4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="95a6ce90-34b1-4aa6-813a-cc810776010c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="b8c6a40a-491f-45f6-932e-fed09d812def"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="c94ab94d-35f6-4f3c-9765-e4f4d6549f68"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120786">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120786">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_918498" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-15T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-15T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918503" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-20T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-20T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120786" SegIDs="SEG_918498">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5865709]SRPID[120786]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_29" PrdIDs="PRD_3" PaxIDs="PAX_120786" SegIDs="SEG_918503">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5865737]SRPID[120786]</BookingToken>
            </Pricing>
             <MethodOfPayment ID="MOP_1">
               <!--You have a CHOICE of the next 3 items at this level-->
                <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
            

         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="bd7f2ec0-12f9-4581-86d9-148e64374ba2" name="Contains 1"><con:configuration><token>MethodOfPayment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="cc6dd478-0a11-4b88-8fd9-29614fa63366" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT AdultAndChild" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="bce16f09-8e24-4634-a454-ea48dd88344d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="93b4d1ba-76ff-48c1-b83e-df94055dbfac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="f7265852-ba54-450c-ab87-9ffe79954800"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>product2id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="5cca6ccd-2df4-4273-b7d7-fe8211d63c44"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="7b2829fa-489f-484f-9c89-cb95ee009434"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRD_98" Type="002" Class="001" MainClass="P" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918504" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918557" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T21:15:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-22T00:02:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
             <Reduction ID="RED_1" PaxIDs="PAX_2">
               <PassengerCategoryCode xsi:type="xsd:string">002</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_918504">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5865739]SRPID[120787]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_918504" RedIDs="RED_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5865739]SRPID[120788]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_133" PrdIDs="PRD_3" PaxIDs="PAX_1" SegIDs="SEG_918557">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5865895]SRPID[120787]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_134" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEG_918557" RedIDs="RED_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5865895]SRPID[120788]</BookingToken>
            </Pricing>
            
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
           
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="7bdc67a9-c994-4891-95c2-5a218b2f35cd" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT AdultAndChildFree" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="b7c0a834-eb7f-4910-ae92-dc4c095eecf5"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="2e5ae12e-7d94-4c83-a0d2-691544ba525a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="98fc8c5e-a4f6-49fe-b6b1-139a5c9cae8b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prd2id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="dad62b98-53b7-4b57-97b1-25d628e1e43d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="572a46a0-acfb-4cee-a037-34beccd762da"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRD_27" Type="002" Class="001" MainClass="P" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918558" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918618" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T21:25:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T23:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03610</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_918558">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5865896]SRPID[120789]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_918558">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5865896]SRPID[120790]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_488" PrdIDs="PRD_9" PaxIDs="PAX_1" SegIDs="SEG_918618">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5866419]SRPID[120789]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_489" PrdIDs="PRD_9" PaxIDs="PAX_2" SegIDs="SEG_918618">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5866419]SRPID[120790]</BookingToken>
            </Pricing>
              <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="6673c3cf-c287-4e51-ba85-92d5c0d145af" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT more 9 pas NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="9d747d6f-40bf-4d27-ad80-3df259d34686"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="26a2de07-cd96-47a3-83d4-fbb060aa58ea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2015-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="d473bada-fbe4-4876-983f-7c4a57304d09"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken[1]</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk12</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk13</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk14</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk15</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[5]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk16</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[6]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk17</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[7]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk18</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[8]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk19</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[9]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk21</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[10]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk22</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[11]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk23</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[12]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk24</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[13]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk25</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[14]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk26</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[15]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk27</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[16]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk28</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[17]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk29</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[18]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing2id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing4ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing5id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[5]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing6ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[6]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing7ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[7]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing8ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[8]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing9id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[9]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing10id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[10]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing11id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[11]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing12id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[12]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing13id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[13]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing14</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[14]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing15id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[15]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pricing16id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[16]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prc17id</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[17]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>зкс18шв</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[18]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="95e7c790-fd53-4806-a6cc-25e8c56bbbca"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[10].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[5]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[6]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[7]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[8]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[9]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[10]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[11]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[12]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[13]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[14]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[15]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[16]/Fare/@Code", fareCode2)
    holderRawReq.setNodeValue("//Pricing[17]/Fare/@Code", fareCode2)
      holderRawReq.setNodeValue("//Pricing[18]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="d269008e-b1fb-46d9-95ad-c6e882fef85d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_3">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_4">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_5">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_6">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_7">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_8">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_9">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
             <Actor ID="PAX_10">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
           <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_3">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_4">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_5">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_6">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_7">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_8">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_9">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_10" PaxIDs="PAX_10">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-17T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-17T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-21T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-21T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866421]SRPID[120791]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866421]SRPID[120792]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866421]SRPID[120793]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5866421]SRPID[120794]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5866421]SRPID[120795]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5866421]SRPID[120796]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866421]SRPID[120797]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866421]SRPID[120798]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
             
            <BookingToken>OID[5866421]SRPID[120799]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_1" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5866441]SRPID[120791]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_2" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5866441]SRPID[120792]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5866441]SRPID[120793]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866441]SRPID[120794]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866441]SRPID[120795]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866441]SRPID[120796]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866441]SRPID[120797]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5866441]SRPID[120798]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_22" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5866441]SRPID[120799]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Actor': This element is not expected. Expected is ( Contact ).</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="11119262-07e7-4e5f-aecd-43c336776c83" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT No Pas Info NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="569a9dd2-e49f-4ef7-9ffb-9c875bada497"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="bd381c49-66c2-42c7-8310-301af16aebfe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="854a4824-f4b1-4dd1-88e4-8e9278d733d8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1FareFamily</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Fare[1]/@Family</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/Fare/@Family</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1FareType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Fare[1]/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/Fare/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2FareType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Fare[last()]/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/Fare/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2FareFamily</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Fare[last()]/@Family</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/Fare/@Family</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="4888f53a-83c7-4f75-9b37-30e2bf12b4dd"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="294d1215-4756-492b-bc4b-ceb742599880"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         
         <Reservation ID="1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918624" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918649" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120800" SegIDs="SEG_918624">
               <!--You have a CHOICE of the next 2 items at this level-->
               <Fare xsi:type="sell:FareTypeRQ" Code="GL107|CG31VLA|C06-2" Family="007" Type="001" xmlns:sell="sell_segment_ctr"/>
           <BookingToken>OID[5866442]SRPID[120800]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120800" SegIDs="SEG_918649">
               <!--You have a CHOICE of the next 2 items at this level-->
               <Fare xsi:type="sell:FareTypeRQ" Code="GL010|CG01VLA|C04" Family="007" Type="001" xmlns:sell="sell_segment_ctr"/>
           <BookingToken>OID[5866707]SRPID[120800]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Reservation': This element is not expected. Expected is ( Passenger )</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3efcf0ae-4220-4779-8426-be2558be9ea7" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT no schedule location name NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="ad77e0e8-72eb-497d-a79a-890e15f41a18"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="0d25ea86-1340-4310-8c96-f6630e6494dc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="00607075-2fe4-42ca-8f5c-27c90a319cc4"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="4552ceb6-9c70-4eef-82bf-38cf5f6758a6"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="e2da775b-73fe-4f37-a50e-f3d548a87bcf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120801">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120801">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918650" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918675" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120801" SegIDs="SEG_918650">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5866716]SRPID[120801]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120801" SegIDs="SEG_918675">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5866981]SRPID[120801]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token> &lt;PnrIdentification PnrReference</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="622dfbcf-d290-4376-be70-ba1da75635bd" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT No Pas ID NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="7045aaad-abb0-470a-887b-711b78ebc94b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="d8b243f6-4375-4522-8b3f-11e424a1b385"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="4b9c82a1-0a32-4609-8dda-1ecb07ee452c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="dcf62fd2-ca7b-4243-be9e-b97d207681f6"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="793daa4a-777d-44e7-b920-d371a4b087b4"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor>
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PASSENGER_14980">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918676" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918701" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120802" SegIDs="SEG_918676">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5866990]SRPID[120802]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120802" SegIDs="SEG_918701">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5867255]SRPID[120802]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Actor': The attribute 'ID' is required but missing</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="dbbe140c-9667-473d-af44-88c475f42e3b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT no BKTK NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="da641db1-4d66-411d-a07a-4b99c82b3761"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="592f28fa-fed0-445e-a52c-4b9c364cf974"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="cfb8e6e2-99bb-4fa0-a92e-d6df38fea80b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="84089d4a-4479-4c61-9ee5-8f8a09f1edbb"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="85de32e0-97d4-4f89-87a4-49713a094ed0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120803">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120803">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918702" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918727" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120803" SegIDs="SEG_918702">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken/>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120803" SegIDs="SEG_918727">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5867529]SRPID[120803]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>MISSING MANDATORY FIELD Pricing::BookingToken</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="dc7f470f-0076-4d5c-9be9-16149e9a0fe9" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT No Pas Name NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="d0df60bf-e258-4f7d-94c6-e695e90c68cc"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="acd6f1c0-2447-447c-a738-a93a3b326162"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="aad49ef7-5ca6-4af4-9cad-18b4a73bed8d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="b4c6eac2-b13a-423d-b842-998053fd503a"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="29fbe3d2-0ba4-455e-b73a-de114ff98157"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120804">
               <Name LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120804">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918728" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918753" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120804" SegIDs="SEG_918728">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5867538]SRPID[120804]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120804" SegIDs="SEG_918753">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5867803]SRPID[120804]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Name': The attribute 'FirstName' is required but missing</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="74a555c4-ecf0-4a82-b258-02f98427c61e" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT No Pas Surname NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="627dfc90-df1c-45a4-b860-604dc92887de"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="33067f73-3858-4afa-8570-74fba32e26b9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="874985d2-72d4-4d55-bcd6-2579e61db264"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="20864606-2b8b-42b9-bfb3-a051af4a65ae"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="72e7eea0-31dc-4d7d-abc0-f8423b50a5b6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120805">
               <Name FirstName="Name"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120805">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918754" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918779" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120805" SegIDs="SEG_918754">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5867812]SRPID[120805]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120805" SegIDs="SEG_918779">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5868077]SRPID[120805]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>Incoming request invalid : 
Element 'Name': The attribute 'LastName' is required but missing</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="cf1bb999-a0f4-4fc8-86bd-415b457c9a66" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT missed schedule ID NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="f16001d2-0119-4524-97e7-3f07464a6c25"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="4e2de438-5e79-47af-9dcd-3329528ea1ec"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="884bb1d9-2798-4563-89e1-5d82a15df6f2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="1716400e-26cf-4972-bcb7-a447cd8dcf01"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="4266bf08-5a48-4f60-a18a-045ce0f89f76"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120806">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120806">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918780" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule>
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918805" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120806" SegIDs="SEG_918780">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5868086]SRPID[120806]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120806" SegIDs="SEG_918805">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5868351]SRPID[120806]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token> &lt;PnrIdentification PnrRefer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="d3569f5a-b662-4972-b4e1-1a0d612a1a22" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT missed schedule segment ID NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="a3f30109-6fab-4d5d-a170-d73c1961c848"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="9481bda7-35bf-49f6-bdaf-64405fcf9217"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="3c7d2963-e2c1-492b-b2f7-97761e0740d7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="68f86457-5d9e-41b4-8ae7-c28e9a9ebe1c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="aac6a59a-4884-47a9-a70e-513c82b5aaea"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120807">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120807">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918806" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T12:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T15:10:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120807" SegIDs="SEG_918806">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5868360]SRPID[120807]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_102" PrdIDs="PRD_1" PaxIDs="PAX_120807" SegIDs="SEG_918831">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5868625]SRPID[120807]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token> &lt;PnrIdentification PnrRefer</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="92b9081e-4ccf-4028-a22b-c73faea2c2e5" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking RT 1pas not matched NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="250824ff-7010-46ae-85ef-380fd87ddae7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="cc2b00c8-a372-458c-9e16-4e78247ea149"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">  <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="9e71fd65-7547-41b2-8a3a-2295fae1d976"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="38eee94e-2e6b-447d-a31a-941eff32d75d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="430d4992-f054-4ce3-b3b8-2f2e34514ecf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120808">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120808">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_918832" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-18T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-18T18:25:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18907</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_918843" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-21T12:28:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-21T15:09:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120808" SegIDs="SEG_918832">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5868635]SRPID[120808]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRD_3" PaxIDs="PAX_120808" SegIDs="SEG_918843">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5868686]SRPID[120808]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>Selected offers cannot be combined into one roundtrip</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="9e637352-76d7-41e3-8a75-f5d9f9b93440" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_OneWay_noTKT_Option_NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="da4ee0e7-2194-4de4-96b6-14fddd86676f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="90d2b4ea-e341-4dc7-aa6f-1b7c96d83aef"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="8a28695e-62c7-410f-a3cb-767f361eeb32"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>SegmentSubtype</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/@SubType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/@SubType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="7a4cdc6f-b713-4f01-9f82-32cf5bc15a6d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="77d3c671-0047-4eef-9bf2-d8800d289dfc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120809">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120809">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918844" SubType="005" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-16T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-16T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120809" SegIDs="SEG_918844">
               <BookingToken>OID[5868688]SRPID[120809]</BookingToken>
            </Pricing>
            
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="8aa8f904-0035-4874-8218-14db99b70e23" name="Contains 3"><con:configuration><token> &lt;PnrIdentification PnrReferen</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="e2cd5cc8-a3d8-45a5-b713-236295f0e022" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Booking_PAR_BCN" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="e51abb0b-b018-44ef-be19-fc0750272304"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="a3aa78f2-a296-472a-a5f2-d93d7070993c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">8700013</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+10).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="90a32c2e-cd8a-4e93-ade5-9fa29203858f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>SegmentSubtype</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/@SubType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/@SubType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="a3ee56ab-48db-439a-ab82-ed93932dceb8"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="255d6dfd-c74d-4366-a519-76f7c826b1bb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123123">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120810">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2000-01-01" Title="Mr"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120810">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation>
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="001" MainClass="1" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Paris Gare de Lyon" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">8700013</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918876" SubType="005" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Paris Gare de Lyon" DateTime="2018-02-23T10:07:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">8700013</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-23T16:34:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">9713</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120810" SegIDs="SEG_918876">
               <BookingToken>OID[5868882]SRPID[120810]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>&lt;Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d741df59-5378-46de-b14b-0136ce6790d9" name="Contains 3"><con:configuration><token>CreationDate="</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="fa273563-bf23-4f36-9071-3bc432102b3d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing OneWay_1pas" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="6bdaa181-bb6f-4966-ba35-c0bd1b73d01e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="a09e4b75-3e9b-466c-be27-85fc8f029b10"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="1ac28bfe-5fae-47d9-99e8-fa5c8c6736c2" name="XPath Match"><con:configuration><path>declare namespace ns1='search_ctr';
declare namespace ns2='ScheduleRS';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
count("xsi")</path><content>1</content><allowWildcards>true</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="0f375534-2933-4907-9a79-f955edfe57b1"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AccomodationPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//AccommodationPreferences/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ReductionPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Reduction/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="3d3c8075-d34f-4ed0-a920-894af7d75c2f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="8184ddc0-dde3-4491-b9d6-afc4dc35ab58"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120811">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2000-01-01" Title="Mr"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120811">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEG_1" PaxIDs="PAX_120811">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
            <Reduction ID="RED_1" PaxIDs="PAX_120811" Description="some description">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120811" SegIDs="SEG_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5868894]SRPID[120811]</BookingToken>
            </Pricing>
             
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token> &lt;Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="115f0864-fb33-4ce1-9594-21b24e65e559" name="XPath Match"><con:configuration><path>declare namespace ns3='sell_segment_ctr';
declare namespace ns2='SellSegmentRQ';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='SellSegmentRS';
count("xsi")</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="c8122db8-6693-4ad6-80e5-a5251cd222ef"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="30206ba8-c7df-4823-befb-9b59925418f6"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="2cab81cb-ce49-4101-b218-7edcf3b9d18d"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635548" Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
              
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ef8268fe-7a81-4f8f-ba49-5bc0f2624338" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="df3343eb-591e-435c-9d48-d1175fa9f8cd" name="Contains 1"><con:configuration><token>ID="PAX</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6242f699-c390-419d-8993-15799d4bc9d5" name="Contains 2"><con:configuration><token>ID="RES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b5fc0daf-b62e-420a-b328-6eb1b5e3ab14" name="ID=&quot;ACC"><con:configuration><token>ID="ACC</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8a110b8-a466-4ccc-8b82-ec6f684c1521" name="ID=&quot;MOP"><con:configuration><token>ID="MOP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8e6684cc-93b3-413c-b7f7-6a722f8a72ca" name="ID=&quot;TKO"><con:configuration><token>ID="TKO</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b64746e0-e927-4c58-81db-48bb76dc934e" name="Contains 6"><con:configuration><token>ID="CTR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="76919ed0-eb4f-479c-a160-d43f49aff632" name="Contains 7"><con:configuration><token>ID="FAR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="319c701e-9e7f-4c7f-b374-77a507996cf3" name="Contains 8"><con:configuration><token>ID="RED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="9dc07cd3-1eb9-4ca6-a725-55bca1a61480" name="XPath Match"><con:configuration><path>declare namespace ns2='issue_contract_ctr';
declare namespace ns1='IssueContractRS';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
count("xsi")</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script PRNidentification" id="05e00b07-b33c-44be-97db-de67af247137"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Ticketing#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.PnrIdentification.@PnrReference==xmlSlurperEtalon.Body.RailConnect_IssueContractRQ.PnrIdentification.@PnrReference
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script passenger" id="a008bd7b-8ea7-47d8-a78a-db77bce5e8c6"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@FirstName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@FirstName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@LastName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@LastName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@Title==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@Title
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@Title=="MR"

assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Contact.@ID==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.@ID
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Contact.@PaxIDs!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Contact.Email==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.Email



</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reservation" id="a74d22a4-6d71-4db6-a0d1-3a37dc42b923"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.@ID!=""
 
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script product" id="759fed71-637a-4494-8daa-c57de6f3597e"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@Type
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product.@Class==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@Class
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product.@MainClass==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@MainClass
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product.@AccomType==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@AccomType
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product.@DisplayName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@DisplayName</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script schedule" id="b8db3215-fff9-4245-9458-0f546d4af4f4"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Arrival.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Arrival.LocationCode</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script segment" id="2cb83cc2-334e-47d4-accc-18cd6050629b"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.@Type!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.@SubType!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.@Duration!="" 

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Departure.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.@DateTime
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.@LocationName
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Arrival.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.@DateTime
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Arrival.LocationCode

    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.ServiceProviderCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.ServiceProviderCode
     assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Identifier==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule.Segment.Identifier
      assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Vehicle.@Code!=""
            assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.Segment.Vehicle.@DisplayName!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reduction" id="d680da32-33ba-4925-b9fe-d6eb1f6d40cf"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.PassengerCategoryDetails.@Code==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Reduction.PassengerCategoryDetails.@Code
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.@ID!=""
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.@PaxIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.@Description!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script accomodationPreferences" id="73fbaf52-d7fa-44d6-8ad0-db43255b028f"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.@CoachNumber!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.@PlaceNumber!=""

 
        assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.@ID==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@ID
          assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.@SegIDs==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@SegIDs
               assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.@PaxIDs==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@PaxIDs
                   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.SeatOptions.@Code==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.SeatOptions.@Code
                      assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.SeatOptions.@Value==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.SeatOptions.@Value

                      //DEFECT AMR-1510
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.AccommodationPreferences.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.AccommodationPreferences.@Type</script></con:config></con:testStep><con:testStep type="groovy" name="Script pricing assertion" id="ae4aaa2e-635d-4e0a-b5bf-d4af072d1bb4"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult



 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount

     assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@CurrencyCode
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@DecimalPlaces
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@ID!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@PrdIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@SegIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@PaxIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@RedIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@FareIDs!=""

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Fare" id="3b2b2b1f-5e3a-4f10-a1cd-e590838c77c9"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@Code==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Code
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@ID!=""
//assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@PaxIDs!=""
 //assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@SegIDs!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@Family==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Family
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Type
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@Flexibility==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Flexibility
   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@DisplayName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@DisplayName
   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.Condition==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.Condition
   </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script MOP" id="f2424999-8f14-4084-9c5a-c78e183f624f"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.MethodOfPayment.@ID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Ticketing option" id="a9d06952-c971-4806-bb49-5bc3c1f3deb4"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.@ID!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.@Type=="006"
      assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.@DeliveryMode!=""
       assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.ContactList.@ID!=""
              assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.ContactList.@CtnID!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract" id="0fcb6548-0990-455b-a364-862dbdf9160e"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@PaxIDs!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@SegIDs!=""
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@AccIDs!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@TkoID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@MopID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@Number!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@Status!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract.Document!=""
 
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="7a07a4cc-3c03-49f4-84ef-32c157d4cb99" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing OneWay_1pas optional fields" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="41e24099-e7cf-48bc-b165-f3747f2594f9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="5281279e-961c-4d96-84e2-773e85f48c11"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="ed4d6615-fa42-4afb-9daa-f46a9fcd87d0"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="ed22c556-afaf-479f-9cf4-bec1b09dbf3b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="0f32665c-6dad-44b5-a005-ae1730cedf6b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120812">
               <Name FirstName="Name" LastName="LastName" Title="Ms"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120812">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_918897" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120812" SegIDs="SEG_918897">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5869031]SRPID[120812]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>   &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token> &lt;Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="b23d6352-d302-4e1e-b3b3-e58b06fd88b7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="b8d22baa-7c1b-4961-abfe-da1b5559de6e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="f2245693-a7af-44d6-9202-f862fe93e3cd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="456745анпг">
         <PnrIdentification PnrReference="R00018635555" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="d7a9433e-a9bb-42b5-af19-35828ca897f1" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script passenger" id="1dde31c4-1129-4815-a185-22d62c4aafab"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@FirstName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@FirstName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@LastName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@LastName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@Title==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@Title
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@Title=="MS"





</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="043ccf10-3490-42f9-8181-5c2736b196c5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing_OneWay_9pas+99Contacts" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="3e399e42-2d15-4ab5-b745-3077d04afcb7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="9d2623c3-86ae-4113-9474-e6b2ba15c6f2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="f294b62d-4b4f-4b20-acdf-96a46f81c9fb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_ACTOR</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_Contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="84e40187-4fe9-4906-b949-da651f15025a"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="5deb7c1e-c92b-4aa4-8799-52e0682be878"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120813">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120814">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120815">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120816">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120817">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120818">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120819">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120820">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120821">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120813">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_120814">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_120815">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_120816">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_120817">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_120818">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_120819">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_120820">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_120821">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
           
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-20T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-20T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PRI_1" PrdIDs="PRD_1" PaxIDs="PAX_120813" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5869168]SRPID[120813]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_2" PrdIDs="PRD_1" PaxIDs="PAX_120814" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5869168]SRPID[120814]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_3" PrdIDs="PRD_1" PaxIDs="PAX_120815" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5869168]SRPID[120815]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_4" PrdIDs="PRD_1" PaxIDs="PAX_120816" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5869168]SRPID[120816]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_5" PrdIDs="PRD_1" PaxIDs="PAX_120817" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5869168]SRPID[120817]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_6" PrdIDs="PRD_1" PaxIDs="PAX_120818" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5869168]SRPID[120818]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_7" PrdIDs="PRD_1" PaxIDs="PAX_120819" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5869168]SRPID[120819]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_8" PrdIDs="PRD_1" PaxIDs="PAX_120820" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5869168]SRPID[120820]</BookingToken>
            </Pricing>
            <Pricing ID="PRI_9" PrdIDs="PRD_1" PaxIDs="PAX_120821" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
             
               <BookingToken>OID[5869168]SRPID[120821]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="342d2fde-39b2-454f-88a0-38edc0ca4ac3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="843a32aa-952c-423b-8115-b2c8678a71b3"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="09437880-b5a2-4a49-bbd7-1a63b1db3f24"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
 <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635561" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="32d11d26-872c-4f43-a7b5-88f6946c99cb" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="6c079b7b-8294-4021-9cfd-dffb6812d8a2" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing_OneWay_AdultAndChild" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="8baeb798-36b4-4801-9570-f33a9fdd2369"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-VALEN" id="50827200-4b09-4f80-a425-b7fb4ee25b93"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-VALEN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="aee29e6d-ca21-411c-83ec-a08e36f7bdf8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//BookingToken	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX+Contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pac_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="270004e6-90e8-450c-bf11-3eda4cbaf03f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="ba5b95f4-b718-47a3-9c31-f2ed0fa08fe8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120822">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120823">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120822">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120823">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">18000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">66212</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" DateTime="2018-02-20T06:08:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">18000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" DateTime="2018-02-20T12:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">66212</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18160</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120822" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5869374]SRPID[120822]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120823" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5869374]SRPID[120823]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>  &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="e1c70069-5c71-47a7-bba6-28d1c1b35607"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="08c955c9-070d-4b27-86f3-78e2602e72d4"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="9ac67396-885d-4218-afb4-701fdd348702"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635584" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="1e65f88d-3504-4753-9910-7c221fa032b0" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="21293282-13f4-463f-babb-a331680d377e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing_OneWay_AdultAndChildFree" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="56e76ca1-4eac-48e4-964c-7ca10efdce46"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="50948cda-bac8-47f6-8751-b77a4a5e81a8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="b81901c4-4811-4645-9821-3eaf79227a48"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAx_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="7aaca1d9-e338-4441-826a-8165b0a268d4"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="f3ceeb36-d8a0-4809-ad47-10f9c05942f3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120824">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120825">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_120824">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120825">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-20T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-20T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120824" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5869425]SRPID[120824]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120825" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5869425]SRPID[120825]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c32f0911-2655-4133-89bd-4f87a783f5b1" name="Success"><con:configuration><token>&lt;Success</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="546ac982-33fe-4180-ab75-c55caa6c3715"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="e1c8c894-0fb3-49b4-afa4-86452950e76e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="c55bd39b-b6e4-476b-bf4a-5ed7554697cb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635585" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="0cad884c-2f02-42ab-8b4f-7aec6526a3d4" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f7c70ed2-3af0-4c23-b566-f4baeab883ef" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing RT 1pas not ida y vuelta" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="e4f3da03-0e94-413f-b41c-e915b77fcc28"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="ed15b569-6418-4fd0-9eb6-6cde2a5530fe"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+6).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+9).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="0c9998f5-f04d-4d50-b63a-ca6dabe25efe"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>reductionPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Reduction/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="e17122af-617d-4a4b-8963-0aeb2b451a3e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="f3e02d0a-62c4-4b58-96ba-15dfe986f305"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120826">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120826">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919005" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-19T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-19T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919040" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-22T21:15:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-23T00:02:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
             <Reduction ID="RED_1" PaxIDs="PAX_120826">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120826" SegIDs="SEG_919005">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5869652]SRPID[120826]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_130" PrdIDs="PRD_1" PaxIDs="PAX_120826" SegIDs="SEG_919040">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5869989]SRPID[120826]</BookingToken>
            </Pricing>
           
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="f9a06d68-0897-4e24-b2f9-6997fb90a0a3" name="XPath Match"><con:configuration><path>declare namespace ns3='sell_segment_ctr';
declare namespace ns2='SellSegmentRQ';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='SellSegmentRS';
count(//DetailQuote)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="51fa6d8b-bf14-49be-b945-3d73cfaefc74"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="1c775792-ce3b-49d6-b955-9567d966e6e2"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="cc0ce0bd-df75-47c8-a75f-dba66d5797f0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635592" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="004"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="37f7b05f-2488-4f23-a3ab-bd2828f6136c" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script PRNidentification" id="a31be571-27ab-447e-83b1-e366ffa856bf"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Ticketing#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.PnrIdentification.@PnrReference==xmlSlurperEtalon.Body.RailConnect_IssueContractRQ.PnrIdentification.@PnrReference
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script passenger" id="78163393-745b-4c35-ad76-ec83ab96860f"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@FirstName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@FirstName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@LastName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@LastName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@Title==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@Title
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth

assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Contact.@ID==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.@ID
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Contact.@PaxIDs!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Passenger.Contact.Email==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.Email


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script product" id="3f420516-c10b-4c10-b6fa-f132c2a58c05"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

log.info xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product[1].@Type
log.info xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product.@Type

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product[1].@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@Type
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product[1].@Class==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@Class
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product[1].@MainClass==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@MainClass
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product[1].@AccomType==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@AccomType
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Product[1].@DisplayName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@DisplayName</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script schedule1" id="b380172d-a427-4896-860b-78137579683a"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script schedule2" id="8fc0a78f-980b-4dc1-b7dc-841a659c708a"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule.@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script segment1" id="aaa6a4cc-fc5d-491d-bdcd-51546c01ecbb"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.@Type!=""
//assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.@Subtype!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.@Duration!="" 

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@DateTime
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@LocationName
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@DateTime
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode

    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.ServiceProviderCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.ServiceProviderCode
     assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.Identifier==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Identifier</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script segment2" id="b94eada0-08b1-4ecf-9a8a-f2433053a720"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.@Type!=""
//assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.@Subtype!=""
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.@Duration!="" 

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@DateTime
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@LocationName
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@DateTime
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode

    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.ServiceProviderCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.ServiceProviderCode
     assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.Identifier==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Identifier</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reduction" id="a550f908-dbba-4394-8a68-3bb65a0affe3"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.PassengerCategoryDetails.@Code==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Reduction.PassengerCategoryDetails.@Code
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.@ID!=""
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.@PaxIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Reduction.@Description!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script pricing" id="b5a8dbc5-65b6-4029-a4f0-d83f514d7a5d"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


//assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.@TicketingExpirationTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.@TicketingExpirationTime
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount

     assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@CurrencyCode
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@DecimalPlaces
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@ID!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@PrdIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@SegIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@PaxIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@RedIDs!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.DetailQuote.@FareIDs!=""
    </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script fare" id="0566f0e8-98bb-4273-9828-cc92f9a47f78"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


log.info xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@Family
log.info xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare.@Family

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare[0].@Code==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[0].@Code
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@ID!=""
  //assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@PaxIDs!=""
  //assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare.@SegIDs!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare[1].@Family==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@Family
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare[1].@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@Type
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare[1].@Flexibility==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@Flexibility
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.Fare[1].@DisplayName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@DisplayName</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script MOP" id="a5cb0f80-94ab-4915-ba6b-ff5ea738a8fd"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  //assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.MethodOfPayment.@ID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Ticketing option" id="96ab3cb3-80fb-467a-9ff2-fd62cddbb7f2"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.@ID!=""
    assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.@Type=="006"
      assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.TicketingOption.@DeliveryMode=="004"
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract1" id="c1d122f0-4c5f-4fe4-8cf1-648d696ca109"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@PaxIDs!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@SegIDs!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@TkoID!=""
 //assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@MopID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@Number!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@Status!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[0].Price.@Amount
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[0].Document!=""
 
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract2" id="ea5660f2-c932-421c-85cd-363e22670b8c"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@ID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@PaxIDs!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@SegIDs!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@TkoID!=""
 //assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@MopID!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@Number!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@Status!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[1].Price.@Amount
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Contract[1].Document!=""
 
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="f0ae59b6-ca66-48de-af5e-d828ae10fbee" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing RT 1pas ida y vuelta" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="5ecdf4c9-0e07-4b90-bc8a-5f7f11cf6a11"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="9343de60-2a73-42bb-ba15-668ec603926c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="2ba24098-4356-4d5c-8ac1-4388d12b2244"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="9f9e3943-ccd9-48ab-848f-f7c0e1eecc0f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="59d64c05-11cb-4396-85b0-3cb71a0c5d5b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120827">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120827">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_919041" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-17T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-17T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919045" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-21T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-21T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120827" SegIDs="SEG_919041">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5869998]SRPID[120827]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_25" PrdIDs="PRD_3" PaxIDs="PAX_120827" SegIDs="SEG_919045">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5870022]SRPID[120827]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="f362ccf2-cb77-4899-8329-7b2771cb45c2"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="70d4cd3f-2dc0-4efd-90e1-50e8b475ee9d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="7cb0264f-02da-48df-8e67-c4a1850bb0ac"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635596" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="0c47cb47-f3e6-4191-9e55-96ad9b39b613" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reservation" id="b9cbd58d-a528-4d37-a050-d92434ff04ef"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.@ID!=""
 
</script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="1cf9226a-b762-4687-af45-9f9a63defa44" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing RT AdultAndChild" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="34650f11-936d-42e5-82de-4310d38b0b4d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="da5fe4f9-e1a6-4b31-a5e6-cfbb1d72c62c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+6).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+9).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="154fdc11-5e6d-4150-bb49-7bf2cb21a5dd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="d1fbab69-a1e2-443b-befa-a5557da781d5"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="821b69bf-a381-4bf9-8793-9ce1c69c22e5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRODUCT_6" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_919046" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-19T07:33:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-19T10:36:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18901</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919068" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-22T19:58:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-22T22:38:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_919046">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5870025]SRPID[120828]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_919046">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5870025]SRPID[120829]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_143" PrdIDs="PRD_3" PaxIDs="PAX_1" SegIDs="SEG_919068">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5870125]SRPID[120828]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_144" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEG_919068">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5870125]SRPID[120829]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="ea8e7cb6-fe99-4e39-b580-7ede4b3c2a14"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="bf2e229c-0776-4562-a71f-52209a31d08f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="e317ed6f-277c-4c0a-b1ac-30e031b7491f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635598" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="4e7edbb7-3027-45c7-9654-f3f232333862" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="2ae40dc6-67b9-4de6-bb07-8eec3b60a52a" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing RT AdultAndChildFree" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="f356a205-5ed9-4bf6-b9ec-f8f8775cb430"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="1ca1e789-6bf5-47a2-8dcf-fe8afe129ad0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+6).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="a81ae6dc-372b-4c16-b529-abe5745864bb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="3f43ada1-3ad1-43a7-bb59-8b98ccb3f050"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="01224ebe-35b1-4c9f-9e35-aaf316caac5c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRODUCT_6" Type="002" Class="001" MainClass="P" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919069" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919131" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-19T21:15:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-20T00:02:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03412</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_919069">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5870126]SRPID[120830]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_919069">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5870126]SRPID[120831]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_498" PrdIDs="PRD_9" PaxIDs="PAX_1" SegIDs="SEG_919131">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5870709]SRPID[120830]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_499" PrdIDs="PRD_9" PaxIDs="PAX_2" SegIDs="SEG_919131">
               <!--You have a CHOICE of the next 2 items at this level-->
             
             <BookingToken>OID[5870709]SRPID[120831]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="37eb2023-ee32-4c1d-b87a-ec5fc245fc9e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="0aa59ed3-28d0-4426-bb85-6f18243aa37c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="68d9fbe9-fc69-4fbf-a1bd-06d818f34356"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635601" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="5096d73a-4193-4e7e-b96e-fc016e3d0657" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="0c658a30-255c-4dd2-8757-39fd1ad7c2db" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing RT 9pas 99contacts" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="a9b55fc3-2d15-4f13-a74e-2bcdaf674b37"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="91a99aa7-41fc-44bb-bfb0-816f054006de"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="052295d3-3c72-49df-9e25-6242c1cbab05"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken[1]</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk12</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk13</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk14</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk15</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[5]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk16</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[6]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk17</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[7]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk18</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[8]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk19</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[9]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk21</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[10]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk22</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[11]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk23</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[12]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk24</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[13]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk25</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[14]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk26</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[15]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk27</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[16]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk28</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[17]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk29</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[18]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="66523799-e355-4429-8d2f-c12ffe4478ec"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[10].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[5]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[6]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[7]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[8]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[9]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[10]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[11]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[12]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[13]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[14]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[15]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[16]/Fare/@Code", fareCode2)
    holderRawReq.setNodeValue("//Pricing[17]/Fare/@Code", fareCode2)
      holderRawReq.setNodeValue("//Pricing[18]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="2e0f531d-e10a-4670-bc80-1a42b5d36148"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_3">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_4">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_5">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_6">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_7">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_8">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_9">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
           <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CNT_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_3">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTn_4" PaxIDs="PAX_4">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_5">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_6">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_7">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_8">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_9">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-16T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-16T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-17T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-17T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870711]SRPID[120832]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_3" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870711]SRPID[120833]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_4" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870711]SRPID[120834]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_5" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870711]SRPID[120835]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_6" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870711]SRPID[120836]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_7" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870711]SRPID[120837]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_8" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870711]SRPID[120838]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_9" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870711]SRPID[120839]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_10" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870711]SRPID[120840]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_38" PrdIDs="PRODUCT_1" PaxIDs="PAX_1" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870731]SRPID[120832]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_39" PrdIDs="PRODUCT_1" PaxIDs="PAX_2" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870731]SRPID[120833]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_40" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870731]SRPID[120834]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_41" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870731]SRPID[120835]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_42" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5870731]SRPID[120836]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_43" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870731]SRPID[120837]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_44" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870731]SRPID[120838]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_45" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870731]SRPID[120839]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_46" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5870731]SRPID[120840]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="df621807-0aab-4b30-8f76-803d79a1611a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="537c08cf-379f-4b7f-bee3-5c00fd750ab7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="88bcdb7b-9470-47fb-9b2a-c0454e1bb8f1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635618" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ac35e9bd-d73d-4ab8-9fd4-8fce98a1e166" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="0c2e6af9-d67c-4d0f-81ac-f6268f296b05" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing missed PrnReference NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="387adc7a-a7c2-4b9a-b740-dce8ec294ae8"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="088e6e07-5883-4706-b897-003a2cca2acc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+1).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="4125eaa2-4fab-4eae-b529-b2641cce2bc9"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="65f1c4ec-c7cb-48ba-b398-caef9161bb5c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="90dd4301-d14b-459c-af83-fd2fe62430bb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120841">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120841">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919138" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-14T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-14T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120841" SegIDs="SEG_919138">
               <!--You have a CHOICE of the next 2 items at this level-->
             
             <BookingToken>OID[5870732]SRPID[120841]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>&lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="af201998-7873-4254-a359-4561b8aa866d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="d3a7fb41-bac4-4ddc-8a0e-f76aa46a267f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="b5b2fdca-2788-4e5b-8c67-673f571e3758" name="Contains DEFECT 1542"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "PnrReference" IN PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="9c0fe933-63be-4e9e-bc52-f36c27605cc9" name="Not Contains"><con:configuration><token>xsi:nil=”true”</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="725c767f-c179-4f60-8714-f2d3ab86ace5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing missed FormatDel DMD NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="9aed6885-4028-4f77-a2ec-9d0400ba710b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="ceb7e0df-112e-4c06-96f0-4550d31458b1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="a83470d8-4627-41b5-aa64-1854f9922079"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="ff3736ad-d6b2-4f2a-aa38-06933bd45d75"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="8e72dffd-020c-421d-83eb-d3c4854c49d7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120842">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120842">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919173" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120842" SegIDs="SEG_919173">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5870955]SRPID[120842]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>&lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="55a8974d-87e1-4647-8b69-35964a081f21"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="575011e8-fd32-4619-9cbe-1ebbe0fed79f"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="d6d1eba8-55eb-46f8-acfe-91041e09ee69"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635667" Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="0a6e441f-6800-4149-a894-a7130ffafb6f" name="Contains DEFECT 1542"><con:configuration><token>PnrReference</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="509f740b-0e61-4e4c-9486-08cf02c14058" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="Ticketing wrong PrnReference NEG" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="2e720f42-b5ba-41f2-bef5-43b8d42f2033"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="58f6b416-9cdb-4d64-85b7-5e62a7705a78"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="8ed23021-8ad6-4523-95d9-c4e33303206b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="129b7d8a-4366-4000-a7cd-7461d427e063"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="97ed6400-9a39-467c-b8f5-7c82dd0a92e3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120843">
               <Name FirstName="Name" LastName="LastName"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120843">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919208" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120843" SegIDs="SEG_919208">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5871188]SRPID[120843]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>&lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="99178432-a66a-497b-8fe8-dbd2c9a07a63"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="9278b8e0-4a24-43ed-9081-b8b1eb9855f7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R000121212211212121284" Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="b5b2fdca-2788-4e5b-8c67-673f571e3758" name="Contains"><con:configuration><token>INVALID REFERENCE</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="841564d0-5f92-4323-a0d8-ade2f8d34750" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition OW 1 pas" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="bb5c987f-b4a3-4eba-a1ec-6c30d84c1ee3"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="1d62efb3-ae36-4c37-8193-b310eb629041"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="4d32b74c-105a-44ec-bc67-69182e9fae81"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>reductionPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Reduction/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="1a90a608-5ed3-466e-ba6e-e7d7ca112bd7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="f7511ac6-2bae-4554-9c14-75b2fe34a0b8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120844">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2000-01-01" Title="MS"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120844">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919236" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-20T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-20T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEGMENT_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
             <Reduction ID="RED_1" PaxIDs="PAX_120844" Description="some description">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120844" SegIDs="SEG_919236">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5871354]SRPID[120844]</BookingToken>
            </Pricing>
            
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token> &lt;Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="9fd3f68a-7e1c-457b-bea3-2d4461f0775f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="aacd8393-4684-4041-ba96-84860eea91de"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="1b0987d1-b908-4d60-9a59-70c19e6b7679"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635709" Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
              
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ef8268fe-7a81-4f8f-ba49-5bc0f2624338" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="df3343eb-591e-435c-9d48-d1175fa9f8cd" name="Contains 1"><con:configuration><token>ID="PAX</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6242f699-c390-419d-8993-15799d4bc9d5" name="Contains 2"><con:configuration><token>ID="RES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b5fc0daf-b62e-420a-b328-6eb1b5e3ab14" name="ID=&quot;ACC"><con:configuration><token>ID="ACC</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8a110b8-a466-4ccc-8b82-ec6f684c1521" name="ID=&quot;MOP"><con:configuration><token>ID="MOP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8e6684cc-93b3-413c-b7f7-6a722f8a72ca" name="ID=&quot;TKO"><con:configuration><token>ID="TKO</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b64746e0-e927-4c58-81db-48bb76dc934e" name="Contains 6"><con:configuration><token>ID="CTR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="76919ed0-eb4f-479c-a160-d43f49aff632" name="Contains 7"><con:configuration><token>ID="FAR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="319c701e-9e7f-4c7f-b374-77a507996cf3" name="Contains 8"><con:configuration><token>ID="RED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="b2a76a94-a56f-4045-9170-7496325ecf2e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="3ede1e32-6176-491b-af98-72d9a71e9697"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="331be984-cbad-4126-ba9c-31ae6be54cb1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635709" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7448900624108"/>


      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="cb8af627-39c8-47f0-b5ef-38325293afae" name="Contains DEFECT AMR-1602"><con:configuration><token>Pnr</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="2a5083b6-0116-4a80-a0a2-b1c052f2a77d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition_OneWay_9pas+99Contacts" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="2eb00feb-ce8e-4e3f-b6e4-03223f7961e1"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="0fd3c395-1948-4de6-9877-2a9fb12b8e4c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="2fe98e2b-16a2-453b-9a12-267a018609ce"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PAX_acTOR</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PaxPricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="6e0249d4-4b59-4fb1-bc76-9016bd5118b7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="7b27c825-792f-4df6-8273-cba559ef5d72"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120845">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120846">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120847">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120848">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120849">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120850">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120851">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120852">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120853">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120845">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_120846">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_120847">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_120848">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_120849">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_120850">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_120851">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_120852">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_120853">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
           
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-20T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-20T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120845" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5871581]SRPID[120845]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_120846" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5871581]SRPID[120846]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_3" PrdIDs="PRD_1" PaxIDs="PAX_120847" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5871581]SRPID[120847]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_4" PrdIDs="PRD_1" PaxIDs="PAX_120848" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5871581]SRPID[120848]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_5" PrdIDs="PRD_1" PaxIDs="PAX_120849" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5871581]SRPID[120849]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_6" PrdIDs="PRD_1" PaxIDs="PAX_120850" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5871581]SRPID[120850]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_7" PrdIDs="PRD_1" PaxIDs="PAX_120851" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5871581]SRPID[120851]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_8" PrdIDs="PRD_1" PaxIDs="PAX_120852" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5871581]SRPID[120852]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_9" PrdIDs="PRD_1" PaxIDs="PAX_120853" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5871581]SRPID[120853]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="a8068b41-990a-41a5-a208-faffad5f7754"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="4d1e87c2-3a25-4947-bc5d-6622f6adc71a"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="50124c39-a31e-4015-af25-4f7d277ef1a1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
 <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635737" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="32d11d26-872c-4f43-a7b5-88f6946c99cb" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer for RefundCondition" id="9231f3d9-ff7a-4b77-ba01-1f740f834b69"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script: set endpoint refund condition" id="e007752b-501d-466a-9d8c-75d2807c58af"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="9dbdf530-7959-4fdb-b250-cc69c990b67f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635737" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7308800613991"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="5dd36796-81b1-43d3-89f0-0533d9faa993" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ecb64234-12a5-41e9-bea7-63ab4b31a553" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition_OneWay_AdultAndChild" searchProperties="true" timeout="60000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="bf546cbf-1eb4-4e60-8cbf-9f4c67fa15b9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-VALEN" id="30c57ba3-3b5d-4e0b-8c25-a3a4f2d48ed6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-VALEN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="1d3a51b5-6fa7-4603-9ade-11eab2315dfb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//BookingToken	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Contatc</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="f6b316fd-b7b2-4b51-a5fc-f094a6d2ddb9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="de5698aa-5d4d-40a8-a7b7-66c4b085fbf8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120854">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120855">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120854">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120855">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">18000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">66212</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">18000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" DateTime="2018-02-18T12:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">66212</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18160</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120854" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5871787]SRPID[120854]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120855" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5871787]SRPID[120855]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="4a9afb68-a378-4825-8265-ef7dc5ab4c4a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="757a101d-026b-4910-93ac-a86089184c99"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="1903be93-9bed-46e7-98e2-a62f19455798"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635816" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="1e65f88d-3504-4753-9910-7c221fa032b0" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="72c1c805-15cd-40ed-bfe1-4369d4074c80"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="18961f23-e58f-4054-9a9f-7ac15352f5aa"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="1cf99acd-e401-47c9-96f4-9ee695c56b92"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635816" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7970600619906"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="b783cd93-a856-4409-b1be-f15cfe1217d8" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="464b4e5f-59f7-43c5-a0b5-054fd0468e60" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition_OneWay_AdultAndChildFree" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="5169d639-6be4-4bd3-a9bb-5f99575b59ad"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="6fe9f0dc-e98f-499a-b7bb-42e0fff4cfb9"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="2f09c187-8903-4d70-9f8b-64e9c8655560"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="329ee682-1e9a-4e79-889c-c413247367e0"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="3be6df5c-61ec-4d4d-a5b4-df5645baf7ec"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120856">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120857">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_120856">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120857">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-20T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-20T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120856" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5871825]SRPID[120856]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120857" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5871825]SRPID[120857]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c32f0911-2655-4133-89bd-4f87a783f5b1" name="Success"><con:configuration><token>&lt;Success</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="c34e8ea2-299f-42e9-b798-3ced2350f32d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="2f764b31-1abd-45b0-b768-e4ad15e3dcd7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="6831d932-2f36-4a10-9311-2d1ddd5d686e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635821" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="0cad884c-2f02-42ab-8b4f-7aec6526a3d4" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="81800c6a-54cd-4c19-8faa-b253ed0a71ce"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="bc628a42-6c71-40d3-8e77-ab73a92ade2e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="2c0cbaaa-d588-43fa-a7ec-10c1d2f466ba"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635821" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7421600620197"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="ce170432-f9bc-4b39-a4b9-6b2b9286c91b" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="03279c65-fadf-43ec-89f3-cd7ad162d225" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition RT 1pas not ida y vuelta" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="03ab59e5-1aad-4c52-bbc8-a6f6bd1e749d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="cc7da271-d391-4169-bd8c-8bab0c343c6f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="121f8819-697b-46af-a40d-7805e0bf4d33"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="ac5a6620-7a72-41d7-bf81-6617d10a3db0"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="2365bb2e-8490-4c09-8850-c216188fb6b5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120858">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120858">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919355" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919391" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-16T21:25:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-16T23:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03610</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120858" SegIDs="SEG_919355">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5872052]SRPID[120858]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_110" PrdIDs="PRD_1" PaxIDs="PAX_120858" SegIDs="SEG_919391">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5872371]SRPID[120858]</BookingToken>
            </Pricing>
            
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="f9a06d68-0897-4e24-b2f9-6997fb90a0a3" name="XPath Match"><con:configuration><path>declare namespace ns3='sell_segment_ctr';
declare namespace ns2='SellSegmentRQ';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='SellSegmentRS';
count(//DetailQuote)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="389f35bb-a268-4fec-8f2f-b1c95ab862ce"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="c26e5b1a-8355-456c-a5c5-59c6eacbfbf6"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="5ac16850-b419-4d6d-a832-7b39a3f69ee2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635838" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="37f7b05f-2488-4f23-a3ab-bd2828f6136c" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="08084a13-8e9d-4dea-a050-9675f58e011b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="6e8ce684-8800-45a4-abb8-36f11fbfa692"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="d54355fd-0115-47ef-bafa-a976b3b43f8b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635838" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7880200623705"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="5da60bf9-2fbd-41d1-80a1-119de6b42ae5" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script PRNidentification" id="86077ec5-37a2-4c3b-b89d-56e028b893e3"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Ticketing#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.PnrIdentification.@PnrReference==xmlSlurperEtalon.Body.RailConnect_IssueContractRQ.PnrIdentification.@PnrReference
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script passenger" id="c6e2277d-2f1a-4025-b0fa-cd617a3e1939"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Actor.@ID!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Actor.Name.@FirstName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@FirstName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Actor.Name.@LastName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@LastName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Actor.Name.@Title==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@Title
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth

assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Contact.@ID==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.@ID
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Contact.@PaxIDs!=""
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Passenger.Contact.Email==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.Email


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script product" id="5481c68c-ac6b-4f57-9e0c-c8490ec35344"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult



 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Product.@ID!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Product[1].@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@Type
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Product[1].@Class==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@Class
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Product[1].@MainClass==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@MainClass
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Product[1].@AccomType==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@AccomType
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Product[1].@DisplayName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Product[1].@DisplayName</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script schedule1" id="3c06ad96-dfd1-4770-a93b-e9eedfa37aaf"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule.@ID!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.@LocationName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Arrival.LocationCode</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script schedule2" id="5435a78b-48e6-4ee3-9785-30be8055ef9c"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule.@ID!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.@LocationName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Arrival.LocationCode</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script segment1" id="0bb9c1b9-c623-40e7-af34-64971daa5a9b"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.@Type!=""
//assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[0].Segment.@Subtype!=""
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.@Duration!="" 

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.@DateTime
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@LocationName
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.@DateTime
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Arrival.LocationCode

    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.ServiceProviderCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.ServiceProviderCode
     assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[0].Segment.Identifier==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[0].Segment.Identifier</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script segment2" id="0597dab1-8b6f-4672-b92e-01daf8cb8a66"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.@ID!=""
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.@Type!=""
//assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Schedule[1].Segment.@Subtype!=""
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.@Duration!="" 

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@LocationName
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.@DateTime
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Departure.LocationCode

   assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@LocationName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@LocationName
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@DateTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.@DateTime
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode.@Context==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode.@Context
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Arrival.LocationCode

    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.ServiceProviderCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.ServiceProviderCode
     assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Schedule[1].Segment.Identifier==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Schedule[1].Segment.Identifier</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reduction" id="b520fe97-dbcc-496b-978b-9bf68b2da325"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Reduction.PassengerCategoryDetails.@Code==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Reduction.PassengerCategoryDetails.@Code
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Reduction.@ID!=""
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Reduction.@PaxIDs!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Reduction.@Description!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script pricing" id="44ec40ef-4098-418f-abf1-949e08361e14"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


//assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.Pricing.TotalQuote.@TicketingExpirationTime==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.@TicketingExpirationTime
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount

     assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@CurrencyCode
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@DecimalPlaces
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote.Price.@Amount
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.@ID!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.@PrdIDs!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.@SegIDs!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.@PaxIDs!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.@RedIDs!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.DetailQuote.@FareIDs!=""
    </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script fare" id="57e42586-a99d-4a64-8905-bb30e0a922c1"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare[0].@Code==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[0].@Code
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare.@ID!=""
 // assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare.@PaxIDs!=""
 // assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare.@SegIDs!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare[1].@Family==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@Family
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare[1].@Type==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@Type
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare[1].@Flexibility==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@Flexibility
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Pricing.Fare[1].@DisplayName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.Fare[1].@DisplayName</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script MOP" id="d7e64347-f056-4a2b-a158-2f9963787400"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



 // assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.MethodOfPayment.@ID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Ticketing option" id="6c13c620-c8c1-4e80-9abb-c9e05712a2bc"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.TicketingOption.@ID!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.TicketingOption.@Type=="006"
      assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.TicketingOption.@DeliveryMode!=""
       assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.TicketingOption.ContactList.@ID!=""
              assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.TicketingOption.ContactList.@CtnID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract1" id="f7be8536-1410-4c12-8e16-2f9465f272b8"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@ID!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@PaxIDs!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@SegIDs!=""

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@Number!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@Status!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[0].Price.@Amount
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].Document!=""
 //DEFECT 1527
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@TkoIDs!=""
 //assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[0].@MopIDs!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract2" id="3b00706f-b536-4a61-bf3c-4b48db1c01aa"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@ID!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@PaxIDs!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@SegIDs!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@TkoIDs!=""
 //assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@MopIDs!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@Number!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@Status!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[1].Price.@Amount
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Booking.Reservation.Contract[1].Document!=""
 
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script ContractRefund" id="d6b6749b-8c9b-4281-8f8d-b9db75700cba"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].@CtrIDs!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].@Refundable=="true"
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[0].Quote[2].@Amount!=""

     assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].@CtrIDs!=""
 assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].@Refundable=="true"
  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Contract[1].Quote[2].@Amount!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Quote" id="16ee6b96-6a46-498f-90cb-21ddd2070a28"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Quote[2].@Amount!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Options" id="7c297245-c729-40f7-ae2f-602bc72c3380"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("RefundCondition#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


  assert  xmlSlurper.Body.RailConnect_GetRefundConditionsRS.Success.Options.@ReasonCode!=""
   </script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3649702d-67ce-4be2-93e6-3ffa3a0b87fb" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition pnr NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="e0de6e32-514f-4fb8-ab7e-c59c1bfa8907"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }

 // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }

  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition missed no pnr" id="f385e011-aef8-4ace-836e-dcadbaa98cb1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition missed no pnr" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7651200612356"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="599cdd24-7452-4a88-a9d7-fac4499da470" name="Contains DEFECT-1603"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "PnrReference" IN PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="25b8154c-21d8-4ae3-b870-8192d1f8b4f8" name="Not Contains"><con:configuration><token>xsi:nil=”true”</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition missed pnr number" id="5f6ca330-f9a8-4d84-b153-34d49143b090"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition missed pnr number" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7651200612356"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="599cdd24-7452-4a88-a9d7-fac4499da470" name="Contains"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "PnrReference" IN PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition wrong pnr" id="c1a618fb-214d-4315-a3a8-589808d1ff72"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition wrong pnr" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="dfgg45" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7651200612356"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="d8409899-1994-41b7-9b26-01bc0eaac707" name="Contains"><con:configuration><token>INVALID REFERENCE.</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="efa581a9-5147-46e7-bdce-89a585a2928e" name="Not Contains"><con:configuration><token>xsi:nil=”true”</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition no pnr node" id="3efd6365-7f40-4228-9d52-412dc651e830"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition no pnr node" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7651200612356"/>
         <Options ReasonCode="003"/>
      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="599cdd24-7452-4a88-a9d7-fac4499da470" name="Contains"><con:configuration><token>MISSING MANDATORY FIELD PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition missed inventory" id="3bf9ceb5-06c7-4dc2-bea5-10de92bfcf2c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition missed inventory" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017038849"/>
         <ContractSelection RefContractNumbers="7651200612356"/>
         <Options ReasonCode="003"/>
      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="599cdd24-7452-4a88-a9d7-fac4499da470" name="Contains DEFECT 1603"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "Inventory" IN PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition missed inventory value" id="2ebf7beb-799a-4f7c-99f8-ce7278b135cc"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition missed inventory value" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017038849" Inventory=""/>
         <ContractSelection RefContractNumbers="7651200612356"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="599cdd24-7452-4a88-a9d7-fac4499da470" name="Contains"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "Inventory" IN PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition wrong inventory value" id="3e6efdb7-7fd5-42db-8c47-e5ed65b3a922"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition wrong inventory value" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017038849" Inventory="123"/>
         <ContractSelection RefContractNumbers="7651200612356"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="599cdd24-7452-4a88-a9d7-fac4499da470" name="Contains"><con:configuration><token>Unknown inventory=123</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3424b653-ba71-473e-b0a5-e57e87ff4d0c" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition RT 1pas ida y vuelta" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="5806d816-7ffb-4488-8d20-aa76cb260a85"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="ffa4de29-9e5a-434c-93c2-8229d80da343"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="980d437a-2f11-4e1a-86ba-d9496089ec3b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="74a035e7-ad40-4d30-898b-8ac59e0c22f7"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="684645e2-dcc2-4761-b747-ab67d443ea95"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120861">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120861">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-17T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-17T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-21T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-21T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEG_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_2" SegIDs="SEG_2" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120861" SegIDs="SEG_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5872380]SRPID[120861]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_25" PrdIDs="PRD_3" PaxIDs="PAX_120861" SegIDs="SEG_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5872404]SRPID[120861]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9a136422-131c-455c-8530-c20c4669e56d" name=" &lt;SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="2e29e5a4-9e2f-4492-8682-96b53c18a785"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="1cf36830-4198-4fcc-8697-d8c6318fd455"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="d0b8b20a-89af-4cbe-98f0-a25b551a074f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635844" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="0c47cb47-f3e6-4191-9e55-96ad9b39b613" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d36902d0-e603-48d4-8e71-242b1d9c2e85" name=" &lt;SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reservation" id="3a80219c-3df5-44ce-be46-68797407de50"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.@ID!=""
 
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="88250ef8-333a-4cb4-a400-fd376cd6c5b8"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="e45f7d5d-f8a7-482d-bd10-dd24b660d937"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="ca229c8d-4fac-47ec-a0d0-2fdb36a5405e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635844" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7348800614037"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="2af64e9c-f391-4700-bb3b-2693b4f9a52d" name="Contains"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="756a47e9-05cd-467c-8797-262e7781be28" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition RT AdultAndChild" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="e2e497e6-1d88-4a6b-8f8c-3643bf50d2ed"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="cbac7aa5-f1e6-4ca5-a045-0d5ca0567a62"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+6).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+9).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="a4b944ff-7c28-4856-ae67-99f4c6584863"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="39cd6fe5-d72c-4db7-bd20-141b78424f25"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="34c5fbd8-7bd2-480b-a251-6f90fbe00d2a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRODUCT_6" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_919408" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-19T07:33:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-19T10:36:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18901</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919430" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-22T19:58:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-22T22:38:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_919408">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5872433]SRPID[120862]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_919408">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5872433]SRPID[120863]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_143" PrdIDs="PRD_3" PaxIDs="PAX_1" SegIDs="SEG_919430">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5872533]SRPID[120862]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_144" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEG_919430">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5872533]SRPID[120863]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="2a049ad2-6b4b-4344-bb7c-d600078e0a21"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="eb33afd1-c1ac-4e37-8185-1acbecbbdd87"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="1048a724-db6d-4a61-8a3e-097f67e0c098"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635845" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="4e7edbb7-3027-45c7-9654-f3f232333862" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="eab02cab-7ffe-4d8d-8038-b65f4ce2a333"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="e6ab4992-1e51-488f-a006-8ca214d31b13"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="1606eb97-1cc0-4828-acd3-bcbca9d2a823"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635845" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7828500618396"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="f82038a4-028a-4696-b51f-7554d5868def" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="750abc9c-95fa-4a98-a017-e5e18397e292" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition RT AdultAndChildFree" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="a79dc9fa-4d6d-4a84-bd74-197ea38d7a5a"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="59de781a-7a0a-4437-82f5-e6dad1589114"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="01b29efe-569b-4ce4-96d3-6d31e736c50d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="7cbc327c-1a39-44bf-917b-322f1f65ff10"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="79096c93-6918-410c-9953-7fe711236873"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRODUCT_6" Type="002" Class="001" MainClass="P" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919431" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919476" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T21:25:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T23:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03610</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_919431">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5872534]SRPID[120864]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_919431">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5872534]SRPID[120865]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_498" PrdIDs="PRD_9" PaxIDs="PAX_1" SegIDs="SEG_919476">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5872951]SRPID[120864]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_499" PrdIDs="PRD_9" PaxIDs="PAX_2" SegIDs="SEG_919476">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5872951]SRPID[120865]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="f4a0b5dd-4d6e-4928-81cb-1e3f6c2ef971"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="0b1ce3c5-46e3-400e-87d0-dd8fc5ac6fba"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="dac2c294-a7f1-432c-bd1f-3dc485f803d0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635862" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="5096d73a-4193-4e7e-b96e-fc016e3d0657" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="fac3864e-20eb-4ea9-bdf0-267c62565510"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="40bd9179-065b-403b-ab4b-0c4905219ba5"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="164d9b7e-1a5e-4488-9c42-55cbae868095"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="?" Version="?" CorrelationID="?" Distributor="?" Language="?">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635862" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7132500624318"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="60f4fd26-1542-4a57-944f-d6c34419fe03" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition RT 9pas 99contacts" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings><con:setting id="HttpSettings@socket_timeout">120000</con:setting></con:settings><con:testStep type="groovy" name="Groovy Script: set endpoint" id="b131fac6-3d99-40e4-9025-7444974a02df"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="30579963-dbaf-4398-9959-d2a2a10a1d0b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+1).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="75c286d8-2c92-413c-80eb-b9690a064b55"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken[1]</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk12</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk13</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk14</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk15</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[5]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk16</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[6]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk17</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[7]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk18</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[8]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk19</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[9]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk21</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[10]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk22</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[11]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk23</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[12]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk24</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[13]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk25</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[14]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk26</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[15]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk27</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[16]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk28</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[17]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk29</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[18]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="3e58fd67-ca9b-4b23-90a2-2658141b3961"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[10].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[5]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[6]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[7]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[8]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[9]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[10]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[11]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[12]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[13]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[14]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[15]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[16]/Fare/@Code", fareCode2)
    holderRawReq.setNodeValue("//Pricing[17]/Fare/@Code", fareCode2)
      holderRawReq.setNodeValue("//Pricing[18]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="47f96380-4da2-4626-bf6b-25fedf7c6755"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_3">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_4">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_5">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_6">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_7">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_8">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_9">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
           <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTn_3" PaxIDs="PAX_3">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_4">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_5">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_6">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_7">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_8">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_9">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-14T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-14T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-15T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-15T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872953]SRPID[120866]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_3" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872953]SRPID[120867]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_4" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872953]SRPID[120868]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_5" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872953]SRPID[120869]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_6" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872953]SRPID[120870]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_7" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5872953]SRPID[120871]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_8" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872953]SRPID[120872]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_9" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872953]SRPID[120873]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_10" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5872953]SRPID[120874]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_38" PrdIDs="PRODUCT_1" PaxIDs="PAX_1" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872974]SRPID[120866]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_39" PrdIDs="PRODUCT_1" PaxIDs="PAX_2" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872974]SRPID[120867]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_40" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872974]SRPID[120868]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_41" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872974]SRPID[120869]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_42" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5872974]SRPID[120870]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_43" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5872974]SRPID[120871]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_44" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5872974]SRPID[120872]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_45" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5872974]SRPID[120873]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_46" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5872974]SRPID[120874]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="8838d53a-75fc-430f-af24-e4f4349adbe7"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="e66c67b4-b5c5-4f28-bc2f-37a195232f8b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="0733e11d-5934-416b-b336-0b0e2db7e8df"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635936" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ac35e9bd-d73d-4ab8-9fd4-8fce98a1e166" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="0ecc5e89-ce5c-41ff-a840-d08361c22e72"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="e1b10e67-88b4-40c6-be49-cd43c0f55f5a"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="3c50a7a8-0d14-4f81-8acd-9d6e6aa60fca"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635936" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7437400614594"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c0bfe0c1-9848-46d1-a2ed-d9a4cad32a09" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="RefundCondition ContractSelection NEG" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="1fd2ccc6-8127-4a55-ab4c-d90412029596"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition no node" id="783dbeee-61e2-4746-bc1b-d2590823d404"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition no node" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">\r
   <soap:Header>\r
      <auth>\r
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>\r
      </auth>\r
   </soap:Header>\r
   <soap:Body>\r
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">\r
         <!--Optional:-->\r
         <PnrIdentification PnrReference="R00017038708" Inventory="RNF"/>\r
         <Options ReasonCode="003"></Options>\r
      </get:RailConnect_GetRefundConditionsRQ>\r
   </soap:Body>\r
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="29e602da-97c4-4b99-85c0-4a6d869cdff1" name="Contains DEFECT 1603"><con:configuration><token>MISSING MANDATORY FIELD ContractSelection</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition no atribute" id="6ca20d0c-4cbc-4202-b164-79c6214a0f94"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition no atribute" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017038708" Inventory="RNF"/>
       <ContractSelection/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="29e602da-97c4-4b99-85c0-4a6d869cdff1" name="Contains"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "RefContractNumbers" IN &amp;lt;ContractSelection></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition no number" id="2b440bf6-2f7b-4aa2-960c-adc14b822632"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition no number" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017038708" Inventory="RNF"/>
    <ContractSelection RefContractNumbers="123"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="29e602da-97c4-4b99-85c0-4a6d869cdff1" name="Contains"><con:configuration><token>REFUND REJECTED - DOCUMENT NOT VALID FOR REFUND</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="RefundCondition wrong number" id="4b0d2a01-aaff-48b7-adbb-08e023baf0b6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition wrong number" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017038708" Inventory="RNF"/>
    <ContractSelection RefContractNumbers=""/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="29e602da-97c4-4b99-85c0-4a6d869cdff1" name="Contains"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "RefContractNumbers" IN &amp;lt;ContractSelection></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="7d8fe98e-e335-4664-8551-8eec97cc8999" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund OneWay_1pas" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="273f0b2f-3f81-4f0f-be7a-04463ad5d989"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="28673d32-25a1-4000-bbaa-cb730fc42e85"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="04c8c28e-b1c9-4fe4-ba6f-527374fb3914" name="XPath Match"><con:configuration/></con:assertion><con:assertion type="XPath Match" id="ec66be58-62bb-4a8a-b439-d637c3920702" name="XPath Match 1"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="29d7d7cf-bfb7-459f-b770-44e1e1de9179"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>reductionPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Reduction/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="d5edff1b-2c39-4a30-a5ce-3e325ae8a6e0"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="b9b059e6-b6be-4856-bbfd-83616d5febcd"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120875">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2000-01-01" Title="Ms"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120875">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-21T06:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-21T09:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03063</Identifier>
               </Segment>
            </Schedule>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEG_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
             <Reduction ID="RED_1" PaxIDs="PAX_120875" Description="some description">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120875" SegIDs="SEG_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5872975]SRPID[120875]</BookingToken>
            </Pricing>
            
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>   &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>&lt;Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="22f9f930-df5b-4807-ba49-7d00f8f0de7c" name="XPath Match"><con:configuration><path>substring(//Segment[1]/@Duration,3,1)!="0"</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="360d2535-5c81-4e4e-9776-3d3c35a8e7d9" name="XPath Match 1"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9b2a522d-da7b-4123-870b-fdafbff5403f" name="SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="773eabcb-6c69-49ca-9848-f62136f433ef"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="54b35ec0-27ce-4848-83d3-fb1252eb3933"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="2345cb7e-9580-4f9c-bcbd-0ea6dbc16bed"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="renfe" Language="EN" Options="options" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="ama">
         <PnrIdentification PnrReference="R00018635956" Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
              
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ef8268fe-7a81-4f8f-ba49-5bc0f2624338" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="df3343eb-591e-435c-9d48-d1175fa9f8cd" name="Contains 1"><con:configuration><token>ID="PAX</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6242f699-c390-419d-8993-15799d4bc9d5" name="Contains 2"><con:configuration><token>ID="RES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8a110b8-a466-4ccc-8b82-ec6f684c1521" name="ID=&quot;MOP"><con:configuration><token>ID="MOP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8e6684cc-93b3-413c-b7f7-6a722f8a72ca" name="ID=&quot;TKO"><con:configuration><token>ID="TKO</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b64746e0-e927-4c58-81db-48bb76dc934e" name="Contains 6"><con:configuration><token>ID="CTR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="76919ed0-eb4f-479c-a160-d43f49aff632" name="Contains 7"><con:configuration><token>ID="FAR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="319c701e-9e7f-4c7f-b374-77a507996cf3" name="Contains 8"><con:configuration><token>ID="RED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="fc13a4f9-d558-4d9e-b8bb-5ebb2c274ba9" name="XPath Match"><con:configuration><path>string-length(//Success/Booking/PnrIdentification/@CreationDate)</path><content>10</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="0249dce7-accf-47e2-a320-3d3c8cc08a55" name="XPath Match 1"><con:configuration><path>substring(//Segment[1]/@Duration,3,1)!="0"</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b7a0b60-9827-494e-b665-a3472ddef934" name="XPath Match 2"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="23f496ec-4b51-4911-92f3-701b4581f8b7" name="SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="9751de14-8ecb-4c11-88b9-8dd57603821a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer for CommitRefund" id="7325a1f0-3ae6-43c1-9be4-e7c4acc1ba17"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="8a183e31-baa5-45ba-a119-3f868adf5946"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="d672fde3-cee3-4d1b-9a32-d3d82e5956b5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635956" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7414500619054"/>
         <Options ReasonCode="003"/>
      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="XPath Match" id="0d86cc0c-fd91-4f9a-a022-f8eaa34b0d31" name="XPath Match"><con:configuration><path>declare namespace ns3='GetRefundConditionsRQ';
declare namespace ns2='GetRefundConditionsRS';
declare namespace ns1='refund_condition_ctr';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
count("xsi")</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="39b12285-d451-430c-824d-c9368dbb6ab0" name="XPath Match 2"><con:configuration><path>substring(//Segment[1]/@Duration,3,1)!="0"</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c09e6bf2-a557-400c-823e-b4cf7d862829" name="XPath Match 3"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10d265f1-610e-4366-8565-fdb80c297cc7" name="Contains"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e1c4a0b4-7a23-46ee-b9ec-2e74b31d81a9" name="SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="6d6572e9-39b9-48ea-9a3e-9c07610cc8f4"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="0e300398-8516-4cc4-843c-7ebe2c279aaf"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635956" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7414500619054"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003">
           <Remark>adsfadsf</Remark>
         </Options>

      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script PRNidentification" id="3bf61723-29f9-492c-a23b-b401ff31269b"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.PnrIdentification.@PnrReference==xmlSlurperEtalon.Body.RailConnect_IssueContractRS.Success.Booking.PnrIdentification.@PnrReference
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script passenger" id="4e092c0e-eb4c-437f-b68b-8f4cd6c35bbe"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.@ID!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@FirstName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@FirstName
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@LastName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@LastName
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@Title==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@Title
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth

assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Contact.@ID==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.@ID
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Contact.@PaxIDs!=""
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Contact.Email==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.Email


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reservation" id="8149f7ba-cbd1-4662-ba11-c37e9b8172ad"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.@ID!=""
 
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script MOP" id="a527b63b-d5bd-4d89-b226-2d95fc5b4515"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.MethodOfPayment.@ID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Ticketing option" id="14da90db-c05e-4ff6-a396-30b0501f341d"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.@ID!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.@Type=="006"
      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.@DeliveryMode!=""
             assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.ContactList.@ID!=""
              assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.ContactList.@CtnID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract" id="4032dd81-b963-49d6-a209-1a541d31d3e5"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@ID!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@PaxIDs!=""




 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@Number!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@Status!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@Amount
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.Document!=""

assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@TkoIDs!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract.@MopIDs!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script ContractRefund" id="bcd87690-196f-4ad0-9ace-932042034ca4"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.@CtrIDs!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.@Refundable=="true"
  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract.Quote[2].@Amount!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Quote" id="a80964f7-ecad-4008-996f-a6186583ee26"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[2].@Amount!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Options" id="ca681e2a-e3b5-418f-8397-45d28ba4d8f1"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Options.@ReasonCode!=""
   </script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="5f747cfe-f351-4f9c-adfa-7957a56e135c" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund optional fields" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="dd76d86b-050d-4d94-9bfe-b23ad527e36e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="810b7843-7c20-40ac-9950-7c2cb50f14ca"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+7).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="6fe617fe-db80-4f09-8de7-e4f6335d3524"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingSegIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ScheduleSegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>reductionPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Reduction/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="5e476abe-1d9e-4c14-8373-cb25c250ac71"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="da71d1e3-c85d-4f9c-9044-de23b14c85c1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120876">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2000-01-01" Title="MS"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120876">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919518" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-20T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-20T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEGMENT_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
             <Reduction ID="RED_1" PaxIDs="PAX_120876" Description="some description">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120876" SegIDs="SEG_919518">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5873208]SRPID[120876]</BookingToken>
            </Pricing>
            
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="0cea62a6-3f8b-4d2f-9ba2-c1e58ec2a33e"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="6795e9fd-5714-48df-8314-af1ab2fb6df2"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="f5e7e2e7-4432-4987-97ad-3f44501229b2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635963" Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
              
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ef8268fe-7a81-4f8f-ba49-5bc0f2624338" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="df3343eb-591e-435c-9d48-d1175fa9f8cd" name="Contains 1"><con:configuration><token>ID="PAX</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6242f699-c390-419d-8993-15799d4bc9d5" name="Contains 2"><con:configuration><token>ID="RES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b5fc0daf-b62e-420a-b328-6eb1b5e3ab14" name="ID=&quot;ACC"><con:configuration><token>ID="ACC</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8a110b8-a466-4ccc-8b82-ec6f684c1521" name="ID=&quot;MOP"><con:configuration><token>ID="MOP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8e6684cc-93b3-413c-b7f7-6a722f8a72ca" name="ID=&quot;TKO"><con:configuration><token>ID="TKO</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b64746e0-e927-4c58-81db-48bb76dc934e" name="Contains 6"><con:configuration><token>ID="CTR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="76919ed0-eb4f-479c-a160-d43f49aff632" name="Contains 7"><con:configuration><token>ID="FAR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="319c701e-9e7f-4c7f-b374-77a507996cf3" name="Contains 8"><con:configuration><token>ID="RED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="681701ea-a7d6-4b8f-a3e8-09b55ace9f7b"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="9685591a-63cf-4bf6-a6be-0fbb1e635327"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="4ac1ad6b-c03b-4245-9174-003258ab7a35"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="da49f4c3-c9da-4ce5-923e-0cfc7e236929"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635963" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7525200616924"/>
 <Options ReasonCode="003"/>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="cb8af627-39c8-47f0-b5ef-38325293afae" name="Contains DEFECT AMR-1602"><con:configuration><token>Pnr</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="15a8c471-ca54-4be5-af7f-6bafb60d33a6"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="fa68dcaf-b292-4d04-bda8-15979e627b96"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635963" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7525200616924"/>
         </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains DEFECT AMR-1858"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c381c86f-778b-4cb0-a8a9-7ce759c78461" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund_OneWay_9pas+99Contacts" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="d80c7d50-8005-45d6-8afa-5fe28922097c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="84f19550-fd9b-4a92-a588-b94df3125cd0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+2).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="d37ac272-1adb-4f35-8600-6d3f4dce1a87"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>pax_contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="11b430be-fe0e-4dfd-9b15-aa4db23a5d8d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="55860f36-43d6-40e1-baa5-df3373987c0e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120877">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120878">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120879">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120880">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120881">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120882">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120883">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120884">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120885">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Contact ID="CTN_1" PaxIDs="PAX_120877">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_120878">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_3" PaxIDs="PAX_120879">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_120880">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_120881">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_120882">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_120883">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_120884">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_120885">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
           
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-15T07:00:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-15T09:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03071</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120877" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5873435]SRPID[120877]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_120878" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5873435]SRPID[120878]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_3" PrdIDs="PRD_1" PaxIDs="PAX_120879" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5873435]SRPID[120879]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_4" PrdIDs="PRD_1" PaxIDs="PAX_120880" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5873435]SRPID[120880]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_5" PrdIDs="PRD_1" PaxIDs="PAX_120881" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5873435]SRPID[120881]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_6" PrdIDs="PRD_1" PaxIDs="PAX_120882" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5873435]SRPID[120882]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_7" PrdIDs="PRD_1" PaxIDs="PAX_120883" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5873435]SRPID[120883]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_8" PrdIDs="PRD_1" PaxIDs="PAX_120884" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
               <BookingToken>OID[5873435]SRPID[120884]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_9" PrdIDs="PRD_1" PaxIDs="PAX_120885" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
               <BookingToken>OID[5873435]SRPID[120885]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="900abcc7-4721-47e0-99c6-b8d4193fc47f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="4a1de40c-5eab-456b-a618-282a4f2f9323"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="5034102f-e882-41aa-bfba-51415fe81a83"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
 <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018635967" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="32d11d26-872c-4f43-a7b5-88f6946c99cb" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer for RefundCondition" id="30943011-5091-47e3-afad-55032d82ae32"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="7e6e5eaf-a1f9-4274-822c-567821f1ef7d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Copy of Groovy Script: set endpoint refund condition" id="14890879-3c74-4766-8cbf-3ba75fcc9297"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="0d2f5292-fe14-429e-a560-5151f5a359f0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635967" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7265400617360"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="5dd36796-81b1-43d3-89f0-0533d9faa993" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="5ddeb75d-faf8-406b-8bb2-3ac5f1c8ea6e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="15a5e692-7b36-48c5-b3d2-dcaf47e7dafa"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018635967" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7265400617360"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="64227237-c706-49b6-a573-7884c8353a35" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund_OneWay_AdultAndChild" searchProperties="true" timeout="60000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="c3abe7ba-ede4-4784-a2f7-7535f6b7d506"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-VALEN" id="c3778543-955f-4092-bef1-5c828fafb8f7"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-VALEN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">VALEN</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="ebbae623-5fc3-4fe5-8ab9-8c6ef4fa6c9a"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//BookingToken	</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Pricin</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-VALEN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="1ff8f1fc-a62e-48c0-824e-6b6a16e135a3"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="3e0c0d2b-3c62-46a4-bd8c-1c7ef27b9530"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120886">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120887">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120886">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120887">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">18000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">66212</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Cercanias" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">18000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Valencia Sant Isidre" DateTime="2018-02-18T12:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">66212</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18160</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120886" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873608]SRPID[120886]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120887" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873608]SRPID[120887]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="0b02a825-63c3-4a3f-b62e-ef0010d3a2bb"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="89a0ee51-976b-4202-92d0-de0548e5cc0b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="385e7581-1751-4a78-998e-4af36e3b8445"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018636001" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="1e65f88d-3504-4753-9910-7c221fa032b0" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="fac0a4b3-b7c3-46c6-baf8-65ed9fc02f47"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="566fdac6-49b7-4198-aa23-ed9637f27326"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="06fa1281-87e5-4e7a-8ebb-e529924de945"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="ed8aed47-a80a-4dee-b1f9-5ec8403deed0"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636001" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7843500622520"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="b783cd93-a856-4409-b1be-f15cfe1217d8" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="b3231d81-5115-48aa-a0fb-f72c1187dee4"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="1ebf4688-645d-4f88-947d-88d9cd03d447"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636001" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7843500622520"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="156f7aa2-3086-42b0-abd9-5f4dbc78dd2e" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund_OneWay_AdultAndChildFree" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="6e9e7800-6d37-46f1-9e5e-d42e0067d2a9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="b0ac22d6-170d-430b-bbe9-20e75e3f5f68"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="4116d597-963d-4de7-8d36-fc3a0c442898"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Actor</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_contact</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pax_Pricing</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="1aa65b74-71c6-479b-bf4c-211b6be32c66"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="1c7bc41b-ed28-4afd-9f61-dadad6c13e9f"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
       <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120888">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_120889">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01"/>
            </Actor>
             <Contact ID="CTN_1" PaxIDs="PAX_120888">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
              <Contact ID="CTN_2" PaxIDs="PAX_120889">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120888" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5873646]SRPID[120888]</BookingToken>
            </Pricing>
            <Pricing ID="PRICING_SOLUTION_2" PrdIDs="PRD_1" PaxIDs="PAX_120889" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873646]SRPID[120889]</BookingToken>
            </Pricing>
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token> &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c32f0911-2655-4133-89bd-4f87a783f5b1" name="Success"><con:configuration><token>&lt;Success</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="5d886ec1-6f9c-4817-947b-16aab8295b36"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="fc9ca279-704d-4d71-a5e7-d6b5622c401c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="1bfc3027-c45f-4ce9-8221-783ef8aa7bff"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018636036" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="0cad884c-2f02-42ab-8b4f-7aec6526a3d4" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="df6fa5f2-6c23-4e49-a423-d7057705e394"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="4a94bd4f-1295-4da0-952a-ef1bc5608f9d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="656dfd24-27c1-406c-85e5-12221a8319a6"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="f94a8e7e-f59f-4881-b46c-113bb101e990"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636036" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7929400617635"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="ce170432-f9bc-4b39-a4b9-6b2b9286c91b" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="5dc31b3e-6545-41c0-82e4-377c3d108394"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="8210c8a6-fc4b-4e3d-afcd-2d1c37cbe488"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636036" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7929400617635"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c33f7145-6ad2-4871-b4de-dbad62abfa44" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund RT 1pas ida y vuelta" searchProperties="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="3799015a-27d9-4ff4-a35f-e5736524001b"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="9ad941d7-0225-40ee-9c6d-248dfc25c676"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+8).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="32ae5ae4-a935-430b-ab24-7c85b35e8cdd"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[ToBeSoldWith][last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="a39d0a9e-4737-4c47-8a5f-ddb9aab827ff"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="58f00f6b-6176-4990-a7b4-68c76d819ba1"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120890">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120890">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-17T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-17T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-21T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-21T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEG_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_2" SegIDs="SEG_2" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120890" SegIDs="SEG_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5873781]SRPID[120890]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_25" PrdIDs="PRD_3" PaxIDs="PAX_120890" SegIDs="SEG_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5873805]SRPID[120890]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9a136422-131c-455c-8530-c20c4669e56d" name=" &lt;SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="62a3a48a-83d0-4dbe-b8e4-5f7b3fe26738"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="12dee02d-44b0-4fe1-92c6-8198736edab3"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="eef1f0c1-853a-469b-a130-2344654c163a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018636041" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="0c47cb47-f3e6-4191-9e55-96ad9b39b613" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d36902d0-e603-48d4-8e71-242b1d9c2e85" name=" &lt;SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script reservation" id="4b6ff3db-482b-44f1-9063-e4a419a53ec2"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("Ticketing#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



 assert  xmlSlurper.Body.RailConnect_IssueContractRS.Success.Booking.Reservation.@ID!=""
 
</script></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="c78a6fa0-9efe-4c24-9519-6cc5d6deb48f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="933bf342-af73-461e-92fa-bd7c6535fc5d"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="1f77b94c-f799-403f-8a28-ac2af1b6e72e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="00c1fa59-712c-4f35-91e2-4b0115524074"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636041" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7023500616729"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="2af64e9c-f391-4700-bb3b-2693b4f9a52d" name="Contains"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="6860fc14-786f-4cb4-8d5b-914de5854edc"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="3440995a-d4ef-4684-ae43-c3b30ab45b27"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636041" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7023500616729"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script PRNidentification" id="23ce2eeb-731e-4327-9db0-1999f995d1f5"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Ticketing#Request").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.PnrIdentification.@PnrReference==xmlSlurperEtalon.Body.RailConnect_IssueContractRQ.PnrIdentification.@PnrReference
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.PnrIdentification.@CreationDate!=""
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.PnrIdentification.@Inventory=='RNF'

</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script passenger" id="9e227a60-ea8d-4d01-908c-eef6845ca749"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.@ID!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@FirstName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@FirstName
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@LastName==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@LastName
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@Title==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@Title
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Actor.Name.@DateOfBirth

assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Contact.@ID==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.@ID
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Contact.@PaxIDs!=""
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Passenger.Contact.Email==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Passenger.Contact.Email


</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script MOP" id="817628a4-92c3-48f0-a7b1-2b47a0dc8196"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  //assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.MethodOfPayment.@ID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Ticketing option" id="47a580a3-4fd3-45b5-92a1-9d94504440e7"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult



  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.@ID!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.@Type=="006"
      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.@DeliveryMode!=""
       assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.ContactList.@ID!=""
              assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.TicketingOption.ContactList.@CtnID!=""
 </script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract1" id="54c0b39d-1914-4491-ba23-15f66aa4b8e4"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@ID!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@PaxIDs!=""


 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@Number!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@Status!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[0].Price.@Amount
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].Document!=""
 //DEFECT 1527
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@TkoIDs!=""
 //assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[0].@MopIDs!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Contract2" id="933962f3-6494-492f-9d69-3070d888a8e5"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@ID!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@PaxIDs!=""

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@TkoIDs!=""
 //assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@MopIDs!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@Number!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@Status!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@StartValidityDate!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@EndValidityDate!=""
  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].@NumberOfPassengers=="1"

   
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].Price.@Amount==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.DetailQuote[1].Price.@Amount
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].Price.@CurrencyCode==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@CurrencyCode
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].Price.@DecimalPlaces==xmlSlurperEtalon.Body.RailConnect_SellSegmentRS.Success.Booking.Reservation.Pricing.TotalQuote.Price.@DecimalPlaces

assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].Document.@Type=="URL"
assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Booking.Reservation.Contract[1].Document!=""
 
</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script ContractRefund" id="4de24eb8-f485-49d0-bb08-d420f62f1158"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult

 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].@CtrIDs!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].@Refundable=="true"
  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[0].Quote[2].@Amount!=""

     assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].@CtrIDs!=""
 assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].@Refundable=="true"
  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Contract[1].Quote[2].@Amount!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Quote" id="0ce584ab-c61b-404b-b8ff-a2900a96ed41"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[0].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[0].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[0].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[1].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[1].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[1].@Amount!=""

      assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[2].@CurrencyCode!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[2].@DecimalPlaces!=""
    assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Quote[2].@Amount!=""</script></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script Options" id="bc55283c-c883-4971-982e-a924f5521cd0"><con:settings/><con:config><script>def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
def xml = groovyUtils.getXmlHolder ("CommitRefund#Response").getXml()
def xmlSlurper = new XmlSlurper().parseText(xml)
assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult

def xmlEtalon = groovyUtils.getXmlHolder ("Booking#Response").getXml()
def xmlSlurperEtalon = new XmlSlurper().parseText(xmlEtalon)
assert xmlSlurperEtalon instanceof groovy.util.slurpersupport.GPathResult


  assert  xmlSlurper.Body.RailConnect_CommitRefundRS.Success.Options.@ReasonCode!=""
   </script></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="d7481143-4df7-4bc3-8f95-f19319bcf864" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund RT AdultAndChild" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="d75a549e-cdc0-47f5-a889-b1e523f73230"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="3af01cad-a4d5-4a04-bc3d-933a1de64a75"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+6).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+9).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2008-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="679e29f0-c707-40b0-89cb-3ba62a220a68"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="a7d38ef4-c58a-4631-a9b3-5c3d3bfdf68c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="b7176adf-f6f2-4378-a223-06413c151ca3"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2008-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRODUCT_6" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEG_919626" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-19T07:33:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-19T10:36:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18901</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919648" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-22T19:58:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-22T22:38:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_919626">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5873808]SRPID[120891]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_919626">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5873808]SRPID[120892]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_143" PrdIDs="PRD_3" PaxIDs="PAX_1" SegIDs="SEG_919648">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5873908]SRPID[120891]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_144" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEG_919648">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5873908]SRPID[120892]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="86298186-145a-423c-8f7a-171ee31111a3"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="946ff4ef-dfcb-4f93-949b-45f1b2a122e9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="5fed8631-c492-472f-b87d-3788b70f62fb"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018636049" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="4e7edbb7-3027-45c7-9654-f3f232333862" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="e379757d-b726-4058-bf51-760b3433f597"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="1949cf75-5d64-45e7-8033-26fbd341768c"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="6d46a85a-cc21-4a2e-8a77-aae0b0f1e8ff"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="81df981d-c84b-42d0-9e0e-c04241d2f14a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636049" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7773900624455"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="f82038a4-028a-4696-b51f-7554d5868def" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="237f21c8-96ee-47f9-b3c2-520a97b5c9d5"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="0cd8daa5-083b-4396-be61-34d354fac928"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636049" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7773900624455"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="3edf3c36-c96b-4fa7-902a-e1aa534c44b5" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund RT 9pas 99contacts" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings><con:setting id="HttpSettings@socket_timeout">300000</con:setting></con:settings><con:testStep type="groovy" name="Groovy Script: set endpoint" id="0c4168a0-2913-4978-850b-92db08125f37"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="8d9ac046-c61d-4f99-a121-824c0eb65f36"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
     <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">30100</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+3).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">30100</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T18:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1"/>
         <Passenger BirthDate="1990-01-01" ExtID="2"/>
         <Passenger BirthDate="2000-01-01" ExtID="3"/>
         <Passenger BirthDate="2000-01-01" ExtID="4"/>
         <Passenger BirthDate="2000-01-01" ExtID="5"/>
         <Passenger BirthDate="2000-01-01" ExtID="6"/>
         <Passenger BirthDate="2000-01-01" ExtID="7"/>
         <Passenger BirthDate="2000-01-01" ExtID="8"/>
         <Passenger BirthDate="2000-01-01" ExtID="9"/>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="64cf97d1-0ab3-4ccf-91cd-f524c849c3aa"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken[1]</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk12</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk13</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk14</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk15</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[5]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk16</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[6]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk17</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[7]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk18</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[8]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk19</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[9]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk21</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[10]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk22</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[11]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk23</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[3]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[12]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk24</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[4]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[13]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk25</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[5]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[14]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk26</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[6]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[15]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk27</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[7]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[16]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk28</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[8]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[17]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktk29</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[9]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[18]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="87b7b458-f64d-4b91-abc0-d07e68b15433"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[10].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[5]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[6]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[7]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[8]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[9]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[10]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[11]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[12]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[13]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[14]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[15]/Fare/@Code", fareCode2)
  holderRawReq.setNodeValue("//Pricing[16]/Fare/@Code", fareCode2)
    holderRawReq.setNodeValue("//Pricing[17]/Fare/@Code", fareCode2)
      holderRawReq.setNodeValue("//Pricing[18]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="aaad97e6-8137-485e-bff8-0042e4c0f562"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
        <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_3">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_4">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_5">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_6">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_7">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_8">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_9">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
           <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTn_3" PaxIDs="PAX_3">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_4" PaxIDs="PAX_4">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_5" PaxIDs="PAX_5">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_6" PaxIDs="PAX_6">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_7" PaxIDs="PAX_7">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_8" PaxIDs="PAX_8">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_9" PaxIDs="PAX_9">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-16T19:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-16T22:17:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18909</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">30100</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">17000</LocationCode>
               </Arrival>
               <Segment ID="SEGMENT_2" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Salamanca" DateTime="2018-02-17T18:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">30100</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Chamartin" DateTime="2018-02-17T19:56:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">17000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">18908</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873934]SRPID[120894]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_3" PrdIDs="PRD_3" PaxIDs="PAX_2" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873934]SRPID[120895]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_4" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873934]SRPID[120896]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_5" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873934]SRPID[120897]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_6" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873934]SRPID[120898]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_7" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5873934]SRPID[120899]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_8" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873934]SRPID[120900]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_9" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873934]SRPID[120901]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_10" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_1">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5873934]SRPID[120902]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_38" PrdIDs="PRODUCT_1" PaxIDs="PAX_1" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873954]SRPID[120894]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_39" PrdIDs="PRODUCT_1" PaxIDs="PAX_2" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873954]SRPID[120895]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_40" PrdIDs="PRODUCT_1" PaxIDs="PAX_3" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873954]SRPID[120896]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_41" PrdIDs="PRODUCT_1" PaxIDs="PAX_4" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873954]SRPID[120897]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_42" PrdIDs="PRODUCT_1" PaxIDs="PAX_5" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
               
            <BookingToken>OID[5873954]SRPID[120898]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_43" PrdIDs="PRODUCT_1" PaxIDs="PAX_6" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5873954]SRPID[120899]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_44" PrdIDs="PRODUCT_1" PaxIDs="PAX_7" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5873954]SRPID[120900]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_45" PrdIDs="PRODUCT_1" PaxIDs="PAX_8" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5873954]SRPID[120901]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_46" PrdIDs="PRODUCT_1" PaxIDs="PAX_9" SegIDs="SEGMENT_2">
               <!--You have a CHOICE of the next 2 items at this level-->
              
            <BookingToken>OID[5873954]SRPID[120902]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="f979699f-2bc9-4c59-8022-787c731d5a1f"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="b4b02c8b-c1ca-4280-ab99-3e895b1d1029"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="200bdb49-7d18-42bf-acc3-de53dd11f586"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018636051" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ac35e9bd-d73d-4ab8-9fd4-8fce98a1e166" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="19ae09d1-bb0e-4444-9aa7-c593a3473400"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="c03255ab-6355-44b5-9f92-1e9e44b43044"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="51393322-228a-4825-a550-114b6f86ae1e"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="878edb6b-b5fa-48d2-9e52-ae8378ca8717"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636051" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7366800625761"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="51ca57f6-ca39-43ac-b962-2f2586aa2fec"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="fb62f3de-6bf6-455f-9650-e1381a112617"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636051" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7366800625761"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="78b7c1de-690c-46e0-a9e7-a2647cd62820" failOnError="true" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund RT AdultAndChildFree" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="bbce739d-3ce9-4b1d-ab6d-9dc0f8e989d0"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="993b75bc-9ac0-4b45-85d5-1b3565ff8519"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
             
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
         <Passenger BirthDate="2015-01-01" ExtID="2">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="ff60e704-1178-4825-abed-5ba11795a487"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][1]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[1]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>bktklast2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote[2]/BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4PrdID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing3SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[3]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing4SegID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[not(ToBeSoldWith)][last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[4]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="df5c52a7-58a5-4c55-91f3-393d0fdde82d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[2].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare11ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[0].@FareIDs
def fare12ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote[1].@FareIDs

def fare21ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[0].@FareIDs
def fare22ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote[1].@FareIDs

log.info fare11ID
log.info fare12ID
log.info fare21ID
log.info fare22ID

def fareCode11 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare11ID}.@Code
  def fareCode12 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare12ID}.@Code
  def fareCode21 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare21ID}.@Code
  def fareCode22 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare22ID}.@Code
  log.info fareCode11
log.info fareCode12
  log.info fareCode21
log.info fareCode22

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode11)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode12)
  holderRawReq.setNodeValue("//Pricing[3]/Fare/@Code", fareCode21)
  holderRawReq.setNodeValue("//Pricing[4]/Fare/@Code", fareCode22)
  holderRawReq.updateProperty()
  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="9babc31f-9518-449f-b0a4-0acd2dc2f7ef"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_1">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
            <Actor ID="PAX_2">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2015-01-01" Title="Mr"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
            <Contact ID="CTN_2" PaxIDs="PAX_2">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>qwe@qwe.com</Email>
            </Contact>
         </Passenger>

         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Product ID="PRODUCT_6" Type="002" Class="001" MainClass="P" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919687" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919732" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T21:25:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T23:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03610</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_1" SegIDs="SEG_919687">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5874042]SRPID[120913]</BookingToken>
            </Pricing>
              <Pricing ID="PSL_2" PrdIDs="PRD_1" PaxIDs="PAX_2" SegIDs="SEG_919687">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5874042]SRPID[120914]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_498" PrdIDs="PRD_9" PaxIDs="PAX_1" SegIDs="SEG_919732">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5874459]SRPID[120913]</BookingToken>
            </Pricing>
             <Pricing ID="PSL_499" PrdIDs="PRD_9" PaxIDs="PAX_2" SegIDs="SEG_919732">
               <!--You have a CHOICE of the next 2 items at this level-->
              
             <BookingToken>OID[5874459]SRPID[120914]</BookingToken>
            </Pricing>
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer" id="23bbbef9-7b5d-43b9-892c-2900150a89bc"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="e2dfddfe-11d1-4503-9d7a-50d481ad408d"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="7a1aa90f-df22-4bf6-bd60-ffbb2e919f6e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018636066" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="5096d73a-4193-4e7e-b96e-fc016e3d0657" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="b9dbf2d5-8e93-4100-9c29-5c005c1d2b08"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="27709670-b475-4f90-99d2-753605fd8878"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="9fe3cc25-9bb2-4a08-befe-f41ade34e826"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="3d661e62-91fb-4741-a56a-b4650f82bb61"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123123" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636066" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7702400620929"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="5ad3e8a2-6c92-43cc-942e-8d1546031948"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="16eb8524-4c60-44a9-8a40-b9a60f2ab12b"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636066" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7702400620929"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="c1c52135-19da-4c8a-8cd3-44ffaf4f2d4d" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund NEG pnr" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword="" disabled="true"><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="c0f4c7d8-8d86-45c9-b79d-ce30d8880ddc"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

   // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund no pnr" id="8b4bc343-5d26-48fa-8dc2-dc7c543e3132"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund no pnr" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification  Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7972500616222"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>NO PNR IS ACTIVE- REDISPLAY PNR REQUIRED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="CommitRefund missed pnr number" id="ec7c88f9-d15e-434a-bca7-87353a8f7580"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund missed pnr number" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7972500616222"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>NO PNR IS ACTIVE- REDISPLAY PNR REQUIRED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="CommitRefund wrong pnr" id="7cc9f662-20e4-4cf2-8866-78a9977ba010"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund wrong pnr" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R000235235269415" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7972500616222"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>NO PNR IS ACTIVE- REDISPLAY PNR REQUIRED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="CommitRefund no pnr node" id="8c1c9c2b-4085-43c9-b40e-87fb3d1229a8"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund no pnr node" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
       
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7972500616222"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>NO PNR IDENTIFICATION IN REQUEST</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="CommitRefund missed inventory" id="2b4b6c5e-3026-47bb-a823-0dd541adfb43"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund missed inventory" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017269415"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7972500616222"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>MISSING MANDATORY ATTRIBUTE "Inventory" IN &amp;lt;PnrIdentification></token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="CommitRefund missed inv value" id="d2358da4-9205-4faa-b109-848a177fa03e"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund missed inv value" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017269415" Inventory=""/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7972500616222"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>INVALID CODE CONTEXT</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="request" name="CommitRefund wrong inv value" id="eaa780b2-2083-4ad3-b780-e0c9e730aea2"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund wrong inv value" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://demo-amr.contentrail.com/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017269415" Inventory="RasdF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7972500616222"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>INVALID CODE CONTEXT</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="e6ea59c5-39ca-49eb-9410-8e84aa2936f3" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund without refund conditions" searchProperties="true" timeout="0" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="d726a01d-2b0c-4567-ae73-9929afe04e58"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchMAD-BCN" id="ddae0fac-bcbb-440e-b742-91bcb3a60ea5"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchMAD-BCN" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T01:00:00</Departure>
            </DateTime>
            
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
           </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:assertion type="Simple Contains" id="2c7de199-5916-4274-b234-265749dea428" name="Contains 1"><con:configuration><token>&lt;Segment</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="517cbcf8-8edb-4172-9a35-d1e56d89c508" name="Contains 2"><con:configuration><token>&lt;ScheduleSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="957b2e4b-0eda-4fa6-a893-8685d9d0bbdf" name="Contains 3"><con:configuration><token> &lt;Passenger</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="57f84043-cd66-4691-850b-7254f0336ba9" name="Contains 4"><con:configuration><token>&lt;Product</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6b6c0ba6-14f4-459c-99a1-b4c5137a04a7" name="Contains 5"><con:configuration><token>&lt;PricingSolution</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="c2d31ef1-8b37-42e1-8cc8-6ab7a4171250" name="Contains"><con:configuration><token>&lt;TotalQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="02426c62-46e5-4cad-8995-465dd399cfdd" name="Contains 6"><con:configuration><token>&lt;DetailQuote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="77b66f1b-26e8-4ca8-905b-032e68dbc991" name="Contains 7"><con:configuration><token>TicketingOption</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="803351f6-09df-439a-a5e7-01d6f19b7b91" name="Contains 8"><con:configuration><token>Reducti</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="a82b2581-a45c-4fb7-866c-75d09009e6f7" name="Not Contains"><con:configuration><token>ToBeSoldWith</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple NotContains" id="bd91d700-f1f8-4e84-9f44-6f0d6da963d2" name="Not Contains 1"><con:configuration><token>NiÃ±o</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b6152d5b-18c6-483f-b417-de0a55149756" name="&lt;PassengerCategoryCode"><con:configuration><token>PassengerCategoryCode</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="04c8c28e-b1c9-4fe4-ba6f-527374fb3914" name="XPath Match"><con:configuration/></con:assertion><con:assertion type="XPath Match" id="ec66be58-62bb-4a8a-b439-d637c3920702" name="XPath Match 1"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Copy of Properties from search to booking" id="440635b3-de8e-43bc-962f-5ce064f68882"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPrdId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>PricingPaxIds</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>AutorId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ContactPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>reductionPaxID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchMAD-BCN</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Reduction/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="f70f2dfd-260c-4ccc-8679-24e43a8fb16a"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Booking" id="e2d057fd-97e1-4038-ba79-edc300d4ee0a"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/book</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120919">
               <Name FirstName="Name" LastName="LastName" DateOfBirth="2000-01-01" Title="Ms"/>
                    </Actor>
                    <Contact ID="CTN_1" PaxIDs="PAX_120919">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>

         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCH_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_1" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T06:20:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T09:29:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03463</Identifier>
               </Segment>
            </Schedule>
              <AccommodationPreferences Type="002" CoachNumber="1" PlaceNumber="1" NearTo="true" ID="ACC_1" SegIDs="SEG_1" PaxIDs="PAX_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               <!--0 to 99 repetitions:-->
               <SeatOptions Code="SPS" Value="002"/>
               
            </AccommodationPreferences>
             <Reduction ID="RED_1" PaxIDs="PAX_120919" Description="some description">
               <PassengerCategoryCode xsi:type="xsd:string">006</PassengerCategoryCode>
            </Reduction>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120919" SegIDs="SEG_1">
               <!--You have a CHOICE of the next 2 items at this level-->
               
             <BookingToken>OID[5874488]SRPID[120919]</BookingToken>
            </Pricing>
            
            <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="6a587f17-be02-43f9-9788-ad857956f56d" name="Contains"><con:configuration><token>  &lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="7c22210e-3404-46e7-bff8-e52d367281b4" name="Contains1"><con:configuration><token>&lt;Passenger>
</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="d5bac742-28e5-4b73-b042-26f6667a8a98" name="Contains 2"><con:configuration><token>&lt;Reservation</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="22f9f930-df5b-4807-ba49-7d00f8f0de7c" name="XPath Match"><con:configuration><path>substring(//Segment[1]/@Duration,3,1)!="0"</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="360d2535-5c81-4e4e-9776-3d3c35a8e7d9" name="XPath Match 1"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="9b2a522d-da7b-4123-870b-fdafbff5403f" name="SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="85c517d8-d6f3-4ea1-acc4-841de8691c27"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="2421359f-093c-4e84-a956-1fdde5847087"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
 
  def ticketStep = testRunner.testCase.getTestStepByName("Ticketing")

  ticketStep.getHttpRequest().setEndpoint(endP)


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="b9b1ecca-5f32-4313-aa01-3c66075ea841"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
  <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="renfe" Language="EN" Options="options" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="ama">
         <PnrIdentification PnrReference="R00018636067" Inventory="RNF"/>
         <Issue>
            <!--Optional:-->
            <MethodOfPayment>
                 <!--Optional:-->
               <Cash xsi:type="xsd:anyType"/>
            </MethodOfPayment>
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             <Remark>Technical remark LNIATA 090807060</Remark>
              
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="ef8268fe-7a81-4f8f-ba49-5bc0f2624338" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="df3343eb-591e-435c-9d48-d1175fa9f8cd" name="Contains 1"><con:configuration><token>ID="PAX</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="6242f699-c390-419d-8993-15799d4bc9d5" name="Contains 2"><con:configuration><token>ID="RES</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b8a110b8-a466-4ccc-8b82-ec6f684c1521" name="ID=&quot;MOP"><con:configuration><token>ID="MOP</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="8e6684cc-93b3-413c-b7f7-6a722f8a72ca" name="ID=&quot;TKO"><con:configuration><token>ID="TKO</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="b64746e0-e927-4c58-81db-48bb76dc934e" name="Contains 6"><con:configuration><token>ID="CTR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="76919ed0-eb4f-479c-a160-d43f49aff632" name="Contains 7"><con:configuration><token>ID="FAR</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="319c701e-9e7f-4c7f-b374-77a507996cf3" name="Contains 8"><con:configuration><token>ID="RED</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="fc13a4f9-d558-4d9e-b8bb-5ebb2c274ba9" name="XPath Match"><con:configuration><path>string-length(//Success/Booking/PnrIdentification/@CreationDate)</path><content>10</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="0249dce7-accf-47e2-a320-3d3c8cc08a55" name="XPath Match 1"><con:configuration><path>substring(//Segment[1]/@Duration,3,1)!="0"</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="4b7a0b60-9827-494e-b665-a3472ddef934" name="XPath Match 2"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="23f496ec-4b51-4911-92f3-701b4581f8b7" name="SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="330d19ff-a145-4145-b271-7e42327b8e7a" disabled="true"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Copy of Property Transfer for CommitRefund" id="aedc23b3-0395-4282-928e-46998742ffb5"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="4c4da6a7-91ab-4160-a3eb-c1da0c2ed568" disabled="true"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="772e40e5-ce87-454c-82af-cda2216e4047" disabled="true"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/search</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00017274560" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7147100623684"/>
         <Options ReasonCode="003"/>
      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="XPath Match" id="0d86cc0c-fd91-4f9a-a022-f8eaa34b0d31" name="XPath Match"><con:configuration><path>declare namespace ns3='GetRefundConditionsRQ';
declare namespace ns2='GetRefundConditionsRS';
declare namespace ns1='refund_condition_ctr';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
count("xsi")</path><content>1</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="39b12285-d451-430c-824d-c9368dbb6ab0" name="XPath Match 2"><con:configuration><path>substring(//Segment[1]/@Duration,3,1)!="0"</path><content>true</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="XPath Match" id="c09e6bf2-a557-400c-823e-b4cf7d862829" name="XPath Match 3"><con:configuration><path>contains(//RailConnect_ScheduleQuoteRS,"ns1")</path><content>false</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:assertion type="Simple Contains" id="10d265f1-610e-4366-8565-fdb80c297cc7" name="Contains"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="Simple Contains" id="e1c4a0b4-7a23-46ee-b9ec-2e74b31d81a9" name="SeatOptions"><con:configuration><token>SeatOptions</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="59419a2f-e5ec-4ded-b1cc-4a68289da3e8"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="c68ba9e8-f61a-4e2d-8f50-e28fc64ed553"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636067" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7752800610418"/>
         <MethodOfPayment>
            <Cash/>
         </MethodOfPayment>
         <Options ReasonCode="003">
           <Remark>adsfadsf</Remark>
         </Options>

      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token>NO REFUND CONDITIONS IN CONTEXT</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:testCase id="ca959119-17fb-43af-be6b-daad57ef3d1b" failOnError="false" failTestCaseOnErrors="true" keepSession="false" maxResults="0" name="CommitRefund RT 1pas not ida y vuelta" searchProperties="true" timeout="120000" wsrmEnabled="false" wsrmVersion="1.0" wsrmAckTo="" amfAuthorisation="false" amfEndpoint="" amfLogin="" amfPassword=""><con:settings/><con:testStep type="groovy" name="Groovy Script: set endpoint" id="0bd57f78-815c-45c3-a89f-d01404088f22"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionSearch")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  // Change the access credentials for all request
  String secretCode = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectSecretKey")
  log.info secretCode
  

  def groovyUtils = new com.eviware.soapui.support.GroovyUtils(context)
  def project = context.testCase.testSuite.project


  for (int i = 0;i&lt;allTestSteps.size();i++){
  def teststepname = allTestSteps[i].getName().toString()

  String inputHolder = teststepname + "#Request"
  log.info inputHolder
  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//auth/secretKey", secretCode)
  holderRawReq.updateProperty()
  }</script></con:config></con:testStep><con:testStep type="request" name="SearchRT" id="9b4e44ed-51a4-446d-bfa6-24fd74c61a28"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSSearch</con:interface><con:operation>searchAction</con:operation><con:request name="SearchRT" id="afc367b0-5b4e-4d6e-8183-720f770d08de"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sch="ScheduleRQ">
    <soap:Header>
        <auth>
            <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
        </auth>
    </soap:Header>
   <soap:Body>
      <sch:RailConnect_ScheduleQuoteRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--1 to 2 repetitions:-->
         <Schedule ExtID="1">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">MADRI</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">BARCE</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+4).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         
         <Schedule ExtID="2">
            <Departure xsi:type="ctr:LocationType" xmlns:ctr="ctr">
                <LocationCode Context="RNF">BARCE</LocationCode>
            </Departure>
            <Arrival xsi:type="ctr:LocationType" xmlns:ctr="ctr">
               <LocationCode Context="RNF">MADRI</LocationCode>
            </Arrival>
            <DateTime>
               <Departure xsi:type="ctr:DateOrDateTimeType" xmlns:ctr="ctr">${=(new Date()+5).format('yyyy-MM-dd')}T12:00:00</Departure>
            </DateTime>
             <SearchCriteria Code="TCC" Value="002" PreferLevel="Only"/>
         </Schedule>
         <Passenger BirthDate="2000-01-01" ExtID="1">
         </Passenger>
      </sch:RailConnect_ScheduleQuoteRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="59f4397d-28f2-42e1-8fc5-43c9e204d4cd"/><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Properties from search to booking" id="11b499ff-1ef8-48cf-8ba9-111d9633bb86"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="false" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductId</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product[1]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Type</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Type</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@Class</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@Class</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ProductMainClass</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@MainClass</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@MainClass</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Product AccomType</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Product/@AccomType</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Product/@AccomType</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule1SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[1]/Segment[1]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2DepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2ArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Shedule2SegmentDepartureDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentDepartureLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Departure/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Departure/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalDateTime</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@DateTime</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@DateTime</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationName</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/@LocationName</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/@LocationName</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentArrivalLocationCode</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Arrival/LocationCode</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Arrival/LocationCode</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2Identifier</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Schedule[2]/Segment[last()]/Identifier</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment[1]/Identifier</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2ProductID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PrdIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PrdIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2PaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@PaxIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pricing2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[2]/@SegIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule1SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[1]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[1]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Schedule2SegmentID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]/DetailQuote/@SegIDs</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Schedule[2]/Segment/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorID</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Actor/@ID</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken1</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[1]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>BookingToken2</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//PricingSolution[last()]//BookingToken</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Pricing[last()]//BookingToken</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>ActorPaxIDs</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>SearchRT</con:sourceStep><con:sourcePath>//Passenger/@ID</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Booking</con:targetStep><con:targetPath>//Passenger/Contact/@PaxIDs</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint booking" id="564e0c47-e124-4d31-bebf-04f0410519e9"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionBook")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def bookingStep = testRunner.testCase.getTestStepByName("Booking")

 bookingStep.getHttpRequest().setEndpoint(endP)

def groovyUtils = new com.eviware.soapui.support.GroovyUtils( context )
  def xml = groovyUtils.getXmlHolder ("Booking#Request").getXml()
  def xmlSlurper = new XmlSlurper().parseText(xml)
  assert xmlSlurper instanceof groovy.util.slurpersupport.GPathResult
  
def pricing1ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[0].@ID
def pricing2ID=xmlSlurper.Body.RailConnect_SellSegmentRQ.Reservation.Pricing[1].@ID
log.info pricing1ID
log.info pricing2ID

def xml2 = groovyUtils.getXmlHolder ("SearchRT#Response").getXml()
 def xmlSlurper2 = new XmlSlurper().parseText(xml2)
 assert xmlSlurper2 instanceof groovy.util.slurpersupport.GPathResult

def fare1ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing1ID}.DetailQuote.@FareIDs
def fare2ID=xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==pricing2ID}.DetailQuote.@FareIDs
log.info fare1ID
log.info fare2ID

def fareCode1 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare1ID}.@Code
  def fareCode2 = xmlSlurper2.Body.RailConnect_ScheduleQuoteRS.Success.Pricing.'*'.find{node->node.@ID==fare2ID}.@Code
  log.info fareCode1
log.info fareCode2

  String inputHolder = "Booking#Request"

  def holderRawReq = groovyUtils.getXmlHolder(inputHolder)
  holderRawReq.setNodeValue("//Pricing[1]/Fare/@Code", fareCode1)
  holderRawReq.setNodeValue("//Pricing[2]/Fare/@Code", fareCode2)
  holderRawReq.updateProperty()</script></con:config></con:testStep><con:testStep type="request" name="Booking" id="d4a0b02d-cb05-44a8-b175-247a294c1f74"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSBook</con:interface><con:operation>bookAction</con:operation><con:request name="Booking" id="20cd16ee-0966-4c32-b02b-bdd5289e2d6a"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:sel="SellSegmentRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
         <sel:RailConnect_SellSegmentRQ Distributor="?" Language="en-us" ReservationOptions="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <!--1 to 99 repetitions:-->
         <Passenger>
            <!--1 to 9 repetitions:-->
            <Actor ID="PAX_120924">
               <Name FirstName="Name" LastName="LastName"/>
            </Actor>
              <Contact ID="CTN_1" PaxIDs="PAX_120924">
               <!--You have a CHOICE of the next 3 items at this level-->
               <Email>asd@sdf.com</Email>
              
            </Contact>
         </Passenger>
         <Reservation ID="RES_1">
            <!--1 to 99 repetitions:-->
            <Product ID="PRD_1" Type="002" Class="002" MainClass="T" AccomType="002"/>
            <Schedule ID="SCHEDULE_1">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Arrival>
               <Segment ID="SEG_919773" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-17T12:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-17T15:30:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03123</Identifier>
               </Segment>
            </Schedule>
            <Schedule ID="SCHEDULE_2">
               <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">71801</LocationCode>
               </Departure>
               <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" xmlns:sell="sell_segment_ctr">
                  <LocationCode Context="RNF">60000</LocationCode>
               </Arrival>
               <Segment ID="SEG_919798" Type="002" Inventory="RNF">
                  <Departure xsi:type="sell:DateTimeLocationType" LocationName="Barcelona Sants" DateTime="2018-02-18T21:25:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">71801</LocationCode>
                  </Departure>
                  <Arrival xsi:type="sell:DateTimeLocationType" LocationName="Madrid Puerta de Atocha" DateTime="2018-02-18T23:55:00" xmlns:sell="sell_segment_ctr">
                     <LocationCode Context="RNF">60000</LocationCode>
                  </Arrival>
                  <ServiceProviderCode xsi:type="sell:StringLength1to16" xmlns:sell="sell_segment_ctr">RNF</ServiceProviderCode>
                  <Identifier xsi:type="sell:StringLength1to8" xmlns:sell="sell_segment_ctr">03610</Identifier>
               </Segment>
            </Schedule>
            <Pricing ID="PSL_1" PrdIDs="PRD_1" PaxIDs="PAX_120924" SegIDs="SEG_919773">
               <!--You have a CHOICE of the next 2 items at this level-->
              
           <BookingToken>OID[5874678]SRPID[120924]</BookingToken>
            </Pricing>
            <Pricing ID="PSL_84" PrdIDs="PRD_1" PaxIDs="PAX_120924" SegIDs="SEG_919798">
               <!--You have a CHOICE of the next 2 items at this level-->
               
           <BookingToken>OID[5874923]SRPID[120924]</BookingToken>
            </Pricing>
            
             <TicketingOption Type="006" DeliveryMode="004" ID="TKO_1"/>
         </Reservation>
      </sel:RailConnect_SellSegmentRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="2e43a9b1-09e8-4d9b-a751-6dfbe45f0822"/><con:assertion type="Simple Contains" id="d3cbee5a-f945-45bc-a567-8d1d21a6184f" name="Contains"><con:configuration><token>&lt;PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:assertion type="XPath Match" id="f9a06d68-0897-4e24-b2f9-6997fb90a0a3" name="XPath Match"><con:configuration><path>declare namespace ns3='sell_segment_ctr';
declare namespace ns2='SellSegmentRQ';
declare namespace enc='http://www.w3.org/2003/05/soap-encoding';
declare namespace env='http://www.w3.org/2003/05/soap-envelope';
declare namespace ns1='SellSegmentRS';
count(//DetailQuote)</path><content>2</content><allowWildcards>false</allowWildcards><ignoreNamspaceDifferences>false</ignoreNamspaceDifferences><ignoreComments>false</ignoreComments></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer" id="dcdd2c05-21da-43e3-ace5-9553ad5e8271"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>prn</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Booking</con:sourceStep><con:sourcePath>//*/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>Ticketing</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint ticketing" id="b243938b-5fe7-456b-91d2-f49b9e2fd828"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionTicket")
String endP=domain+action
  log.info endP
  // Get the list of test steps
  def allTestSteps = testRunner.testCase.getTestStepsOfType(com.eviware.soapui.impl.wsdl.teststeps.WsdlTestRequestStep.class)

  // Set each of test steps endpoint from property endpointWork
  for (int i = 0;i&lt;allTestSteps.size();i++){
  allTestSteps[i].getHttpRequest().setEndpoint(endP)
  }


  </script></con:config></con:testStep><con:testStep type="request" name="Ticketing" id="5ff64741-18e3-448f-99c1-a4277a6705c6"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSTicket</con:interface><con:operation>ticketAction</con:operation><con:request name="Ticketing" id="542dbc9b-126f-4c33-a29b-0b7c1b3fd268"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/ticket</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:iss="IssueContractRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <iss:RailConnect_IssueContractRQ Distributor="?" Language="en-us" Options="opt" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?">
         <PnrIdentification PnrReference="R00018636068" Inventory="RNF"/>
         <Issue>
           
            <FormatAndDelivery Type="006" DeliveryMode="002"/>
             
         </Issue>
      </iss:RailConnect_IssueContractRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="618b17a7-53af-4f56-a448-06634cbf8858"/><con:assertion type="Simple Contains" id="37f7b05f-2488-4f23-a3ab-bd2828f6136c" name="Contains"><con:configuration><token>&lt;PnrIdentification </token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for RefundCondition" id="6a3d38a3-3271-4cac-9419-1af7a70d0947"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>RefundCondition</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="transfer" name="Property Transfer for CommitRefund" id="250d2179-b59e-424a-9aa8-fd491cac39de"><con:settings/><con:config xsi:type="con:PropertyTransfersStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>Pnr</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//PnrIdentification/@PnrReference</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//PnrIdentification/@PnrReference</con:targetPath><con:upgraded>true</con:upgraded></con:transfers><con:transfers setNullOnMissingSource="true" transferTextContent="true" failOnError="true" ignoreEmpty="false" transferToAll="false" entitize="false" transferChildNodes="false"><con:name>contract</con:name><con:sourceType>Response</con:sourceType><con:sourceStep>Ticketing</con:sourceStep><con:sourcePath>//Contract/@Number</con:sourcePath><con:targetType>Request</con:targetType><con:targetStep>CommitRefund</con:targetStep><con:targetPath>//ContractSelection/@RefContractNumbers</con:targetPath><con:upgraded>true</con:upgraded></con:transfers></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint refund condition" id="644c517b-0377-4aa1-9fc1-9bb524f162fb"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionRefundCondition")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("RefundCondition")
  refCondSteps.getHttpRequest().setEndpoint(endP)</script></con:config></con:testStep><con:testStep type="request" name="RefundCondition" id="3a31f55b-7cf9-4ce3-8372-9e4b05611129"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSRefundConditions</con:interface><con:operation>refundConditionAction</con:operation><con:request name="RefundCondition" id="68317a9a-2546-443c-91d8-0f73553460d1"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/refund_condition</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:get="GetRefundConditionsRQ">
    <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <get:RailConnect_GetRefundConditionsRQ TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="?" Distributor="?" Language="en-us">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636068" Inventory="RNF"/>
         <ContractSelection RefContractNumbers="7909300615525"/>
<Options ReasonCode="003">
          
         </Options>

      </get:RailConnect_GetRefundConditionsRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="44bc654f-a802-4439-88d1-93a65a1956a6"/><con:assertion type="Simple Contains" id="5da60bf9-2fbd-41d1-80a1-119de6b42ae5" name="Contains"><con:configuration><token>Quote</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:testStep type="groovy" name="Groovy Script: set endpoint commit refund" id="5c7168f2-b934-43a9-a351-417c1ea35a6c"><con:settings/><con:config><script>String domain = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectDomain")
String action = testRunner.testCase.testSuite.project.getPropertyValue("RailconnectActionCommitRefund")
String endP=domain+action
  log.info endP

  def refCondSteps = testRunner.testCase.getTestStepByName("CommitRefund")
  refCondSteps.getHttpRequest().setEndpoint(endP)



  </script></con:config></con:testStep><con:testStep type="request" name="CommitRefund" id="c6e74c9e-20ca-472e-af7f-beb36a1cf47c"><con:settings/><con:config xsi:type="con:RequestStep" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><con:interface>RailConnectWSCommitRefund</con:interface><con:operation>commitRefundAction</con:operation><con:request name="CommitRefund" id="19b3d68f-2818-44d0-be87-eaae531d241c"><con:settings><con:setting id="com.eviware.soapui.impl.wsdl.WsdlRequest@request-headers">&lt;xml-fragment/></con:setting></con:settings><con:encoding>UTF-8</con:encoding><con:endpoint>https://dev.amr.local/app_dev.php/railconnect/commit_refund</con:endpoint><con:request><![CDATA[<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://www.w3.org/2003/05/soap-envelope" xmlns:com="CommitRefundRQ">
   <soap:Header>
      <auth>
         <secretKey>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</secretKey>
      </auth>
   </soap:Header>
   <soap:Body>
      <com:RailConnect_CommitRefundRQ Language="en-us" Distributor="?" TimeStamp="${=(new Date()).format('yyyy-MM-dd')}T08:00:00" Version="1" CorrelationID="123abc">
         <!--Optional:-->
         <PnrIdentification PnrReference="R00018636068" Inventory="RNF"/>
         <!--Optional:-->
         <ContractSelection RefContractNumbers="7909300615525"/>
         <Options ReasonCode="003"/>
      </com:RailConnect_CommitRefundRQ>
   </soap:Body>
</soap:Envelope>]]></con:request><con:assertion type="SOAP Response" id="8180fe6c-a211-4884-8c42-0adc159fd4ed"/><con:assertion type="Simple Contains" id="772cde4c-12b8-46e3-9ee0-812ffdcf08d7" name="Contains"><con:configuration><token> &lt;ctr:PnrIdentification</token><ignoreCase>false</ignoreCase><useRegEx>false</useRegEx></con:configuration></con:assertion><con:credentials><con:authType>No Authorization</con:authType></con:credentials><con:jmsConfig JMSDeliveryMode="PERSISTENT"/><con:jmsPropertyConfig/><con:wsaConfig mustUnderstand="NONE" version="200508"/><con:wsrmConfig version="1.2"/></con:request></con:config></con:testStep><con:properties/></con:testCase><con:properties/></con:testSuite><con:properties><con:property><con:name>RailconnectDomain</con:name><con:value>https://dev.amr.local/app_dev.php/railconnect/</con:value></con:property><con:property><con:name>RailconnectSecretKey</con:name><con:value>1d10e690eaae068a45e5a31f34a5c08cd864d571032a868f90e55b7a1e140f99</con:value></con:property><con:property><con:name>RailconnectSecretKey demo</con:name><con:value>19900fedb9bf3653332b869b3716e09c307d72794292997f9382237c2a561503</con:value></con:property><con:property><con:name>RailconnectDomain demo</con:name><con:value>https://demo-amr.contentrail.com/railconnect/</con:value></con:property><con:property><con:name>RailconnectActionSearch</con:name><con:value>search</con:value></con:property><con:property><con:name>RailconnectActionBook</con:name><con:value>book</con:value></con:property><con:property><con:name>RailconnectActionTicket</con:name><con:value>ticket</con:value></con:property><con:property><con:name>RailconnectActionRefundCondition</con:name><con:value>refund_condition</con:value></con:property><con:property><con:name>RailconnectActionCommitRefund</con:name><con:value>commit_refund</con:value></con:property></con:properties><con:wssContainer/><con:oAuth2ProfileContainer/><con:oAuth1ProfileContainer/><con:sensitiveInformation/></con:soapui-project>